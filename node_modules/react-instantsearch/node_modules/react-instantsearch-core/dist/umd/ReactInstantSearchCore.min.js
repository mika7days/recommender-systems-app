/*! React InstantSearchCore UNRELEASED | Â© Algolia, inc. | https://github.com/algolia/instantsearch */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("react")):"function"==typeof define&&define.amd?define(["exports","react"],t):t((e=e||self).ReactInstantSearchCore={},e.React)}(this,function(e,b){"use strict";var s="default"in b?b.default:b,W="7.9.0";function C(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function d(n){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?C(Object(i),!0).forEach(function(e){var t,r;t=n,r=i[e=e],(e=function(e){e=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):C(Object(i)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(i,e))})}return n}function H(e){return(H="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function M(e,t){if(null==e)return{};var r,n=function(e,t){if(null==e)return{};for(var r,n={},i=Object.keys(e),a=0;a<i.length;a++)r=i[a],0<=t.indexOf(r)||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols)for(var i=Object.getOwnPropertySymbols(e),a=0;a<i.length;a++)r=i[a],0<=t.indexOf(r)||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r]);return n}function $(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,a,o,c=[],s=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);s=!0);}catch(e){u=!0,i=e}finally{try{if(!s&&null!=r.return&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw i}}return c}}(e,t)||function(e,t){var r;if(e)return"string"==typeof e?L(e,t):"Map"===(r="Object"===(r=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?L(e,t):void 0}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function L(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function r(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}var U=r;function Q(e){return"function"==typeof e}function B(e){return"object"==typeof e&&null!==e}function q(e){return void 0===e}r.prototype._events=void 0,r.prototype._maxListeners=void 0,r.defaultMaxListeners=10,r.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},r.prototype.emit=function(e){var t,r,n,i,a,o,c;if((this._events||(this._events={}),"error"===e)&&(!this._events.error||B(this._events.error)&&!this._events.error.length))throw(c=arguments[1])instanceof Error?c:((o=new Error('Uncaught, unspecified "error" event. ('+c+")")).context=c,o);if(q(t=this._events[e]))return!1;if(Q(t))switch(arguments.length){case 1:t.call(this);break;case 2:t.call(this,arguments[1]);break;case 3:t.call(this,arguments[1],arguments[2]);break;default:n=Array.prototype.slice.call(arguments,1),t.apply(this,n)}else if(B(t))for(n=Array.prototype.slice.call(arguments,1),r=(a=t.slice()).length,i=0;i<r;i++)a[i].apply(this,n);return!0},r.prototype.on=r.prototype.addListener=function(e,t){if(Q(t))return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,Q(t.listener)?t.listener:t),this._events[e]?B(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,B(this._events[e])&&!this._events[e].warned&&(t=q(this._maxListeners)?r.defaultMaxListeners:this._maxListeners)&&0<t&&this._events[e].length>t&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace)&&console.trace(),this;throw TypeError("listener must be a function")},r.prototype.once=function(e,t){var r;if(Q(t))return r=!1,n.listener=t,this.on(e,n),this;throw TypeError("listener must be a function");function n(){this.removeListener(e,n),r||(r=!0,t.apply(this,arguments))}},r.prototype.removeListener=function(e,t){var r,n,i,a;if(!Q(t))throw TypeError("listener must be a function");if(this._events&&this._events[e])if(i=(r=this._events[e]).length,n=-1,r===t||Q(r.listener)&&r.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(B(r)){for(a=i;0<a--;)if(r[a]===t||r[a].listener&&r[a].listener===t){n=a;break}if(n<0)return this;1===r.length?(r.length=0,delete this._events[e]):r.splice(n,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},r.prototype.removeAllListeners=function(e){var t,r;if(this._events)if(this._events.removeListener)if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);this.removeAllListeners("removeListener"),this._events={}}else{if(Q(r=this._events[e]))this.removeListener(e,r);else if(r)for(;r.length;)this.removeListener(e,r[r.length-1]);delete this._events[e]}else 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e];return this},r.prototype.listeners=function(e){e=this._events&&this._events[e]?Q(this._events[e])?[this._events[e]]:this._events[e].slice():[];return e},r.prototype.listenerCount=function(e){if(this._events){e=this._events[e];if(Q(e))return 1;if(e)return e.length}return 0},r.listenerCount=function(e,t){return e.listenerCount(t)};var V=function(e,t){e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})};function J(e,t,r){this.main=e,this.fn=t,this.recommendFn=r,this.lastResults=null,this.lastRecommendResults=null}V(J,U),J.prototype.detach=function(){this.removeAllListeners(),this.main.detachDerivedHelper(this)},J.prototype.getModifiedState=function(e){return this.fn(e)},J.prototype.getModifiedRecommendState=function(e){return this.recommendFn(e)};var z=J;var X=function(e){return"string"!=typeof e?e:String(e).replace(/^-/,"\\-")},K=function(e){return"string"!=typeof e?e:e.replace(/^\\-/,"-")};function G(e){return"function"==typeof e||Array.isArray(e)||"[object Object]"===Object.prototype.toString.call(e)}function Z(e,t){var r,n;if(e!==t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&"__proto__"!==i&&"constructor"!==i&&(r=t[i],void 0!==(n=e[i])&&void 0===r||(G(n)&&G(r)?e[i]=Z(n,r):e[i]="object"==typeof(n=r)&&null!==n?Z(Array.isArray(n)?[]:{},n):n));return e}var Y=function(e){G(e)||(e={});for(var t=1,r=arguments.length;t<r;t++){var n=arguments[t];G(n)&&Z(e,n)}return e};var ee=function(e){return e&&0<Object.keys(e).length};var te=function(e,t){if(null===e)return{};for(var r,n={},i=Object.keys(e),a=0;a<i.length;a++)r=i[a],0<=t.indexOf(r)||(n[r]=e[r]);return n};function re(e){this.params=(e=e||{}).params||[]}re.prototype={constructor:re,addParams:function(e){var t=this.params.slice();return t.push(e),new re({params:t})},removeParams:function(t){return new re({params:this.params.filter(function(e){return e.$$id!==t})})},addFrequentlyBoughtTogether:function(e){return this.addParams(Object.assign({},e,{model:"bought-together"}))},addRelatedProducts:function(e){return this.addParams(Object.assign({},e,{model:"related-products"}))},addTrendingItems:function(e){return this.addParams(Object.assign({},e,{model:"trending-items"}))},addTrendingFacets:function(e){return this.addParams(Object.assign({},e,{model:"trending-facets"}))},addLookingSimilar:function(e){return this.addParams(Object.assign({},e,{model:"looking-similar"}))},_buildQueries:function(t,r){return this.params.filter(function(e){return void 0===r[e.$$id]}).map(function(e){e=Object.assign({},e,{indexName:t});return delete e.$$id,e})}};var ne=re;function ie(e,t){this._state=e,this._rawResults=t;var r=this;e.params.forEach(function(e){e=e.$$id;r[e]=t[e]})}ie.prototype={constructor:ie};var ae=ie;function oe(r){return Object.keys(r).sort().reduce(function(e,t){return e[t]=r[t],e},{})}function ce(){return Array.prototype.slice.call(arguments).reduceRight(function(t,r){return Object.keys(Object(r)).forEach(function(e){void 0!==r[e]&&(void 0!==t[e]&&delete t[e],t[e]=r[e])}),t},{})}var l={_getQueries:function(c,s){var u=[];return u.push({indexName:c,params:l._getHitsSearchParams(s)}),s.getRefinedDisjunctiveFacets().forEach(function(e){u.push({indexName:c,params:l._getDisjunctiveFacetSearchParams(s,e)})}),s.getRefinedHierarchicalFacets().forEach(function(e){var a,o=s.getHierarchicalFacetByName(e),e=s.getHierarchicalRefinement(e),n=s._getHierarchicalFacetSeparator(o);0<e.length&&1<e[0].split(n).length&&(a=e[0].split(n).slice(0,-1).reduce(function(e,t,r){return e.concat({attribute:o.attributes[r],value:0===r?t:[e[e.length-1].value,t].join(n)})},[])).forEach(function(e,t){e=l._getDisjunctiveFacetSearchParams(s,e.attribute,0===t);function n(t){return o.attributes.some(function(e){return e===t.split(":")[0]})}var r=(e.facetFilters||[]).reduce(function(e,t){var r;return Array.isArray(t)&&0<(r=t.filter(function(e){return!n(e)})).length&&e.push(r),"string"!=typeof t||n(t)||e.push(t),e},[]),i=a[t-1];e.facetFilters=0<t?r.concat(i.attribute+":"+i.value):0<r.length?r:void 0,u.push({indexName:c,params:e})})}),u},_getHitsSearchParams:function(e){var t=e.facets.concat(e.disjunctiveFacets).concat(l._getHitsHierarchicalFacetsAttributes(e)).sort(),r=l._getFacetFilters(e),n=l._getNumericFilters(e),i=l._getTagFilters(e),t={facets:-1<t.indexOf("*")?["*"]:t,tagFilters:i};return 0<r.length&&(t.facetFilters=r),0<n.length&&(t.numericFilters=n),oe(Y({},e.getQueryParams(),t))},_getDisjunctiveFacetSearchParams:function(e,t,r){var n=l._getFacetFilters(e,t,r),i=l._getNumericFilters(e,t),a=l._getTagFilters(e),o={hitsPerPage:0,page:0,analytics:!1,clickAnalytics:!1},a=(0<a.length&&(o.tagFilters=a),e.getHierarchicalFacetByName(t));return o.facets=a?l._getDisjunctiveHierarchicalFacetAttribute(e,a,r):t,0<i.length&&(o.numericFilters=i),0<n.length&&(o.facetFilters=n),oe(Y({},e.getQueryParams(),o))},_getNumericFilters:function(e,i){var a;return e.numericFilters||(a=[],Object.keys(e.numericRefinements).forEach(function(n){var t=e.numericRefinements[n]||{};Object.keys(t).forEach(function(r){var e=t[r]||[];i!==n&&e.forEach(function(e){var t;Array.isArray(e)?(t=e.map(function(e){return n+r+e}),a.push(t)):a.push(n+r+e)})})}),a)},_getTagFilters:function(e){return e.tagFilters||e.tagRefinements.join(",")},_getFacetFilters:function(o,c,s){var u=[],e=o.facetsRefinements||{},r=(Object.keys(e).sort().forEach(function(t){(e[t]||[]).slice().sort().forEach(function(e){u.push(t+":"+e)})}),o.facetsExcludes||{}),n=(Object.keys(r).sort().forEach(function(t){(r[t]||[]).sort().forEach(function(e){u.push(t+":-"+e)})}),o.disjunctiveFacetsRefinements||{}),l=(Object.keys(n).sort().forEach(function(t){var r,e=n[t]||[];t!==c&&e&&0!==e.length&&(r=[],e.slice().sort().forEach(function(e){r.push(t+":"+e)}),u.push(r))}),o.hierarchicalFacetsRefinements||{});return Object.keys(l).sort().forEach(function(e){var t=(l[e]||[])[0];if(void 0!==t){var r,n=o.getHierarchicalFacetByName(e),i=o._getHierarchicalFacetSeparator(n),a=o._getHierarchicalRootPath(n);if(c===e){if(-1===t.indexOf(i)||!a&&!0===s||a&&a.split(i).length===t.split(i).length)return;t=a?(r=a.split(i).length-1,a):(r=t.split(i).length-2,t.slice(0,t.lastIndexOf(i)))}else r=t.split(i).length-1;(e=n.attributes[r])&&u.push([e+":"+t])}}),u},_getHitsHierarchicalFacetsAttributes:function(i){return i.hierarchicalFacets.reduce(function(e,t){var r,n=i.getHierarchicalRefinement(t.name)[0];return n?(r=i._getHierarchicalFacetSeparator(t),n=n.split(r).length,r=t.attributes.slice(0,n+1),e.concat(r)):(e.push(t.attributes[0]),e)},[])},_getDisjunctiveHierarchicalFacetAttribute:function(e,t,r){var n,i=e._getHierarchicalFacetSeparator(t);return!0===r?(r=0,(n=e._getHierarchicalRootPath(t))&&(r=n.split(i).length),[t.attributes[r]]):(n=(e.getHierarchicalRefinement(t.name)[0]||"").split(i).length-1,t.attributes.slice(0,1+n))},getSearchForFacetQuery:function(e,t,r,n){n=n.isDisjunctiveFacet(e)?n.clearRefinements(e):n,t={facetQuery:t,facetName:e};return"number"==typeof r&&(t.maxFacetHits=r),oe(Y({},l._getHitsSearchParams(n),t))}},se=l,p=function(e,t){if(Array.isArray(e))for(var r=0;r<e.length;r++)if(t(e[r]))return e[r]};var ue=function(r,n){return r.filter(function(e,t){return-1<n.indexOf(e)&&r.indexOf(e)===t})};var le=function e(t){if("number"==typeof t)return t;if("string"==typeof t)return parseFloat(t);if(Array.isArray(t))return t.map(e);throw new Error("The value should be a number, a parsable string or an array of those.")},fe={addRefinement:function(e,t,r){var n;return fe.isRefined(e,t,r)?e:(r=""+r,r=e[t]?e[t].concat(r):[r],(n={})[t]=r,ce({},n,e))},removeRefinement:function(e,r,t){var n;return void 0===t?fe.clearRefinement(e,function(e,t){return r===t}):(n=""+t,fe.clearRefinement(e,function(e,t){return r===t&&n===e}))},toggleRefinement:function(e,t,r){if(void 0===r)throw new Error("toggleRefinement should be used with a value");return fe.isRefined(e,t,r)?fe.removeRefinement(e,t,r):fe.addRefinement(e,t,r)},clearRefinement:function(i,a,o){var c,e;return void 0===a?ee(i)?{}:i:"string"==typeof a?te(i,[a]):"function"==typeof a?(c=!1,e=Object.keys(i).reduce(function(e,t){var r=i[t]||[],n=r.filter(function(e){return!a(e,t,o)});return n.length!==r.length&&(c=!0),e[t]=n,e},{}),c?e:i):void 0},isRefined:function(e,t,r){var n=Boolean(e[t])&&0<e[t].length;return void 0!==r&&n?-1!==e[t].indexOf(""+r):n}},n=fe;function he(e,r){return Array.isArray(e)&&Array.isArray(r)?e.length===r.length&&e.every(function(e,t){return he(r[t],e)}):e===r}function o(e){var n=e?o._parseNumbers(e):{},i=(void 0===n.userToken||null!==(e=n.userToken)&&/^[a-zA-Z0-9_-]{1,64}$/.test(e)||console.warn("[algoliasearch-helper] The `userToken` parameter is invalid. This can lead to wrong analytics.\n  - Format: [a-zA-Z0-9_-]{1,64}"),this.facets=n.facets||[],this.disjunctiveFacets=n.disjunctiveFacets||[],this.hierarchicalFacets=n.hierarchicalFacets||[],this.facetsRefinements=n.facetsRefinements||{},this.facetsExcludes=n.facetsExcludes||{},this.disjunctiveFacetsRefinements=n.disjunctiveFacetsRefinements||{},this.numericRefinements=n.numericRefinements||{},this.tagRefinements=n.tagRefinements||[],this.hierarchicalFacetsRefinements=n.hierarchicalFacetsRefinements||{},this);Object.keys(n).forEach(function(e){var t=-1!==o.PARAMETERS.indexOf(e),r=void 0!==n[e];!t&&r&&(i[e]=n[e])})}o.PARAMETERS=Object.keys(new o),o._parseNumbers=function(i){var n,a;return i instanceof o?i:(n={},["aroundPrecision","aroundRadius","getRankingInfo","minWordSizefor2Typos","minWordSizefor1Typo","page","maxValuesPerFacet","distinct","minimumAroundRadius","hitsPerPage","minProximity"].forEach(function(e){var t,r=i[e];"string"==typeof r&&(t=parseFloat(r),n[e]=isNaN(t)?r:t)}),Array.isArray(i.insideBoundingBox)&&(n.insideBoundingBox=i.insideBoundingBox.map(function(e){return Array.isArray(e)?e.map(function(e){return parseFloat(e)}):e})),i.numericRefinements&&(a={},Object.keys(i.numericRefinements).forEach(function(r){var n=i.numericRefinements[r]||{};a[r]={},Object.keys(n).forEach(function(e){var t=n[e].map(function(e){return Array.isArray(e)?e.map(function(e){return"string"==typeof e?parseFloat(e):e}):"string"==typeof e?parseFloat(e):e});a[r][e]=t})}),n.numericRefinements=a),Y(i,n))},o.make=function(e){var r=new o(e);return(e.hierarchicalFacets||[]).forEach(function(e){var t;e.rootPath&&0===(t=(r=0<(t=r.getHierarchicalRefinement(e.name)).length&&0!==t[0].indexOf(e.rootPath)?r.clearRefinements(e.name):r).getHierarchicalRefinement(e.name)).length&&(r=r.toggleHierarchicalFacetRefinement(e.name,e.rootPath))}),r},o.validate=function(e,t){t=t||{};return e.tagFilters&&t.tagRefinements&&0<t.tagRefinements.length?new Error("[Tags] Cannot switch from the managed tag API to the advanced API. It is probably an error, if it is really what you want, you should first clear the tags with clearTags method."):0<e.tagRefinements.length&&t.tagFilters?new Error("[Tags] Cannot switch from the advanced tag API to the managed API. It is probably an error, if it is not, you should first clear the tags with clearTags method."):e.numericFilters&&t.numericRefinements&&ee(t.numericRefinements)?new Error("[Numeric filters] Can't switch from the advanced to the managed API. It is probably an error, if this is really what you want, you have to first clear the numeric filters."):ee(e.numericRefinements)&&t.numericFilters?new Error("[Numeric filters] Can't switch from the managed API to the advanced. It is probably an error, if this is really what you want, you have to first clear the numeric filters."):null},o.prototype={constructor:o,clearRefinements:function(e){e={numericRefinements:this._clearNumericRefinements(e),facetsRefinements:n.clearRefinement(this.facetsRefinements,e,"conjunctiveFacet"),facetsExcludes:n.clearRefinement(this.facetsExcludes,e,"exclude"),disjunctiveFacetsRefinements:n.clearRefinement(this.disjunctiveFacetsRefinements,e,"disjunctiveFacet"),hierarchicalFacetsRefinements:n.clearRefinement(this.hierarchicalFacetsRefinements,e,"hierarchicalFacet")};return e.numericRefinements===this.numericRefinements&&e.facetsRefinements===this.facetsRefinements&&e.facetsExcludes===this.facetsExcludes&&e.disjunctiveFacetsRefinements===this.disjunctiveFacetsRefinements&&e.hierarchicalFacetsRefinements===this.hierarchicalFacetsRefinements?this:this.setQueryParameters(e)},clearTags:function(){return void 0===this.tagFilters&&0===this.tagRefinements.length?this:this.setQueryParameters({tagFilters:void 0,tagRefinements:[]})},setIndex:function(e){return e===this.index?this:this.setQueryParameters({index:e})},setQuery:function(e){return e===this.query?this:this.setQueryParameters({query:e})},setPage:function(e){return e===this.page?this:this.setQueryParameters({page:e})},setFacets:function(e){return this.setQueryParameters({facets:e})},setDisjunctiveFacets:function(e){return this.setQueryParameters({disjunctiveFacets:e})},setHitsPerPage:function(e){return this.hitsPerPage===e?this:this.setQueryParameters({hitsPerPage:e})},setTypoTolerance:function(e){return this.typoTolerance===e?this:this.setQueryParameters({typoTolerance:e})},addNumericRefinement:function(e,t,r){var n,r=le(r);return this.isNumericRefined(e,t,r)?this:((n=Y({},this.numericRefinements))[e]=Y({},n[e]),n[e][t]?(n[e][t]=n[e][t].slice(),n[e][t].push(r)):n[e][t]=[r],this.setQueryParameters({numericRefinements:n}))},getConjunctiveRefinements:function(e){return this.isConjunctiveFacet(e)&&this.facetsRefinements[e]||[]},getDisjunctiveRefinements:function(e){return this.isDisjunctiveFacet(e)&&this.disjunctiveFacetsRefinements[e]||[]},getHierarchicalRefinement:function(e){return this.hierarchicalFacetsRefinements[e]||[]},getExcludeRefinements:function(e){return this.isConjunctiveFacet(e)&&this.facetsExcludes[e]||[]},removeNumericRefinement:function(r,n,e){var i=e;return void 0!==i?this.isNumericRefined(r,n,i)?this.setQueryParameters({numericRefinements:this._clearNumericRefinements(function(e,t){return t===r&&e.op===n&&he(e.val,le(i))})}):this:void 0!==n?this.isNumericRefined(r,n)?this.setQueryParameters({numericRefinements:this._clearNumericRefinements(function(e,t){return t===r&&e.op===n})}):this:this.isNumericRefined(r)?this.setQueryParameters({numericRefinements:this._clearNumericRefinements(function(e,t){return t===r})}):this},getNumericRefinements:function(e){return this.numericRefinements[e]||{}},getNumericRefinement:function(e,t){return this.numericRefinements[e]&&this.numericRefinements[e][t]},_clearNumericRefinements:function(o){var c,t,e;return void 0===o?ee(this.numericRefinements)?{}:this.numericRefinements:"string"==typeof o?te(this.numericRefinements,[o]):"function"==typeof o?(c=!1,t=this.numericRefinements,e=Object.keys(t).reduce(function(e,n){var i=t[n],a={},i=i||{};return Object.keys(i).forEach(function(t){var e=i[t]||[],r=[];e.forEach(function(e){o({val:e,op:t},n,"numeric")||r.push(e)}),r.length!==e.length&&(c=!0),a[t]=r}),e[n]=a,e},{}),c?e:this.numericRefinements):void 0},addFacet:function(e){return this.isConjunctiveFacet(e)?this:this.setQueryParameters({facets:this.facets.concat([e])})},addDisjunctiveFacet:function(e){return this.isDisjunctiveFacet(e)?this:this.setQueryParameters({disjunctiveFacets:this.disjunctiveFacets.concat([e])})},addHierarchicalFacet:function(e){if(this.isHierarchicalFacet(e.name))throw new Error("Cannot declare two hierarchical facets with the same name: `"+e.name+"`");return this.setQueryParameters({hierarchicalFacets:this.hierarchicalFacets.concat([e])})},addFacetRefinement:function(e,t){if(this.isConjunctiveFacet(e))return n.isRefined(this.facetsRefinements,e,t)?this:this.setQueryParameters({facetsRefinements:n.addRefinement(this.facetsRefinements,e,t)});throw new Error(e+" is not defined in the facets attribute of the helper configuration")},addExcludeRefinement:function(e,t){if(this.isConjunctiveFacet(e))return n.isRefined(this.facetsExcludes,e,t)?this:this.setQueryParameters({facetsExcludes:n.addRefinement(this.facetsExcludes,e,t)});throw new Error(e+" is not defined in the facets attribute of the helper configuration")},addDisjunctiveFacetRefinement:function(e,t){if(this.isDisjunctiveFacet(e))return n.isRefined(this.disjunctiveFacetsRefinements,e,t)?this:this.setQueryParameters({disjunctiveFacetsRefinements:n.addRefinement(this.disjunctiveFacetsRefinements,e,t)});throw new Error(e+" is not defined in the disjunctiveFacets attribute of the helper configuration")},addTagRefinement:function(e){return this.isTagRefined(e)?this:(e={tagRefinements:this.tagRefinements.concat(e)},this.setQueryParameters(e))},removeFacet:function(t){return this.isConjunctiveFacet(t)?this.clearRefinements(t).setQueryParameters({facets:this.facets.filter(function(e){return e!==t})}):this},removeDisjunctiveFacet:function(t){return this.isDisjunctiveFacet(t)?this.clearRefinements(t).setQueryParameters({disjunctiveFacets:this.disjunctiveFacets.filter(function(e){return e!==t})}):this},removeHierarchicalFacet:function(t){return this.isHierarchicalFacet(t)?this.clearRefinements(t).setQueryParameters({hierarchicalFacets:this.hierarchicalFacets.filter(function(e){return e.name!==t})}):this},removeFacetRefinement:function(e,t){if(this.isConjunctiveFacet(e))return n.isRefined(this.facetsRefinements,e,t)?this.setQueryParameters({facetsRefinements:n.removeRefinement(this.facetsRefinements,e,t)}):this;throw new Error(e+" is not defined in the facets attribute of the helper configuration")},removeExcludeRefinement:function(e,t){if(this.isConjunctiveFacet(e))return n.isRefined(this.facetsExcludes,e,t)?this.setQueryParameters({facetsExcludes:n.removeRefinement(this.facetsExcludes,e,t)}):this;throw new Error(e+" is not defined in the facets attribute of the helper configuration")},removeDisjunctiveFacetRefinement:function(e,t){if(this.isDisjunctiveFacet(e))return n.isRefined(this.disjunctiveFacetsRefinements,e,t)?this.setQueryParameters({disjunctiveFacetsRefinements:n.removeRefinement(this.disjunctiveFacetsRefinements,e,t)}):this;throw new Error(e+" is not defined in the disjunctiveFacets attribute of the helper configuration")},removeTagRefinement:function(t){var e;return this.isTagRefined(t)?(e={tagRefinements:this.tagRefinements.filter(function(e){return e!==t})},this.setQueryParameters(e)):this},toggleRefinement:function(e,t){return this.toggleFacetRefinement(e,t)},toggleFacetRefinement:function(e,t){if(this.isHierarchicalFacet(e))return this.toggleHierarchicalFacetRefinement(e,t);if(this.isConjunctiveFacet(e))return this.toggleConjunctiveFacetRefinement(e,t);if(this.isDisjunctiveFacet(e))return this.toggleDisjunctiveFacetRefinement(e,t);throw new Error("Cannot refine the undeclared facet "+e+"; it should be added to the helper options facets, disjunctiveFacets or hierarchicalFacets")},toggleConjunctiveFacetRefinement:function(e,t){if(this.isConjunctiveFacet(e))return this.setQueryParameters({facetsRefinements:n.toggleRefinement(this.facetsRefinements,e,t)});throw new Error(e+" is not defined in the facets attribute of the helper configuration")},toggleExcludeFacetRefinement:function(e,t){if(this.isConjunctiveFacet(e))return this.setQueryParameters({facetsExcludes:n.toggleRefinement(this.facetsExcludes,e,t)});throw new Error(e+" is not defined in the facets attribute of the helper configuration")},toggleDisjunctiveFacetRefinement:function(e,t){if(this.isDisjunctiveFacet(e))return this.setQueryParameters({disjunctiveFacetsRefinements:n.toggleRefinement(this.disjunctiveFacetsRefinements,e,t)});throw new Error(e+" is not defined in the disjunctiveFacets attribute of the helper configuration")},toggleHierarchicalFacetRefinement:function(e,t){var r,n;if(this.isHierarchicalFacet(e))return r=this._getHierarchicalFacetSeparator(this.getHierarchicalFacetByName(e)),n={},void 0!==this.hierarchicalFacetsRefinements[e]&&0<this.hierarchicalFacetsRefinements[e].length&&(this.hierarchicalFacetsRefinements[e][0]===t||0===this.hierarchicalFacetsRefinements[e][0].indexOf(t+r))?-1===t.indexOf(r)?n[e]=[]:n[e]=[t.slice(0,t.lastIndexOf(r))]:n[e]=[t],this.setQueryParameters({hierarchicalFacetsRefinements:ce({},n,this.hierarchicalFacetsRefinements)});throw new Error(e+" is not defined in the hierarchicalFacets attribute of the helper configuration")},addHierarchicalFacetRefinement:function(e,t){if(this.isHierarchicalFacetRefined(e))throw new Error(e+" is already refined.");var r;if(this.isHierarchicalFacet(e))return(r={})[e]=[t],this.setQueryParameters({hierarchicalFacetsRefinements:ce({},r,this.hierarchicalFacetsRefinements)});throw new Error(e+" is not defined in the hierarchicalFacets attribute of the helper configuration.")},removeHierarchicalFacetRefinement:function(e){var t;return this.isHierarchicalFacetRefined(e)?((t={})[e]=[],this.setQueryParameters({hierarchicalFacetsRefinements:ce({},t,this.hierarchicalFacetsRefinements)})):this},toggleTagRefinement:function(e){return this.isTagRefined(e)?this.removeTagRefinement(e):this.addTagRefinement(e)},isDisjunctiveFacet:function(e){return-1<this.disjunctiveFacets.indexOf(e)},isHierarchicalFacet:function(e){return void 0!==this.getHierarchicalFacetByName(e)},isConjunctiveFacet:function(e){return-1<this.facets.indexOf(e)},isFacetRefined:function(e,t){return!!this.isConjunctiveFacet(e)&&n.isRefined(this.facetsRefinements,e,t)},isExcludeRefined:function(e,t){return!!this.isConjunctiveFacet(e)&&n.isRefined(this.facetsExcludes,e,t)},isDisjunctiveFacetRefined:function(e,t){return!!this.isDisjunctiveFacet(e)&&n.isRefined(this.disjunctiveFacetsRefinements,e,t)},isHierarchicalFacetRefined:function(e,t){return!!this.isHierarchicalFacet(e)&&(e=this.getHierarchicalRefinement(e),t?-1!==e.indexOf(t):0<e.length)},isNumericRefined:function(e,t,r){var n,i;return void 0===r&&void 0===t?Boolean(this.numericRefinements[e]):(n=this.numericRefinements[e]&&void 0!==this.numericRefinements[e][t],void 0!==r&&n?(r=le(r),t=void 0!==(e=this.numericRefinements[e][t],i=r,p(e,function(e){return he(e,i)})),n&&t):n)},isTagRefined:function(e){return-1!==this.tagRefinements.indexOf(e)},getRefinedDisjunctiveFacets:function(){var t=this,e=ue(Object.keys(this.numericRefinements).filter(function(e){return 0<Object.keys(t.numericRefinements[e]).length}),this.disjunctiveFacets);return Object.keys(this.disjunctiveFacetsRefinements).filter(function(e){return 0<t.disjunctiveFacetsRefinements[e].length}).concat(e).concat(this.getRefinedHierarchicalFacets()).sort()},getRefinedHierarchicalFacets:function(){var t=this;return ue(this.hierarchicalFacets.map(function(e){return e.name}),Object.keys(this.hierarchicalFacetsRefinements).filter(function(e){return 0<t.hierarchicalFacetsRefinements[e].length})).sort()},getUnrefinedDisjunctiveFacets:function(){var t=this.getRefinedDisjunctiveFacets();return this.disjunctiveFacets.filter(function(e){return-1===t.indexOf(e)})},managedParameters:["index","facets","disjunctiveFacets","facetsRefinements","hierarchicalFacets","facetsExcludes","disjunctiveFacetsRefinements","numericRefinements","tagRefinements","hierarchicalFacetsRefinements"],getQueryParams:function(){var r=this.managedParameters,n={},i=this;return Object.keys(this).forEach(function(e){var t=i[e];-1===r.indexOf(e)&&void 0!==t&&(n[e]=t)}),n},setQueryParameter:function(e,t){var r;return this[e]===t?this:((r={})[e]=t,this.setQueryParameters(r))},setQueryParameters:function(e){if(!e)return this;var t=o.validate(this,e);if(t)throw t;var r=this,i=o._parseNumbers(e),t=Object.keys(this).reduce(function(e,t){return e[t]=r[t],e},{}),e=Object.keys(i).reduce(function(e,t){var r=void 0!==e[t],n=void 0!==i[t];return r&&!n?te(e,[t]):(n&&(e[t]=i[t]),e)},t);return new this.constructor(e)},resetPage:function(){return void 0===this.page?this:this.setPage(0)},_getHierarchicalFacetSortBy:function(e){return e.sortBy||["isRefined:desc","name:asc"]},_getHierarchicalFacetSeparator:function(e){return e.separator||" > "},_getHierarchicalRootPath:function(e){return e.rootPath||null},_getHierarchicalShowParentLevel:function(e){return"boolean"!=typeof e.showParentLevel||e.showParentLevel},getHierarchicalFacetByName:function(t){return p(this.hierarchicalFacets,function(e){return e.name===t})},getHierarchicalFacetBreadcrumb:function(e){var t;return this.isHierarchicalFacet(e)&&(t=this.getHierarchicalRefinement(e)[0])?(e=this._getHierarchicalFacetSeparator(this.getHierarchicalFacetByName(e)),t.split(e).map(function(e){return e.trim()})):[]},toString:function(){return JSON.stringify(this,null,2)}};function de(e){return Array.isArray(e)?e.filter(Boolean):[]}function me(e,t){if(Array.isArray(e))for(var r=0;r<e.length;r++)if(t(e[r]))return r;return-1}function pe(e,t){var n=(t||[]).map(function(e){return e.split(":")});return e.reduce(function(e,t){var r=t.split(":"),t=p(n,function(e){return e[0]===r[0]});return 1<r.length||!t?(e[0].push(r[0]),e[1].push(r[1])):(e[0].push(t[0]),e[1].push(t[1])),e},[[],[]])}var ge=o;var ye=function(e,r,i){return Array.isArray(e)?(Array.isArray(i)||(i=[]),(e=e.map(function(t,e){return{criteria:r.map(function(e){return t[e]}),index:e,value:t}})).sort(function(e,t){for(var r=-1;++r<e.criteria.length;){var n=function(e,t){if(e!==t){var r=void 0!==e,n=null===e,i=void 0!==t,a=null===t;if(!a&&t<e||n&&i||!r)return 1;if(!n&&e<t||a&&r||!i)return-1}return 0}(e.criteria[r],t.criteria[r]);if(n)return!(r>=i.length)&&"desc"===i[r]?-n:n}return e.index-t.index}),e.map(function(e){return e.value})):[]},ve=function(m){return function(e,t){function r(e,o,t){var r,c=e;if(0<t){var n=0;for(c=e;n<t;){var i=c&&Array.isArray(c.data)?c.data:[],c=p(i,function(e){return e.isRefined});n++}}return c&&(r=Object.keys(o.data).map(function(e){return[e,o.data[e]]}).filter(function(e){var t,r,n,i,a,e=e[0];return e=e,t=c.path||u,r=f,n=s,a=l,(!(i=u)||0===e.indexOf(i)&&i!==e)&&(!i&&-1===e.indexOf(n)||i&&e.split(n).length-i.split(n).length==1||-1===e.indexOf(n)&&-1===r.indexOf(n)||0===r.indexOf(e)||0===e.indexOf(t+n)&&(a||0===e.indexOf(r)))}),c.data=ye(r.map(function(e){var t,r,n,i,a=e[0],e=e[1];return e=e,a=a,t=s,r=Se(f),n=o.exhaustive,{name:(i=a.split(t))[i.length-1].trim(),path:a,escapedValue:be(a),count:e,isRefined:r===a||0===r.indexOf(a+t),exhaustive:n,data:null}}),a[0],a[1])),e}var a,s,u,l,f,n=m.hierarchicalFacets[t],i=m.hierarchicalFacetsRefinements[n.name]&&m.hierarchicalFacetsRefinements[n.name][0]||"",o=m._getHierarchicalFacetSeparator(n),c=m._getHierarchicalRootPath(n),h=m._getHierarchicalShowParentLevel(n),n=pe(m._getHierarchicalFacetSortBy(n)),d=e.every(function(e){return e.exhaustive}),n=(a=n,s=o,l=h,f=i,e);return(n=(u=c)?e.slice(c.split(o).length):n).reduce(r,{name:m.hierarchicalFacets[t].name,count:null,isRefined:!0,path:null,escapedValue:null,exhaustive:d,data:null})}},be=X,Se=K;var Oe=X,je=K;function we(e){var r={};return e.forEach(function(e,t){r[e]=t}),r}function Pe(e,t,r){t&&t[r]&&(e.stats=t[r])}function Re(l,t,e){var c=t[0],f=(this._rawResults=t,this),r=(Object.keys(c).forEach(function(e){f[e]=c[e]}),Y({persistHierarchicalRootCount:!1},e)),e=(Object.keys(r).forEach(function(e){f[e]=r[e]}),this.processingTimeMS=t.reduce(function(e,t){return void 0===t.processingTimeMS?e:e+t.processingTimeMS},0),this.disjunctiveFacets=[],this.hierarchicalFacets=l.hierarchicalFacets.map(function(){return[]}),this.facets=[],l.getRefinedDisjunctiveFacets()),s=we(l.facets),u=we(l.disjunctiveFacets),n=1,h=c.facets||{};Object.keys(h).forEach(function(e){var t,r,n,i,a=h[e],o=(n=l.hierarchicalFacets,t=e,p(n,function(e){return-1<(e.attributes||[]).indexOf(t)}));o?(n=o.attributes.indexOf(e),r=me(l.hierarchicalFacets,function(e){return e.name===o.name}),f.hierarchicalFacets[r][n]={attribute:e,data:a,exhaustive:c.exhaustiveFacetsCount}):(r=-1!==l.disjunctiveFacets.indexOf(e),n=-1!==l.facets.indexOf(e),r&&(i=u[e],f.disjunctiveFacets[i]={name:e,data:a,exhaustive:c.exhaustiveFacetsCount},Pe(f.disjunctiveFacets[i],c.facets_stats,e)),n&&(i=s[e],f.facets[i]={name:e,data:a,exhaustive:c.exhaustiveFacetsCount},Pe(f.facets[i],c.facets_stats,e)))}),this.hierarchicalFacets=de(this.hierarchicalFacets),e.forEach(function(e){var i=t[n],a=i&&i.facets?i.facets:{},o=l.getHierarchicalFacetByName(e);Object.keys(a).forEach(function(t){var r,e,n=a[t];o?(r=me(l.hierarchicalFacets,function(e){return e.name===o.name}),-1!==(e=me(f.hierarchicalFacets[r],function(e){return e.attribute===t}))&&(f.hierarchicalFacets[r][e].data=Y({},f.hierarchicalFacets[r][e].data,n))):(r=u[t],e=c.facets&&c.facets[t]||{},f.disjunctiveFacets[r]={name:t,data:ce({},n,e),exhaustive:i.exhaustiveFacetsCount},Pe(f.disjunctiveFacets[r],i.facets_stats,t),l.disjunctiveFacetsRefinements[t]&&l.disjunctiveFacetsRefinements[t].forEach(function(e){!f.disjunctiveFacets[r].data[e]&&-1<l.disjunctiveFacetsRefinements[t].indexOf(je(e))&&(f.disjunctiveFacets[r].data[e]=0)}))}),n++}),l.getRefinedHierarchicalFacets().forEach(function(e){var c=l.getHierarchicalFacetByName(e),s=l._getHierarchicalFacetSeparator(c),u=l.getHierarchicalRefinement(e);0===u.length||u[0].split(s).length<2||t.slice(n).forEach(function(e){var o=e&&e.facets?e.facets:{};Object.keys(o).forEach(function(t){var e,r,n=o[t],i=me(l.hierarchicalFacets,function(e){return e.name===c.name}),a=me(f.hierarchicalFacets[i],function(e){return e.attribute===t});-1!==a&&(e={},0<u.length&&!f.persistHierarchicalRootCount&&(e[r=u[0].split(s)[0]]=f.hierarchicalFacets[i][a].data[r]),f.hierarchicalFacets[i][a].data=ce(e,n,f.hierarchicalFacets[i][a].data))}),n++})}),Object.keys(l.facetsExcludes).forEach(function(t){var e=l.facetsExcludes[t],r=s[t];f.facets[r]={name:t,data:h[t],exhaustive:c.exhaustiveFacetsCount},e.forEach(function(e){f.facets[r]=f.facets[r]||{name:t},f.facets[r].data=f.facets[r].data||{},f.facets[r].data[e]=0})}),this.hierarchicalFacets=this.hierarchicalFacets.map(ve(l)),this.facets=de(this.facets),this.disjunctiveFacets=de(this.disjunctiveFacets),this._state=l}function Ee(r,n){function e(e){return e.name===n}var i,a,t,o,c,s;return r._state.isConjunctiveFacet(n)?(i=p(r.facets,e))?Object.keys(i.data).map(function(e){var t=Oe(e);return{name:e,escapedValue:t,count:i.data[e],isRefined:r._state.isFacetRefined(n,t),isExcluded:r._state.isExcludeRefined(n,e)}}):[]:r._state.isDisjunctiveFacet(n)?(a=p(r.disjunctiveFacets,e))?Object.keys(a.data).map(function(e){var t=Oe(e);return{name:e,escapedValue:t,count:a.data[e],isRefined:r._state.isDisjunctiveFacetRefined(n,t)}}):[]:r._state.isHierarchicalFacet(n)?((t=p(r.hierarchicalFacets,e))&&(s=r._state.getHierarchicalFacetByName(n),o=r._state._getHierarchicalFacetSeparator(s),(s=(c=0===(c=je(r._state.getHierarchicalRefinement(n)[0]||"")).indexOf(s.rootPath)?c.replace(s.rootPath+o,""):c).split(o)).unshift(n),function t(e,r,n){e.isRefined=e.name===(r[n]&&r[n].trim());e.data&&e.data.forEach(function(e){t(e,r,n+1)})}(t,s,0)),t):void 0}function Fe(e,t){e=p(e,function(e){return e.name===t});return e&&e.stats}function xe(e,t,r,n,i){var i=p(i,function(e){return e.name===r}),a=i&&i.data&&i.data[n]?i.data[n]:0,i=i&&i.exhaustive||!1;return{type:t,attributeName:r,name:n,count:a,exhaustive:i}}Re.prototype.getFacetByName=function(t){function e(e){return e.name===t}return p(this.facets,e)||p(this.disjunctiveFacets,e)||p(this.hierarchicalFacets,e)},Re.DEFAULT_SORT=["isRefined:desc","count:desc","name:asc"],Re.prototype.getFacetValues=function(e,t){var o,c,r=Ee(this,e);if(r)return o=ce({},t,{sortBy:Re.DEFAULT_SORT,facetOrdering:!(t&&t.sortBy)}),c=this,function t(r,e,n,i){var a;return i=i||0,Array.isArray(e)?r(e,n[i]):e.data&&0!==e.data.length?(a=e.data.map(function(e){return t(r,e,n,i+1)}),a=r(a,n[i]),ce({data:a},e)):e}(function(e,t){if(o.facetOrdering){t=t;a=(a=c).renderingContent&&a.renderingContent.facetOrdering&&a.renderingContent.facetOrdering.values&&a.renderingContent.facetOrdering.values[t];if(a)return t=e,r=[],n=[],i=((a=a).order||[]).reduce(function(e,t,r){return e[t]=r,e},{}),t.forEach(function(e){var t=e.path||e.name;void 0!==i[t]?r[i[t]]=e:n.push(e)}),r=r.filter(function(e){return e}),"hidden"===(t=a.sortRemainingBy)?r:r.concat(ye(n,(a="alpha"===t?[["path","name"],["asc","asc"]]:[["count"],["desc"]])[0],a[1]))}var r,n,i,a;if(Array.isArray(o.sortBy))return t=pe(o.sortBy,Re.DEFAULT_SORT),ye(e,t[0],t[1]);if("function"==typeof o.sortBy)return a=o.sortBy,e.sort(a);throw new Error("options.sortBy is optional but if defined it must be either an array of string (predicates) or a sorting function")},r,Array.isArray(r)?[e]:c._state.getHierarchicalFacetByName(r.name).attributes)},Re.prototype.getFacetStats=function(e){return this._state.isConjunctiveFacet(e)?Fe(this.facets,e):this._state.isDisjunctiveFacet(e)?Fe(this.disjunctiveFacets,e):void 0},Re.prototype.getRefinements=function(){var o=this._state,c=this,s=[];return Object.keys(o.facetsRefinements).forEach(function(t){o.facetsRefinements[t].forEach(function(e){s.push(xe(0,"facet",t,e,c.facets))})}),Object.keys(o.facetsExcludes).forEach(function(t){o.facetsExcludes[t].forEach(function(e){s.push(xe(0,"exclude",t,e,c.facets))})}),Object.keys(o.disjunctiveFacetsRefinements).forEach(function(t){o.disjunctiveFacetsRefinements[t].forEach(function(e){s.push(xe(0,"disjunctive",t,e,c.disjunctiveFacets))})}),Object.keys(o.hierarchicalFacetsRefinements).forEach(function(a){o.hierarchicalFacetsRefinements[a].forEach(function(e){var t,r,n,i;s.push((t=o,r=a,e=e,n=c.hierarchicalFacets,i=t.getHierarchicalFacetByName(r),t=t._getHierarchicalFacetSeparator(i),i=e.split(t),e=p(n,function(e){return e.name===r}),t=i.reduce(function(e,t){var r=e&&p(e.data,function(e){return e.name===t});return void 0!==r?r:e},e),n=t&&t.count||0,i=t&&t.exhaustive||!1,e=t&&t.path||"",{type:"hierarchical",attributeName:r,name:e,count:n,exhaustive:i}))})}),Object.keys(o.numericRefinements).forEach(function(r){var e=o.numericRefinements[r];Object.keys(e).forEach(function(t){e[t].forEach(function(e){s.push({type:"numeric",attributeName:r,name:e,numericValue:e,operator:t})})})}),o.tagRefinements.forEach(function(e){s.push({type:"tag",attributeName:"_tags",name:e})}),s};var Ie=Re;var _e=function(n){var t,r,i,a={};return n.forEach(function(e){e.forEach(function(e,t){a[e.objectID]?a[e.objectID]={indexSum:a[e.objectID].indexSum+t,count:a[e.objectID].count+1}:a[e.objectID]={indexSum:t,count:1}})}),t=a,r=n.length,i=[],Object.keys(t).forEach(function(e){t[e].count<2&&(t[e].indexSum+=100),i.push({objectID:e,avgOfIndices:t[e].indexSum/r})}),i.sort(function(e,t){return e.avgOfIndices>t.avgOfIndices?1:-1}).reduce(function(e,t){var r=p(n.reduce(function(e,t){return e.concat(t)},[]),function(e){return e.objectID===t.objectID});return r?e.concat(r):e},[])},K="3.20.0",Te=X;function t(e,t,r,n){"function"==typeof e.addAlgoliaAgent&&e.addAlgoliaAgent("JS Helper (3.20.0)"),this.setClient(e);e=r||{};e.index=t,this.state=ge.make(e),this.recommendState=new ne({params:e.recommendState}),this.lastResults=null,this.lastRecommendResults=null,this._queryId=0,this._recommendQueryId=0,this._lastQueryIdReceived=-1,this._lastRecommendQueryIdReceived=-1,this.derivedHelpers=[],this._currentNbQueries=0,this._currentNbRecommendQueries=0,this._searchResultsOptions=n,this.recommendCache={}}function Ae(e){if(e<0)throw new Error("Page requested below 0.");return this._change({state:this.state.setPage(e),isPageReset:!1}),this}function De(){return this.state.page}V(t,U),t.prototype.search=function(){return this._search({onlyWithDerivedHelpers:!1}),this},t.prototype.searchOnlyWithDerivedHelpers=function(){return this._search({onlyWithDerivedHelpers:!0}),this},t.prototype.recommend=function(){return this._recommend(),this},t.prototype.getQuery=function(){var e=this.state;return se._getHitsSearchParams(e)},t.prototype.searchOnce=function(e,t){var r=e?this.state.setQueryParameters(e):this.state,e=se._getQueries(r.index,r),n=this;if(this._currentNbQueries++,this.emit("searchOnce",{state:r}),!t)return this.client.search(e).then(function(e){return n._currentNbQueries--,0===n._currentNbQueries&&n.emit("searchQueueEmpty"),{content:new Ie(r,e.results),state:r,_originalResponse:e}},function(e){throw n._currentNbQueries--,0===n._currentNbQueries&&n.emit("searchQueueEmpty"),e});this.client.search(e).then(function(e){n._currentNbQueries--,0===n._currentNbQueries&&n.emit("searchQueueEmpty"),t(null,new Ie(r,e.results),r)}).catch(function(e){n._currentNbQueries--,0===n._currentNbQueries&&n.emit("searchQueueEmpty"),t(e,null,r)})},t.prototype.findAnswers=function(e){console.warn("[algoliasearch-helper] answers is no longer supported");var t=this.state,r=this.derivedHelpers[0];if(!r)return Promise.resolve([]);var r=r.getModifiedState(t),t=Y({attributesForPrediction:e.attributesForPrediction,nbHits:e.nbHits},{params:te(se._getHitsSearchParams(r),["attributesToSnippet","hitsPerPage","restrictSearchableAttributes","snippetEllipsisText"])}),n="search for answers was called, but this client does not have a function client.initIndex(index).findAnswers";if("function"!=typeof this.client.initIndex)throw new Error(n);var i=this.client.initIndex(r.index);if("function"!=typeof i.findAnswers)throw new Error(n);return i.findAnswers(r.query,e.queryLanguages,t)},t.prototype.searchForFacetValues=function(t,e,r,n){var i,a,o,c="function"==typeof this.client.searchForFacetValues,s="function"==typeof this.client.initIndex;if(c||s||"function"==typeof this.client.search)return i=this.state.setQueryParameters(n||{}),a=i.isDisjunctiveFacet(t),n=se.getSearchForFacetQuery(t,e,r,i),this._currentNbQueries++,o=this,r=c?this.client.searchForFacetValues([{indexName:i.index,params:n}]):s?this.client.initIndex(i.index).searchForFacetValues(n):(delete n.facetName,this.client.search([{type:"facet",facet:t,indexName:i.index,params:n}]).then(function(e){return e.results[0]})),this.emit("searchForFacetValues",{state:i,facet:t,query:e}),r.then(function(e){return o._currentNbQueries--,0===o._currentNbQueries&&o.emit("searchQueueEmpty"),(e=Array.isArray(e)?e[0]:e).facetHits.forEach(function(e){e.escapedValue=Te(e.value),e.isRefined=a?i.isDisjunctiveFacetRefined(t,e.escapedValue):i.isFacetRefined(t,e.escapedValue)}),e},function(e){throw o._currentNbQueries--,0===o._currentNbQueries&&o.emit("searchQueueEmpty"),e});throw new Error("search for facet values (searchable) was called, but this client does not have a function client.searchForFacetValues or client.initIndex(index).searchForFacetValues")},t.prototype.setQuery=function(e){return this._change({state:this.state.resetPage().setQuery(e),isPageReset:!0}),this},t.prototype.clearRefinements=function(e){return this._change({state:this.state.resetPage().clearRefinements(e),isPageReset:!0}),this},t.prototype.clearTags=function(){return this._change({state:this.state.resetPage().clearTags(),isPageReset:!0}),this},t.prototype.addDisjunctiveFacetRefinement=function(e,t){return this._change({state:this.state.resetPage().addDisjunctiveFacetRefinement(e,t),isPageReset:!0}),this},t.prototype.addDisjunctiveRefine=function(){return this.addDisjunctiveFacetRefinement.apply(this,arguments)},t.prototype.addHierarchicalFacetRefinement=function(e,t){return this._change({state:this.state.resetPage().addHierarchicalFacetRefinement(e,t),isPageReset:!0}),this},t.prototype.addNumericRefinement=function(e,t,r){return this._change({state:this.state.resetPage().addNumericRefinement(e,t,r),isPageReset:!0}),this},t.prototype.addFacetRefinement=function(e,t){return this._change({state:this.state.resetPage().addFacetRefinement(e,t),isPageReset:!0}),this},t.prototype.addRefine=function(){return this.addFacetRefinement.apply(this,arguments)},t.prototype.addFacetExclusion=function(e,t){return this._change({state:this.state.resetPage().addExcludeRefinement(e,t),isPageReset:!0}),this},t.prototype.addExclude=function(){return this.addFacetExclusion.apply(this,arguments)},t.prototype.addTag=function(e){return this._change({state:this.state.resetPage().addTagRefinement(e),isPageReset:!0}),this},t.prototype.addFrequentlyBoughtTogether=function(e){return this._recommendChange({state:this.recommendState.addFrequentlyBoughtTogether(e)}),this},t.prototype.addRelatedProducts=function(e){return this._recommendChange({state:this.recommendState.addRelatedProducts(e)}),this},t.prototype.addTrendingItems=function(e){return this._recommendChange({state:this.recommendState.addTrendingItems(e)}),this},t.prototype.addTrendingFacets=function(e){return this._recommendChange({state:this.recommendState.addTrendingFacets(e)}),this},t.prototype.addLookingSimilar=function(e){return this._recommendChange({state:this.recommendState.addLookingSimilar(e)}),this},t.prototype.removeNumericRefinement=function(e,t,r){return this._change({state:this.state.resetPage().removeNumericRefinement(e,t,r),isPageReset:!0}),this},t.prototype.removeDisjunctiveFacetRefinement=function(e,t){return this._change({state:this.state.resetPage().removeDisjunctiveFacetRefinement(e,t),isPageReset:!0}),this},t.prototype.removeDisjunctiveRefine=function(){return this.removeDisjunctiveFacetRefinement.apply(this,arguments)},t.prototype.removeHierarchicalFacetRefinement=function(e){return this._change({state:this.state.resetPage().removeHierarchicalFacetRefinement(e),isPageReset:!0}),this},t.prototype.removeFacetRefinement=function(e,t){return this._change({state:this.state.resetPage().removeFacetRefinement(e,t),isPageReset:!0}),this},t.prototype.removeRefine=function(){return this.removeFacetRefinement.apply(this,arguments)},t.prototype.removeFacetExclusion=function(e,t){return this._change({state:this.state.resetPage().removeExcludeRefinement(e,t),isPageReset:!0}),this},t.prototype.removeExclude=function(){return this.removeFacetExclusion.apply(this,arguments)},t.prototype.removeTag=function(e){return this._change({state:this.state.resetPage().removeTagRefinement(e),isPageReset:!0}),this},t.prototype.removeFrequentlyBoughtTogether=function(e){return this._recommendChange({state:this.recommendState.removeParams(e)}),this},t.prototype.removeRelatedProducts=function(e){return this._recommendChange({state:this.recommendState.removeParams(e)}),this},t.prototype.removeTrendingItems=function(e){return this._recommendChange({state:this.recommendState.removeParams(e)}),this},t.prototype.removeTrendingFacets=function(e){return this._recommendChange({state:this.recommendState.removeParams(e)}),this},t.prototype.removeLookingSimilar=function(e){return this._recommendChange({state:this.recommendState.removeParams(e)}),this},t.prototype.toggleFacetExclusion=function(e,t){return this._change({state:this.state.resetPage().toggleExcludeFacetRefinement(e,t),isPageReset:!0}),this},t.prototype.toggleExclude=function(){return this.toggleFacetExclusion.apply(this,arguments)},t.prototype.toggleRefinement=function(e,t){return this.toggleFacetRefinement(e,t)},t.prototype.toggleFacetRefinement=function(e,t){return this._change({state:this.state.resetPage().toggleFacetRefinement(e,t),isPageReset:!0}),this},t.prototype.toggleRefine=function(){return this.toggleFacetRefinement.apply(this,arguments)},t.prototype.toggleTag=function(e){return this._change({state:this.state.resetPage().toggleTagRefinement(e),isPageReset:!0}),this},t.prototype.nextPage=function(){var e=this.state.page||0;return this.setPage(e+1)},t.prototype.previousPage=function(){var e=this.state.page||0;return this.setPage(e-1)},t.prototype.setCurrentPage=Ae,t.prototype.setPage=Ae,t.prototype.setIndex=function(e){return this._change({state:this.state.resetPage().setIndex(e),isPageReset:!0}),this},t.prototype.setQueryParameter=function(e,t){return this._change({state:this.state.resetPage().setQueryParameter(e,t),isPageReset:!0}),this},t.prototype.setState=function(e){return this._change({state:ge.make(e),isPageReset:!1}),this},t.prototype.overrideStateWithoutTriggeringChangeEvent=function(e){return this.state=new ge(e),this},t.prototype.hasRefinements=function(e){return!!ee(this.state.getNumericRefinements(e))||(this.state.isConjunctiveFacet(e)?this.state.isFacetRefined(e):this.state.isDisjunctiveFacet(e)?this.state.isDisjunctiveFacetRefined(e):!!this.state.isHierarchicalFacet(e)&&this.state.isHierarchicalFacetRefined(e))},t.prototype.isExcluded=function(e,t){return this.state.isExcludeRefined(e,t)},t.prototype.isDisjunctiveRefined=function(e,t){return this.state.isDisjunctiveFacetRefined(e,t)},t.prototype.hasTag=function(e){return this.state.isTagRefined(e)},t.prototype.isTagRefined=function(){return this.hasTagRefinements.apply(this,arguments)},t.prototype.getIndex=function(){return this.state.index},t.prototype.getCurrentPage=De,t.prototype.getPage=De,t.prototype.getTags=function(){return this.state.tagRefinements},t.prototype.getRefinements=function(e){var r=[],n=(this.state.isConjunctiveFacet(e)?(this.state.getConjunctiveRefinements(e).forEach(function(e){r.push({value:e,type:"conjunctive"})}),this.state.getExcludeRefinements(e).forEach(function(e){r.push({value:e,type:"exclude"})})):this.state.isDisjunctiveFacet(e)&&this.state.getDisjunctiveRefinements(e).forEach(function(e){r.push({value:e,type:"disjunctive"})}),this.state.getNumericRefinements(e));return Object.keys(n).forEach(function(e){var t=n[e];r.push({value:t,operator:e,type:"numeric"})}),r},t.prototype.getNumericRefinement=function(e,t){return this.state.getNumericRefinement(e,t)},t.prototype.getHierarchicalFacetBreadcrumb=function(e){return this.state.getHierarchicalFacetBreadcrumb(e)},t.prototype._search=function(e){var n=this.state,i=[],t=[],e=(e.onlyWithDerivedHelpers||(t=se._getQueries(n.index,n),i.push({state:n,queriesCount:t.length,helper:this}),this.emit("search",{state:n,results:this.lastResults})),this.derivedHelpers.map(function(e){var t=e.getModifiedState(n),r=t.index?se._getQueries(t.index,t):[];return i.push({state:t,queriesCount:r.length,helper:e}),e.emit("search",{state:t,results:e.lastResults}),r})),t=Array.prototype.concat.apply(t,e),e=this._queryId++;if(this._currentNbQueries++,!t.length)return Promise.resolve({results:[]}).then(this._dispatchAlgoliaResponse.bind(this,i,e));try{this.client.search(t).then(this._dispatchAlgoliaResponse.bind(this,i,e)).catch(this._dispatchAlgoliaError.bind(this,e))}catch(e){this.emit("error",{error:e})}},t.prototype._recommend=function(){var n=this.state,e=this.recommendState,t=this.getIndex(),i=[{state:e,index:t,helper:this}],a=e.params.map(function(e){return e.$$id}),o=(this.emit("fetch",{recommend:{state:e,results:this.lastRecommendResults}}),this.recommendCache),e=this.derivedHelpers.map(function(e){var t,r=e.getModifiedState(n).index;return r?(t=e.getModifiedRecommendState(new ne),i.push({state:t,index:r,helper:e}),a=Array.prototype.concat.apply(a,t.params.map(function(e){return e.$$id})),e.emit("fetch",{recommend:{state:t,results:e.lastRecommendResults}}),t._buildQueries(r,o)):[]}),t=Array.prototype.concat.apply(this.recommendState._buildQueries(t,o),e);if(0!==t.length)if(0<t.length&&void 0===this.client.getRecommendations)console.warn("Please update algoliasearch/lite to the latest version in order to use recommend widgets.");else{e=this._recommendQueryId++;this._currentNbRecommendQueries++;try{this.client.getRecommendations(t).then(this._dispatchRecommendResponse.bind(this,e,i,a)).catch(this._dispatchRecommendError.bind(this,e))}catch(e){this.emit("error",{error:e})}}},t.prototype._dispatchAlgoliaResponse=function(e,t,r){var n,i=this;t<this._lastQueryIdReceived||(this._currentNbQueries-=t-this._lastQueryIdReceived,this._lastQueryIdReceived=t,0===this._currentNbQueries&&this.emit("searchQueueEmpty"),n=r.results.slice(),e.forEach(function(e){var t=e.state,r=e.queriesCount,e=e.helper,r=n.splice(0,r);t.index?(e.lastResults=new Ie(t,r,i._searchResultsOptions),e.emit("result",{results:e.lastResults,state:t})):e.emit("result",{results:null,state:t})}))},t.prototype._dispatchRecommendResponse=function(e,t,r,n){var i,a,o;e<this._lastRecommendQueryIdReceived||(this._currentNbRecommendQueries-=e-this._lastRecommendQueryIdReceived,this._lastRecommendQueryIdReceived=e,0===this._currentNbRecommendQueries&&this.emit("recommendQueueEmpty"),i=this.recommendCache,a={},r.filter(function(e){return void 0===i[e]}).forEach(function(e,t){a[e]||(a[e]=[]),a[e].push(t)}),Object.keys(a).forEach(function(e){var t=a[e],r=n.results[t[0]];1===t.length?i[e]=r:i[e]=Object.assign({},r,{hits:_e(t.map(function(e){return n.results[e].hits}))})}),o={},r.forEach(function(e){o[e]=i[e]}),t.forEach(function(e){var t=e.state,r=e.helper;e.index?(r.lastRecommendResults=new ae(t,o),r.emit("recommend:result",{recommend:{results:r.lastRecommendResults,state:t}})):r.emit("recommend:result",{results:null,state:t})}))},t.prototype._dispatchAlgoliaError=function(e,t){e<this._lastQueryIdReceived||(this._currentNbQueries-=e-this._lastQueryIdReceived,this._lastQueryIdReceived=e,this.emit("error",{error:t}),0===this._currentNbQueries&&this.emit("searchQueueEmpty"))},t.prototype._dispatchRecommendError=function(e,t){e<this._lastRecommendQueryIdReceived||(this._currentNbRecommendQueries-=e-this._lastRecommendQueryIdReceived,this._lastRecommendQueryIdReceived=e,this.emit("error",{error:t}),0===this._currentNbRecommendQueries&&this.emit("recommendQueueEmpty"))},t.prototype.containsRefinement=function(e,t,r,n){return e||0!==t.length||0!==r.length||0!==n.length},t.prototype._hasDisjunctiveRefinements=function(e){return this.state.disjunctiveRefinements[e]&&0<this.state.disjunctiveRefinements[e].length},t.prototype._change=function(e){var t=e.state,e=e.isPageReset;t!==this.state&&(this.state=t,this.emit("change",{state:this.state,results:this.lastResults,isPageReset:e}))},t.prototype._recommendChange=function(e){e=e.state;e!==this.recommendState&&(this.recommendState=e,this.emit("recommend:change",{search:{results:this.lastResults,state:this.state},recommend:{results:this.lastRecommendResults,state:this.recommendState}}))},t.prototype.clearCache=function(){return this.client.clearCache&&this.client.clearCache(),this},t.prototype.setClient=function(e){return this.client!==e&&("function"==typeof e.addAlgoliaAgent&&e.addAlgoliaAgent("JS Helper (3.20.0)"),this.client=e),this},t.prototype.getClient=function(){return this.client},t.prototype.derive=function(e,t){e=new z(this,e,t);return this.derivedHelpers.push(e),e},t.prototype.detachDerivedHelper=function(e){e=this.derivedHelpers.indexOf(e);if(-1===e)throw new Error("Derived helper already detached");this.derivedHelpers.splice(e,1)},t.prototype.hasPendingRequests=function(){return 0<this._currentNbQueries};var ke=t;function Ne(e,t,r,n){return new ke(e,t,r,n)}Ne.version=K,Ne.AlgoliaSearchHelper=ke,Ne.SearchParameters=ge,Ne.RecommendParameters=ne,Ne.SearchResults=Ie;var y=Ne,X=("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{}).performance||{};X.now||X.mozNow||X.msNow||X.oNow||X.webkitNow;function S(){}function m(e,t){if(void 0===e||"function"!=typeof e)throw new Error("The render function is not valid (received type ".concat(Object.prototype.toString.call(e).slice(8,-1),").\n\n").concat(t))}function We(e){var t=e.helper,e=e.attributesToClear,e=void 0===e?[]:e,r=t.state.setPage(0),r=e.reduce(function(e,t){return r.isNumericRefined(t)?e.removeNumericRefinement(t):r.isHierarchicalFacet(t)?e.removeHierarchicalFacetRefinement(t):r.isDisjunctiveFacet(t)?e.removeDisjunctiveFacetRefinement(t):r.isConjunctiveFacet(t)?e.removeFacetRefinement(t):e},r);return r=-1!==e.indexOf("query")?r.setQuery(""):r}var Ce={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},He=/[&<>"']/g,Me=RegExp(He.source);var $e={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Le=/&(amp|quot|lt|gt|#39);/g,Ue=RegExp(Le.source);function Qe(e){return(Qe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Be(e){if("object"===Qe(t=e)&&null!==t&&"[object Object]"===(null===(t=e)?void 0===t?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t))){var t;if(null===Object.getPrototypeOf(e))return 1;for(var r=e;null!==Object.getPrototypeOf(r);)r=Object.getPrototypeOf(r);return Object.getPrototypeOf(e)===r}}function qe(e){return(qe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ve(){return(Ve=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r,n=arguments[t];for(r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Je(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function ze(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Je(Object(r),!0).forEach(function(e){Xe(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Je(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function Xe(e,t,r){return(t=function(e){e=function(e,t){if("object"!==qe(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!==qe(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"===qe(e)?e:String(e)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var _={highlightPreTag:"__ais-highlight__",highlightPostTag:"__/ais-highlight__"},u={highlightPreTag:"<mark>",highlightPostTag:"</mark>"};function Ke(e){return((e=e)&&Me.test(e)?e.replace(He,function(e){return Ce[e]}):e).replace(new RegExp(_.highlightPreTag,"g"),u.highlightPreTag).replace(new RegExp(_.highlightPostTag,"g"),u.highlightPostTag)}function Ge(r){return Be(r)&&"string"!=typeof r.value?Object.keys(r).reduce(function(e,t){return ze(ze({},e),{},Xe({},t,Ge(r[t])))},{}):Array.isArray(r)?r.map(Ge):ze(ze({},r),{},{value:Ke(r.value)})}function Ze(e){return void 0===e.__escaped&&((e=e.map(function(e){e=Ve({},(function(e){if(null==e)throw new TypeError("Cannot destructure "+e)}(e),e));return e._highlightResult&&(e._highlightResult=Ge(e._highlightResult)),e._snippetResult&&(e._snippetResult=Ge(e._snippetResult)),e})).__escaped=!0),e}function Ye(e){var t=u.highlightPreTag,r=u.highlightPostTag;return e.map(function(e){return e.isHighlighted?t+e.value+r:e.value}).join("")}function et(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function tt(n){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?et(Object(i),!0).forEach(function(e){var t,r;t=n,r=i[e=e],(e=function(e){e=function(e,t){if("object"!==rt(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!==rt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"===rt(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):et(Object(i)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(i,e))})}return n}function rt(e){return(rt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function nt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,a,o,c=[],s=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);s=!0);}catch(e){u=!0,i=e}finally{try{if(!s&&null!=r.return&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw i}}return c}}(e,t)||function(e,t){var r;if(e)return"string"==typeof e?it(e,t):"Map"===(r="Object"===(r=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?it(e,t):void 0}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function it(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function at(e){var h=e.instantSearchInstance,d=e.helper,m=e.attribute,p=e.widgetType;return function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n,i,a,o=t[1],c=t[2],c=void 0===c?"Filter Applied":c,s=t[3],s=void 0===s?{}:s,u=nt(t[0].split(":"),2),l=u[0],u=u[1],f="string"==typeof m?m:m(o);1===t.length&&"object"===rt(t[0])?h.sendEventToInsights(t[0]):"click"===l&&2<=t.length&&t.length<=4&&(i=f,a=o,((n=d).state.isHierarchicalFacet(i)?n.state.isHierarchicalFacetRefined(i,a):n.state.isConjunctiveFacet(i)?n.state.isFacetRefined(i,a):n.state.isDisjunctiveFacetRefined(i,a))||h.sendEventToInsights({insightsMethod:"clickedFilters",widgetType:p,eventType:l,eventModifier:u,payload:tt({eventName:c,index:d.getIndex(),filters:["".concat(f,":").concat(o)]},s),attribute:f}))}}function ot(e){return btoa(encodeURIComponent(JSON.stringify(e)))}function ct(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function st(n){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?ct(Object(i),!0).forEach(function(e){var t,r;t=n,r=i[e=e],(e=function(e){e=function(e,t){if("object"!==ft(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!==ft(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"===ft(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):ct(Object(i)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(i,e))})}return n}function ut(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,a,o,c=[],s=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);s=!0);}catch(e){u=!0,i=e}finally{try{if(!s&&null!=r.return&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw i}}return c}}(e,t)||function(e,t){var r;if(e)return"string"==typeof e?lt(e,t):"Map"===(r="Object"===(r=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?lt(e,t):void 0}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function lt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function ft(e){return(ft="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ht(e){var r,n,i,a,o,t,c,s,u=e.getIndex,l=e.widgetType,f=(e.methodName,e.args),e=e.instantSearchInstance;return 1===f.length&&"object"===ft(f[0])?[f[0]]:(t=ut(f[0].split(":"),2),r=t[0],n=t[1],t=f[1],i=f[2],a=f[3]||{},!t||!("click"!==r&&"conversion"!==r||i)||0===(f=Array.isArray(t)?t:[t]).length?[]:(o=f[0].__queryID,t=function(e,t){for(var r=1<arguments.length&&void 0!==t?t:20,n=[],i=0;i<Math.ceil(e.length/r);i++)n.push(e.slice(i*r,(i+1)*r));return n}(f),c=t.map(function(e){return e.map(function(e){return e.objectID})}),s=t.map(function(e){return e.map(function(e){return e.__position})}),"view"===r?"idle"!==e.status?[]:t.map(function(e,t){return{insightsMethod:"viewedObjectIDs",widgetType:l,eventType:r,payload:st({eventName:i||"Hits Viewed",index:u(),objectIDs:c[t]},a),hits:e,eventModifier:n}}):"click"===r?t.map(function(e,t){return{insightsMethod:"clickedObjectIDsAfterSearch",widgetType:l,eventType:r,payload:st({eventName:i||"Hit Clicked",index:u(),queryID:o,objectIDs:c[t],positions:s[t]},a),hits:e,eventModifier:n}}):"conversion"===r?t.map(function(e,t){return{insightsMethod:"convertedObjectIDsAfterSearch",widgetType:l,eventType:r,payload:st({eventName:i||"Hit Converted",index:u(),queryID:o,objectIDs:c[t]},a),hits:e,eventModifier:n}}):[]))}function dt(e){var n=e.instantSearchInstance,i=e.getIndex,a=e.widgetType,o={},c=void 0;return function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];ht({widgetType:a,getIndex:i,methodName:"sendEvent",args:t,instantSearchInstance:n}).forEach(function(e){"click"===e.eventType&&"internal"===e.eventModifier&&o[e.eventType]||(o[e.eventType]=!0,n.sendEventToInsights(e))}),clearTimeout(c),c=setTimeout(function(){o={}},0)}}function mt(e){var i=e.getIndex,a=e.widgetType,o=e.instantSearchInstance;return function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=ht({widgetType:a,getIndex:i,methodName:"bindEvent",args:t,instantSearchInstance:o});return n.length?"data-insights-event=".concat(ot(n)):""}}function O(e){return"ais.index"===e.$$type}function pt(t,e){var r=t[e.getIndexId()]||{};e.getHelper().setState(e.getWidgetSearchParameters(e.getHelper().state,{uiState:r})),e.getWidgets().filter(O).forEach(function(e){return pt(t,e)})}var gt=Promise.resolve();function yt(n){function e(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];null===i&&(i=gt.then(function(){i=null,a?a=!1:n.apply(void 0,t)}))}var i=null,a=!1;return e.wait=function(){if(null===i)throw new Error("The deferred function should be called before calling `wait()`");return i},e.cancel=function(){null!==i&&(a=!0)},e}function i(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=t.map(function(e){return t=(e=e).name,e=e.connector,["https://www.algolia.com/doc/api-reference/widgets/",t,"/js/",void 0!==e&&e?"#connector":""].join("");var t}).join(", ");return function(e){return[e,"See documentation: ".concat(n)].filter(Boolean).join("\n\n")}}function vt(e){return"number"==typeof e&&e<0||"string"==typeof e?String(e).replace(/^-/,"\\-"):e}function bt(e,t){for(var r,n=0;n<e.length;n++)if(t(r=e[n],n,e))return r}function St(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,a,o,c=[],s=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);s=!0);}catch(e){u=!0,i=e}finally{try{if(!s&&null!=r.return&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw i}}return c}}(e,t)||function(e,t){var r;if(e)return"string"==typeof e?Ot(e,t):"Map"===(r="Object"===(r=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ot(e,t):void 0}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ot(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var jt=/^(-?\d+(?:\.\d+)?),\s*(-?\d+(?:\.\d+)?)$/;function wt(e){if(Array.isArray(e)){var t=e,r=St(t,1)[0],n=(r=St(void 0===r?[void 0,void 0,void 0,void 0]:r,4))[0],i=r[1],a=r[2],r=r[3];if(n&&i&&a&&r)return{northEast:{lat:n,lng:i},southWest:{lat:a,lng:r}};throw new Error('Invalid value for "insideBoundingBox" parameter: ['.concat(t,"]"))}n=e,a=(i=St(n.split(",").map(parseFloat),4))[0],r=i[1],t=i[2],i=i[3];if(a&&r&&t&&i)return{northEast:{lat:a,lng:r},southWest:{lat:t,lng:i}};throw new Error('Invalid value for "insideBoundingBox" parameter: "'.concat(n,'"'))}function Pt(e){var t=u.highlightPostTag,r=u.highlightPreTag,e=e.split(r),r=e.shift(),n=r?[{value:r,isHighlighted:!1}]:[];return e.forEach(function(e){e=e.split(t);n.push({value:e[0],isHighlighted:!0}),""!==e[1]&&n.push({value:e[1],isHighlighted:!1})}),n}var Rt=new RegExp(/\w/i);function Et(e,t){var r=e[t],n=(null==(n=e[t+1])?void 0:n.isHighlighted)||!0,t=(null==(e=e[t-1])?void 0:e.isHighlighted)||!0;return Rt.test((e=r.value)&&Ue.test(e)?e.replace(Le,function(e){return $e[e]}):e)||t!==n?r.isHighlighted:t}function Ft(e,t){return(Array.isArray(t)?t:t.split(".")).reduce(function(e,t){return e&&e[t]},e)}function xt(e,t,r,n,i){var a,i=4<arguments.length&&void 0!==i?i:[],o={type:t,attribute:r,name:n,escapedValue:vt(n)},c=bt(i,function(e){return e.name===r});if("hierarchical"===t){for(var i=e.getHierarchicalFacetByName(r),s=n.split(i.separator),u=0;void 0!==c&&u<s.length;++u)!function(t){var r;c=c&&c.data&&bt(Object.keys(c.data).map((r=c.data,function(e){return r[e]})),function(e){return e.name===s[t]})}(u);a=c&&c.count}else a=c&&c.data&&c.data[o.name];return void 0!==a&&(o.count=a),c&&void 0!==c.exhaustive&&(o.exhaustive=c.exhaustive),o}function It(r,n,e){var e=2<arguments.length&&void 0!==e&&e,i=[],t=n.facetsRefinements,a=void 0===t?{}:t,t=n.facetsExcludes,o=void 0===t?{}:t,t=n.disjunctiveFacetsRefinements,c=void 0===t?{}:t,t=n.hierarchicalFacetsRefinements,s=void 0===t?{}:t,t=n.numericRefinements,u=void 0===t?{}:t,t=n.tagRefinements,t=void 0===t?[]:t;return Object.keys(a).forEach(function(t){a[t].forEach(function(e){i.push(xt(n,"facet",t,e,r.facets))})}),Object.keys(o).forEach(function(t){o[t].forEach(function(e){i.push({type:"exclude",attribute:t,name:e,exclude:!0})})}),Object.keys(c).forEach(function(t){c[t].forEach(function(e){i.push(xt(n,"disjunctive",t,"string"==typeof(e=e)?e.replace(/^\\-/,"-"):e,r.disjunctiveFacets))})}),Object.keys(s).forEach(function(t){s[t].forEach(function(e){i.push(xt(n,"hierarchical",t,e,r.hierarchicalFacets))})}),Object.keys(u).forEach(function(r){var n=u[r];Object.keys(n).forEach(function(e){var t=e,e=n[t];(Array.isArray(e)?e:[e]).forEach(function(e){i.push({type:"numeric",attribute:r,name:"".concat(e),numericValue:e,operator:t})})})}),t.forEach(function(e){i.push({type:"tag",attribute:"_tags",name:e})}),e&&n.query&&n.query.trim()&&i.push({attribute:"query",type:"query",name:n.query,query:n.query}),i}function _t(e){return(_t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Tt(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function At(n){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?Tt(Object(i),!0).forEach(function(e){var t,r;t=n,r=i[e=e],(e=function(e){e=function(e,t){if("object"!==_t(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!==_t(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"===_t(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):Tt(Object(i)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(i,e))})}return n}function Dt(e,r,n){return e.map(function(e,t){return At(At({},e),{},{__position:n*r+t+1})})}function kt(e){return(kt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Nt(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function Wt(n){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?Nt(Object(i),!0).forEach(function(e){var t,r;t=n,r=i[e=e],(e=function(e){e=function(e,t){if("object"!==kt(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!==kt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"===kt(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):Nt(Object(i)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(i,e))})}return n}function Ct(e,t){return t?e.map(function(e){return Wt(Wt({},e),{},{__queryID:t})}):e}function Ht(e){return(Ht="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Mt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,a,o,c=[],s=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);s=!0);}catch(e){u=!0,i=e}finally{try{if(!s&&null!=r.return&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw i}}return c}}(e,t)||function(e,t){var r;if(e)return"string"==typeof e?$t(e,t):"Map"===(r="Object"===(r=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?$t(e,t):void 0}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $t(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Lt(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function Ut(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Lt(Object(r),!0).forEach(function(e){Qt(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Lt(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function Qt(e,t,r){return(t=function(e){e=function(e,t){if("object"!==Ht(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!==Ht(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"===Ht(e)?e:String(e)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Bt(a,n){var e,o,t;n&&("transporter"in a&&!a._cacheHydrated||a._useCache&&"function"==typeof a.addAlgoliaAgent)&&(e=Object.keys(n).map(function(e){var e=n[e],t=e.state,r=e.requestParams;return e.results.map(function(e){return Ut({indexName:t.index||e.index},r||e.params?{params:qt(r||e.params.split("&").reduce(function(e,t){var t=Mt(t.split("="),2),r=t[0],t=t[1];return e[r]=t?decodeURIComponent(t):"",e},{}))}:{})})}),t=Object.keys(n).reduce(function(e,t){return e.concat(n[t].results)},[]),"transporter"in a&&!a._cacheHydrated&&(a._cacheHydrated=!0,o=a.search,a.search=function(e){for(var t=arguments.length,r=new Array(1<t?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];var i=e.map(function(e){return Ut(Ut({},e),{},{params:qt(e.params)})});return a.transporter.responsesCache.get({method:"search",args:[i].concat(r)},function(){return o.apply(void 0,[e].concat(r))})},a.transporter.responsesCache.set({method:"search",args:e},{results:t})),"transporter"in a||(t="/1/indexes/*/queries_body_".concat(JSON.stringify({requests:e})),a.cache=Ut(Ut({},a.cache),{},Qt({},t,JSON.stringify({results:Object.keys(n).map(function(e){return n[e].results})})))))}function qt(r){return Object.keys(r).map(function(e){return function(e){for(var t=arguments.length,r=new Array(1<t?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];var i=0;return e.replace(/%s/g,function(){return encodeURIComponent(r[i++])})}("%s=%s",e,(t=r[e],"[object Object]"===Object.prototype.toString.call(t)||"[object Array]"===Object.prototype.toString.call(t)?JSON.stringify(r[e]):r[e]));var t}).join("&")}function Vt(e){return e!==Object(e)}function Jt(e,t){if(e===t)return 1;if(Vt(e)||Vt(t)||"function"==typeof e||"function"==typeof t)return e===t;if(Object.keys(e).length===Object.keys(t).length){for(var r=0,n=Object.keys(e);r<n.length;r++){var i=n[r];if(!(i in t))return;if(!Jt(e[i],t[i]))return}return 1}}function v(e){return"number"==typeof e&&isFinite(e)}function zt(e,t){t(e),e.getWidgets().forEach(function(e){O(e)&&zt(e,t)})}function Xt(e){return e.filter(function(e,t,r){return r.indexOf(e)===t})}function Kt(e){return(Kt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Gt=["facets","disjunctiveFacets","facetsRefinements","facetsExcludes","disjunctiveFacetsRefinements","numericRefinements","tagRefinements","hierarchicalFacets","hierarchicalFacetsRefinements","ruleContexts"];function Zt(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function a(n){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?Zt(Object(i),!0).forEach(function(e){var t,r;t=n,r=i[e=e],(e=function(e){e=function(e,t){if("object"!==Kt(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!==Kt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"===Kt(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):Zt(Object(i)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(i,e))})}return n}function Yt(e,t){if(null==e)return{};var r,n=function(e,t){if(null==e)return{};var r,n,i={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],0<=t.indexOf(r)||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols)for(var i=Object.getOwnPropertySymbols(e),a=0;a<i.length;a++)r=i[a],0<=t.indexOf(r)||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r]);return n}function er(e,t){return e.setQueryParameters({hierarchicalFacets:t.hierarchicalFacets.reduce(function(e,t){var r=function(e,t){if(Array.isArray(e))for(var r=0;r<e.length;r++)if(t(e[r]))return r;return-1}(e,function(e){return e.name===t.name});return-1===r?e.concat(t):((e=e.slice()).splice(r,1,t),e)},e.hierarchicalFacets)})}var tr=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.reduce(function(e,t){r=t;var e=e.setQueryParameters({hierarchicalFacetsRefinements:a(a({},e.hierarchicalFacetsRefinements),r.hierarchicalFacetsRefinements)}),r=er(e,t),e=t.tagRefinements.reduce(function(e,t){return e.addTagRefinement(t)},r),e=(r=t,e.setQueryParameters({numericRefinements:a(a({},e.numericRefinements),r.numericRefinements)})),e=(r=t,e.setQueryParameters({disjunctiveFacetsRefinements:a(a({},e.disjunctiveFacetsRefinements),r.disjunctiveFacetsRefinements)})),e=(r=t,e.setQueryParameters({facetsExcludes:a(a({},e.facetsExcludes),r.facetsExcludes)})),e=(r=t,e.setQueryParameters({facetsRefinements:a(a({},e.facetsRefinements),r.facetsRefinements)})),r=function(e,t){t=Xt([].concat(e.ruleContexts).concat(t.ruleContexts).filter(Boolean));return 0<t.length?e.setQueryParameters({ruleContexts:t}):e}(t.disjunctiveFacets.reduce(function(e,t){return e.addDisjunctiveFacet(t)},e),t),e=t.facets.reduce(function(e,t){return e.addFacet(t)},r),r=t;return r.facets,r.disjunctiveFacets,r.facetsRefinements,r.facetsExcludes,r.disjunctiveFacetsRefinements,r.numericRefinements,r.tagRefinements,r.hierarchicalFacets,r.hierarchicalFacetsRefinements,r.ruleContexts,r=Yt(r,Gt),e.setQueryParameters(r)})};function rr(e){return function(e){if(Array.isArray(e))return nr(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){var r;if(e)return"string"==typeof e?nr(e,t):"Map"===(r="Object"===(r=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?nr(e,t):void 0}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function nr(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function ir(e){var t=e.start,r=void 0===t?0:t,t=e.end,e=e.step,e=void 0===e?1:e,n=0===e?1:e,e=Math.round((t-r)/n);return rr(Array(e)).map(function(e,t){return r+t*n})}function ar(e,t,r){var n=t.getHelper();return{uiState:r,helper:n,parent:t,instantSearchInstance:e,state:n.state,renderState:e.renderState,templatesConfig:e.templatesConfig,createURL:t.createURL,scopedResults:[],searchMetadata:{isSearchStalled:"stalled"===e.status},status:e.status,error:e.error}}function or(e,t,r){var r=t.getResultsForWidget(r),n=t.getHelper();return{helper:n,parent:t,instantSearchInstance:e,results:r,scopedResults:t.getScopedResults(),state:r&&"_state"in r?r._state:n.state,renderState:e.renderState,templatesConfig:e.templatesConfig,createURL:t.createURL,searchMetadata:{isSearchStalled:"stalled"===e.status},status:e.status,error:e.error}}function cr(e){return(cr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function sr(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function ur(n){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?sr(Object(i),!0).forEach(function(e){var t,r;t=n,r=i[e=e],(e=function(e){e=function(e,t){if("object"!==cr(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!==cr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"===cr(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):sr(Object(i)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(i,e))})}return n}function lr(r){return r.some(function(e){return e.isHighlighted})?r.map(function(e,t){return ur(ur({},e),{},{isHighlighted:!Et(r,t)})}):r.map(function(e){return ur(ur({},e),{},{isHighlighted:!1})})}function fr(e,t){t=(1<arguments.length&&void 0!==t?t:{fallback:function(){}}).fallback;return"undefined"==typeof window?t():e({window:window})}function hr(e){return Array.isArray(e)?e:[e]}function dr(e){return(dr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function mr(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function c(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?mr(Object(r),!0).forEach(function(e){pr(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):mr(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function pr(e,t,r){return(t=function(e){e=function(e,t){if("object"!==dr(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!==dr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"===dr(e)?e:String(e)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var gr=i({name:"configure",connector:!0});function yr(e,t){return e.setQueryParameters(Object.keys(t.searchParameters).reduce(function(e,t){return c(c({},e),{},pr({},t,void 0))},{}))}var vr=function(){var r=0<arguments.length&&void 0!==arguments[0]?arguments[0]:S,i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:S;return function(n){var t;if(n&&Be(n.searchParameters))return t={},{$$type:"ais.configure",init:function(e){var t=e.instantSearchInstance;r(c(c({},this.getWidgetRenderState(e)),{},{instantSearchInstance:t}),!0)},render:function(e){var t=e.instantSearchInstance;r(c(c({},this.getWidgetRenderState(e)),{},{instantSearchInstance:t}),!1)},dispose:function(e){e=e.state;return i(),yr(e,n)},getRenderState:function(e,t){t=this.getWidgetRenderState(t);return c(c({},e),{},{configure:c(c({},t),{},{widgetParams:c(c({},t.widgetParams),{},{searchParameters:tr(new y.SearchParameters(null==(e=e.configure)?void 0:e.widgetParams.searchParameters),new y.SearchParameters(t.widgetParams.searchParameters)).getQueryParams()})})})},getWidgetRenderState:function(e){var r,e=e.helper;return t.refine||(t.refine=(r=e,function(e){var t=yr(r.state,n),t=tr(t,new y.SearchParameters(e));n.searchParameters=e,r.setState(t).search()})),{refine:t.refine,widgetParams:n}},getWidgetSearchParameters:function(e,t){t=t.uiState;return tr(e,new y.SearchParameters(c(c({},t.configure),n.searchParameters)))},getWidgetUiState:function(e){return c(c({},e),{},{configure:c(c({},e.configure),n.searchParameters)})}};throw new Error(gr("The `searchParameters` option expects an object."))}},br=Object.prototype.hasOwnProperty;function Sr(e,t,r){if(null!=r&&r(e,t))return!0;var n,i;if(e===t)return!0;if(e&&t&&(n=e.constructor)===t.constructor){if(n===Date)return e.getTime()===t.getTime();if(n===RegExp)return e.toString()===t.toString();if(n===Array){if((i=e.length)===t.length)for(;i--&&Sr(e[i],t[i],r););return-1===i}if(!n||"object"===H(e)){for(n in i=0,e){if(br.call(e,n)&&++i&&!br.call(t,n))return!1;if(!(n in t&&Sr(e[n],t[n],r)))return!1}return Object.keys(t).length===i}}return e!=e&&t!=t}function Or(e){var t;return new y.SearchResults(e,[{query:null!=(t=e.query)?t:"",page:null!=(t=e.page)?t:0,hitsPerPage:null!=(t=e.hitsPerPage)?t:20,hits:[],nbHits:0,nbPages:0,params:"",exhaustiveNbHits:!0,exhaustiveFacetsCount:!0,processingTimeMS:0,index:e.index}],{__isArtificial:!0})}function jr(r){var e=r.getHelper(),n=r.getResults()||Or(e.state),e=r.getScopedResults().map(function(e){var t=e.indexId===r.getIndexId()?n:Or(e.helper.state);return d(d({},e),{},{results:e.results||t})});return{results:n,scopedResults:e}}function wr(e){if(!e)throw new Error("Invariant failed")}var Pr=b.createContext(null);function Rr(){var e=b.useContext(Pr);return wr(null!==e),e}var Er=b.createContext(null);function Fr(){var e=b.useContext(Er);return wr(null!==e),e}var xr=b.createContext(null);function Ir(){return b.useContext(xr)}function _r(e){var t=$(b.useState(function(){return e}),2),r=t[0],t=t[1];return Sr(r,e)||t(e),r}var Tr=b.use,Ar="undefined"!=typeof window?b.useLayoutEffect:b.useEffect,Dr=b.createContext(null);function kr(){return b.useContext(Dr)}function Nr(e){var t=e.widget,r=e.parentIndex,n=e.props,i=e.shouldSsr,e=kr(),a=b.useRef(n),o=(b.useEffect(function(){a.current=n},[n]),b.useRef(t)),c=(b.useEffect(function(){o.current=t},[t]),b.useRef(null)),s=i&&!r.getWidgets().includes(t),u=Fr();Ar(function(){var e=o.current;return c.current?(clearTimeout(c.current),Sr(n,a.current)||(r.removeWidgets([e]),r.addWidgets([t]))):i||r.addWidgets([t]),function(){c.current=setTimeout(function(){u._schedule(function(){u._preventWidgetCleanup||r.removeWidgets([e])})})}},[r,t,i,u,n]),!s&&"pending"!==(null==e||null==(s=e.current)?void 0:s.status)||r.addWidgets([t]),"undefined"==typeof window&&null!=e&&e.current&&"ais.index"!==t.$$type&&(Tr(e.current),"ais.dynamicWidgets"!==t.$$type)&&null!=(s=u.helper)&&s.lastResults&&Tr(e.current)}var Wr=["instantSearchInstance","widgetParams"],Cr=["widgetParams"];function f(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},n=Ir(),i=Fr(),a=Rr(),o=_r(t),c=_r(r),s=b.useRef(!0),u=b.useRef(null),l=b.useRef(i.status),f=b.useMemo(function(){return d(d({},e(function(e,t){t?s.current=!0:s.current&&(t=e.instantSearchInstance,e.widgetParams,Sr(e=M(e,Wr),u.current,function(e,t){return(null==e?void 0:e.constructor)===Function&&(null==t?void 0:t.constructor)===Function})&&t.status===l.current||(h(e),u.current=e,l.current=t.status))},function(){s.current=!1})(o)),c)},[e,o,c]),t=$(b.useState(function(){var e,t,r;return f.getWidgetRenderState?(e=a.getHelper(),r=a.getWidgetUiState({})[a.getIndexId()],e.state=(null==(t=f.getWidgetSearchParameters)?void 0:t.call(f,e.state,{uiState:r}))||e.state,r=(t=jr(a)).results,t=t.scopedResults,(r=f.getWidgetRenderState({helper:e,parent:a,instantSearchInstance:i,results:"recommend"===f.dependsOn?null:r,scopedResults:t,state:e.state,renderState:i.renderState,templatesConfig:i.templatesConfig,createURL:a.createURL,searchMetadata:{isSearchStalled:"stalled"===i.status},status:i.status,error:i.error})).widgetParams,M(r,Cr)):{}}),2),r=t[0],h=t[1];return Nr({widget:f,parentIndex:a,props:o,shouldSsr:Boolean(n)}),r}function Hr(e,t){return f(vr,{searchParameters:e},t)}function Mr(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function $r(n){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?Mr(Object(i),!0).forEach(function(e){var t,r;t=n,r=i[e=e],(e=function(e){e=function(e,t){if("object"!==Lr(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!==Lr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"===Lr(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):Mr(Object(i)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(i,e))})}return n}function Lr(e){return(Lr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Ur=i({name:"dynamic-widgets",connector:!0}),Qr=function(u){var o=1<arguments.length&&void 0!==arguments[1]?arguments[1]:S;return m(u,Ur()),function(r){var c,e=r.widgets,t=r.maxValuesPerFacet,n=void 0===t?20:t,t=r.facets,i=void 0===t?["*"]:t,t=r.transformItems,a=void 0===t?function(e){return e}:t,s=r.fallbackWidget;if(!(e&&Array.isArray(e)&&e.every(function(e){return"object"===Lr(e)})))throw new Error(Ur("The `widgets` option expects an array of widgets."));if(Array.isArray(i))return c=new Map,{$$type:"ais.dynamicWidgets",init:function(r){e.forEach(function(e){var t=function(e,t){var r=null==(r=e.getWidgetRenderState)?void 0:r.call(e,t),t=null;if(r&&r.widgetParams&&((r=r.widgetParams).attribute?t=r.attribute:Array.isArray(r.attributes)&&(t=r.attributes[0])),"string"!=typeof t)throw new Error("Could not find the attribute of the widget:\n\n".concat(JSON.stringify(e),"\n\nPlease check whether the widget's getWidgetRenderState returns widgetParams.attribute correctly."));return t}(e,r);c.set(t,{widget:e,isMounted:!1})}),u($r($r({},this.getWidgetRenderState(r)),{},{instantSearchInstance:r.instantSearchInstance}),!0)},render:function(e){var t=e.parent,i=this.getWidgetRenderState(e),a=[],o=[];s&&i.attributesToRender.forEach(function(e){var t;c.has(e)||(t=s({attribute:e}),c.set(e,{widget:t,isMounted:!1}))}),c.forEach(function(e,t){var r=e.widget,e=e.isMounted,n=-1<i.attributesToRender.indexOf(t);!e&&n?(o.push(r),c.set(t,{widget:r,isMounted:!0})):e&&!n&&(a.push(r),c.set(t,{widget:r,isMounted:!1}))}),t.addWidgets(o),setTimeout(function(){return t.removeWidgets(a)},0),u($r($r({},i),{},{instantSearchInstance:e.instantSearchInstance}),!1)},dispose:function(e){var e=e.parent,r=[];c.forEach(function(e){var t=e.widget;e.isMounted&&r.push(t)}),e.removeWidgets(r),o()},getWidgetSearchParameters:function(e){return i.reduce(function(e,t){return e.addFacet(t)},e.setQueryParameters({maxValuesPerFacet:Math.max(n||0,e.maxValuesPerFacet||0)}))},getRenderState:function(e,t){return $r($r({},e),{},{dynamicWidgets:this.getWidgetRenderState(t)})},getWidgetRenderState:function(e){var t=e.results;e.state;if(!t)return{attributesToRender:[],widgetParams:r};e=a(null!=(e=null==(e=t.renderingContent)||null==(e=e.facetOrdering)||null==(e=e.facets)?void 0:e.order)?e:[],{results:t});if(Array.isArray(e))return{attributesToRender:e,widgetParams:r};throw new Error(Ur("The `transformItems` option expects a function that returns an Array."))}};throw new Error(Ur("The `facets` option only accepts an array of facets, you passed ".concat(JSON.stringify(i))))}};function Br(e,t){return f(Qr,d(d({},e),{},{widgets:[]}),t)}var qr=["children","fallbackComponent"];function Vr(){return null}function Jr(e){return"object"===H(e)&&e.props}var zr=0;function Xr(e){return(Xr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Kr=["initialSearchParameters"],Gr=["initialRecommendParameters"];function Zr(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function j(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Zr(Object(r),!0).forEach(function(e){Yr(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Zr(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function Yr(e,t,r){return(t=function(e){e=function(e,t){if("object"!==Xr(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!==Xr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"===Xr(e)?e:String(e)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function en(e){return function(e){if(Array.isArray(e))return tn(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){var r;if(e)return"string"==typeof e?tn(e,t):"Map"===(r="Object"===(r=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?tn(e,t):void 0}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function tn(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function rn(e,t){if(null==e)return{};var r,n=function(e,t){if(null==e)return{};var r,n,i={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],0<=t.indexOf(r)||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols)for(var i=Object.getOwnPropertySymbols(e),a=0;a<i.length;a++)r=i[a],0<=t.indexOf(r)||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r]);return n}var nn=i({name:"index-widget"});function an(e,t){var r=t.state,n=t.recommendState,i=t.isPageReset,t=t._uiState;r!==e.state&&(e.state=r,e.emit("change",{state:e.state,results:e.lastResults,isPageReset:i,_uiState:t})),n!==e.recommendState&&(e.recommendState=n)}function on(e,r,t){return e.reduce(function(e,t){return!O(t)&&(t.getWidgetUiState||t.getWidgetState)?t.getWidgetUiState?t.getWidgetUiState(e,r):t.getWidgetState(e,r):e},2<arguments.length&&void 0!==t?t:{})}function cn(e,t){var r=t.initialSearchParameters,n=rn(t,Kr);return e.reduce(function(e,t){return!t.getWidgetSearchParameters||O(t)?e:"search"===t.dependsOn&&t.getWidgetParameters?t.getWidgetParameters(e,n):t.getWidgetSearchParameters(e,n)},r)}function sn(e,t){var r=t.initialRecommendParameters,n=rn(t,Gr);return e.reduce(function(e,t){return!O(t)&&"recommend"===t.dependsOn&&t.getWidgetParameters?t.getWidgetParameters(e,n):e},r)}var un=function(e){if(void 0===e||void 0===e.indexName)throw new Error(nn("The `indexName` option is required."));var o=e.indexName,e=e.indexId,c=void 0===e?o:e,s=[],u={},l=null,f=null,h=null,d=null,m=null,p=!1,g=!1;return{$$type:"ais.index",$$widgetType:"ais.index",getIndexName:function(){return o},getIndexId:function(){return c},getHelper:function(){return h},getResults:function(){var e;return null!=(e=d)&&e.lastResults?(d.lastResults._state=h.state,d.lastResults):null},getResultsForWidget:function(e){var t;return"recommend"!==e.dependsOn||O(e)||void 0===e.$$id?this.getResults():null!=(t=h)&&t.lastRecommendResults?h.lastRecommendResults[e.$$id]:null},getPreviousState:function(){return m},getScopedResults:function(){var e=this.getParent(),e=e?e.getWidgets():0===o.length?this.getWidgets():[this];return function r(e){return e.filter(O).reduce(function(e,t){return e.concat.apply(e,[{indexId:t.getIndexId(),results:t.getResults(),helper:t.getHelper()}].concat(en(r(t.getWidgets()))))},[])}(e)},getParent:function(){return f},createURL:function(e){return"function"==typeof e?l._createURL(Yr({},c,e(u))):l._createURL(Yr({},c,on(s,{searchParameters:e,helper:h})))},getWidgets:function(){return s},addWidgets:function(e){var t=this;if(!Array.isArray(e))throw new Error(nn("The `addWidgets` method expects an array of widgets."));if(e.some(function(e){return"function"!=typeof e.init&&"function"!=typeof e.render}))throw new Error(nn("The widget definition expects a `render` and/or an `init` method."));return e.forEach(function(e){O(e)||(l&&"recommend"===e.dependsOn?l._hasRecommendWidget=!0:l?l._hasSearchWidget=!0:"recommend"===e.dependsOn?p=!0:g=!0,"recommend"===(e=e).dependsOn&&(e.$$id=zr++))}),s=s.concat(e),l&&Boolean(e.length)&&(an(h,{state:cn(s,{uiState:u,initialSearchParameters:h.state}),recommendState:sn(s,{uiState:u,initialRecommendParameters:h.recommendState}),_uiState:u}),e.forEach(function(e){e.getRenderState&&ln({renderState:e.getRenderState(l.renderState[t.getIndexId()]||{},ar(l,t,l._initialUiState)),instantSearchInstance:l,parent:t})}),e.forEach(function(e){e.init&&e.init(ar(l,t,l._initialUiState))}),l.scheduleSearch()),this},removeWidgets:function(t){var e,r,n=this;if(!Array.isArray(t))throw new Error(nn("The `removeWidgets` method expects an array of widgets."));if(t.some(function(e){return"function"!=typeof e.dispose}))throw new Error(nn("The widget definition expects a `dispose` method."));return(s=s.filter(function(e){return-1===t.indexOf(e)})).forEach(function(e){O(e)||(l&&"recommend"===e.dependsOn?l._hasRecommendWidget=!0:l?l._hasSearchWidget=!0:"recommend"===e.dependsOn?p=!0:g=!0)}),l&&Boolean(t.length)&&(r=(e=t.reduce(function(e,t){t=t.dispose({helper:h,state:e.cleanedSearchState,recommendState:e.cleanedRecommendState,parent:n});return t instanceof y.RecommendParameters?e.cleanedRecommendState=t:t&&(e.cleanedSearchState=t),e},{cleanedSearchState:h.state,cleanedRecommendState:h.recommendState})).cleanedSearchState,e=e.cleanedRecommendState,r=l.future.preserveSharedStateOnUnmount?cn(s,{uiState:u,initialSearchParameters:new y.SearchParameters({index:this.getIndexName()})}):cn(s,{uiState:on(s,{searchParameters:r,helper:h}),initialSearchParameters:r}),u=on(s,{searchParameters:r,helper:h}),h.setState(r),h.recommendState=e,s.length)&&l.scheduleSearch(),this},init:function(e){var i,t=this,r=e.instantSearchInstance,n=e.parent,a=e.uiState;null===h&&(l=r,f=n,u=a[c]||{},i=r.mainHelper,e=cn(s,{uiState:u,initialSearchParameters:new y.SearchParameters({index:o})}),n=sn(s,{uiState:u,initialRecommendParameters:new y.RecommendParameters}),(h=y({},e.index,e)).recommendState=n,h.search=function(){return r.onStateChange?(r.onStateChange({uiState:r.mainIndex.getWidgetUiState({}),setUiState:function(e){return r.setUiState(e,!1)}}),i):i.search()},h.searchWithoutTriggeringOnStateChange=function(){return i.search()},h.searchForFacetValues=function(e,t,r,n){n=h.state.setQueryParameters(n);return i.searchForFacetValues(e,t,r,n)},d=i.derive(function(){return tr.apply(void 0,[i.state].concat(en(function(e){for(var t=e.getParent(),r=[e.getHelper().state];null!==t;)r=[t.getHelper().state].concat(r),t=t.getParent();return r}(t))))},function(){return t.getHelper().recommendState}),(n=null==(e=r._initialResults)?void 0:e[this.getIndexId()])&&(e=new y.SearchResults(new y.SearchParameters(n.state),n.results),d.lastResults=e,h.lastResults=e),h.on("change",function(e){e.isPageReset&&!function r(e){e=e.filter(O);0!==e.length&&e.forEach(function(e){var t=e.getHelper();an(t,{state:t.state.resetPage(),recommendState:t.recommendState,isPageReset:!0}),r(e.getWidgets())})}(s)}),d.on("search",function(){r.scheduleStalledRender()}),d.on("result",function(e){e=e.results;r.scheduleRender(),h.lastResults=e,m=null==e?void 0:e._state}),d.on("recommend:result",function(e){e=e.recommend;r.scheduleRender(),h.lastRecommendResults=e.results}),s.forEach(function(e){e.getRenderState&&ln({renderState:e.getRenderState(r.renderState[t.getIndexId()]||{},ar(r,t,a)),instantSearchInstance:r,parent:t})}),s.forEach(function(e){e.init&&e.init(ar(r,t,a))}),h.on("change",function(e){var t=e.state,e=e._uiState;u=on(s,{searchParameters:t,helper:h},e||{}),r.onStateChange||r.onInternalStateChange()}),n&&r.scheduleRender(),p&&(r._hasRecommendWidget=!0),g)&&(r._hasSearchWidget=!0)},render:function(e){var t=this,r=e.instantSearchInstance,e=("error"===r.status&&!r.mainHelper.hasPendingRequests()&&m&&h.setState(m),this.getResults()||null!=(e=d)&&e.lastRecommendResults?s:s.filter(O));(e=e.filter(function(e){return!e.shouldRender||e.shouldRender({instantSearchInstance:r})})).forEach(function(e){e.getRenderState&&ln({renderState:e.getRenderState(r.renderState[t.getIndexId()]||{},or(r,t,e)),instantSearchInstance:r,parent:t})}),e.forEach(function(e){e.render&&e.render(or(r,t,e))})},dispose:function(){var e,t=this;s.forEach(function(e){e.dispose&&h&&e.dispose({helper:h,state:h.state,recommendState:h.recommendState,parent:t})}),(f=l=null)!=(e=h)&&e.removeAllListeners(),(h=null)!=(e=d)&&e.detach(),d=null},getWidgetUiState:function(e){return s.filter(O).reduce(function(e,t){return t.getWidgetUiState(e)},j(j({},e),{},Yr({},c,j(j({},e[c]),u))))},getWidgetState:function(e){return this.getWidgetUiState(e)},getWidgetSearchParameters:function(e,t){t=t.uiState;return cn(s,{uiState:t,initialSearchParameters:e})},refreshUiState:function(){u=on(s,{searchParameters:this.getHelper().state,helper:this.getHelper()},u)},setIndexUiState:function(e){var t="function"==typeof e?e(u):e;l.setUiState(function(e){return j(j({},e),{},Yr({},c,t))})}}};function ln(e){var t=e.renderState,r=e.instantSearchInstance,e=e.parent,e=(e||r.mainIndex).getIndexId();r.renderState=j(j({},r.renderState),{},Yr({},e,j(j({},r.renderState[e]),t)))}function fn(){return $(b.useReducer(function(e){return e+1},0),2)[1]}var hn=b.createContext(null);function dn(){return b.useContext(hn)}var mn=["children"];function pn(r){return function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=e.descendantName,e=e.modifierName,t=t?"-".concat(t):"",e=e?"--".concat(e):"";return"".concat("ais","-").concat(r).concat(t).concat(e)}}var gn=pn("Highlight");var yn=pn("ReverseHighlight");var vn=pn("Snippet");var bn=pn("ReverseSnippet");function Sn(e){return(Sn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function On(e,t){var r,e={method:e,payload:t},t=e.method;if("object"!==Sn(e=e.payload))throw new Error("The insights helper expects the payload to be an object.");try{r=ot(e)}catch(e){throw new Error("Could not JSON serialize the payload object.")}return'data-insights-method="'.concat(t,'" data-insights-payload="').concat(r,'"')}function jn(e){return(jn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var wn="_ALGOLIA";function Pn(){var e=wn;if("object"===("undefined"==typeof document?"undefined":jn(document))&&"string"==typeof document.cookie)for(var t="".concat(e,"="),r=document.cookie.split(";"),n=0;n<r.length;n++){for(var i=r[n];" "===i.charAt(0);)i=i.substring(1);if(0===i.indexOf(t))return i.substring(t.length,i.length)}}function Rn(e){return(Rn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function En(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function Fn(n){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?En(Object(i),!0).forEach(function(e){var t,r;t=n,r=i[e=e],(e=function(e){e=function(e,t){if("object"!==Rn(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!==Rn(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"===Rn(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):En(Object(i)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(i,e))})}return n}function xn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,a,o,c=[],s=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);s=!0);}catch(e){u=!0,i=e}finally{try{if(!s&&null!=r.return&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw i}}return c}}(e,t)||_n(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function In(e){return function(e){if(Array.isArray(e))return Tn(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||_n(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _n(e,t){var r;if(e)return"string"==typeof e?Tn(e,t):"Map"===(r="Object"===(r=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Tn(e,t):void 0}function Tn(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var An="2.13.0",Dn="https://cdn.jsdelivr.net/npm/search-insights@".concat(An,"/dist/search-insights.min.js");function kn(e){var e=0<arguments.length&&void 0!==e?e:{},t=e.insightsClient,m=e.insightsInitParams,p=e.onEvent,r=e.$$internal,g=void 0!==r&&r,r=e.$$automatic,y=void 0!==r&&r,a=t,v=(t||null===t||fr(function(e){var n=e.window,i=n.AlgoliaAnalyticsObject||"aa";(a="string"==typeof i?n[i]:a)||(n.AlgoliaAnalyticsObject=i,n[i]||(n[i]=function(){n[i].queue||(n[i].queue=[]);for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];n[i].queue.push(t)},n[i].version=An,n[i].shouldAddScript=!0),a=n[i])}),a||S);return function(e){var a=e.instantSearchInstance,e=a.middleware.filter(function(e){return"ais.insights"===e.instance.$$type&&e.instance.$$internal}).map(function(e){return e.creator});a.unuse.apply(a,In(e));var t,r,o,c,n=xn((e=a.client).transporter?(n=(t=e.transporter).headers,t=t.queryParameters,[n[r="x-algolia-application-id"]||t[r],n[r="x-algolia-api-key"]||t[r]]):[e.applicationID,e.apiKey],2),s=n[0],u=n[1],l=void 0,f=void 0,h=void 0,d=void 0,i=v.queue;return Array.isArray(i)&&(t=["setUserToken","setAuthenticatedUserToken"].map(function(t){var e=bt(i.slice().reverse(),function(e){return xn(e,1)[0]===t})||[];return xn(e,2)[1]}),r=xn(t,2),l=r[0],f=r[1]),v("getUserToken",null,function(e,t){h=Wn(t)}),v("getAuthenticatedUserToken",null,function(e,t){d=Wn(t)}),!m&&Nn(v)||v("init",Fn({appId:s,apiKey:u,partial:!0},m)),{$$type:"ais.insights",$$internal:g,$$automatic:y,onStateChange:function(){},subscribe:function(){if(v.shouldAddScript){var t="[insights middleware]: could not load search-insights.js. Please load it manually following https://alg.li/insights-init";try{var e=document.createElement("script");e.async=!0,e.src=Dn,e.onerror=function(){a.emit("error",new Error(t))},document.body.appendChild(e),v.shouldAddScript=!1}catch(e){v.shouldAddScript=!1,a.emit("error",new Error(t))}}},started:function(){v("addAlgoliaAgent","insights-middleware"),c=a.mainHelper,o={userToken:c.state.userToken,clickAnalytics:c.state.clickAnalytics},y||c.overrideStateWithoutTriggeringChangeEvent(Fn(Fn({},c.state),{},{clickAnalytics:!0})),g||a.scheduleSearch();var n=function(e){var t,r=1<arguments.length&&void 0!==arguments[1]&&arguments[1],n=Wn(e);function i(){c.overrideStateWithoutTriggeringChangeEvent(Fn(Fn({},c.state),{},{userToken:n})),t&&t!==e&&a.scheduleSearch()}n&&(t=c.state.userToken,r?i():setTimeout(i,0))},e=Pn();function t(e,t,r){n(e,!0),t&&v("setUserToken",t),r&&v("setAuthenticatedUserToken",r)}e&&n(e,!0);var e=d||h,r=f||l,i=(e?t(e,h,d):r&&t(r,l,f),v("onUserTokenChange",n,{immediate:!0}),v("onAuthenticatedUserTokenChange",function(e){e||v("getUserToken",null,function(e,t){n(t)}),n(e)},{immediate:!0}),v);Nn(v)&&(i=function(e,t){return v(e,t,{headers:{"X-Algolia-Application-Id":s,"X-Algolia-API-Key":u}})}),a.sendEventToInsights=function(e){p?p(e,i):e.insightsMethod&&(e.payload.algoliaSource=["instantsearch"],y&&e.payload.algoliaSource.push("instantsearch-automatic"),"internal"===e.eventModifier&&e.payload.algoliaSource.push("instantsearch-internal"),i(e.insightsMethod,e.payload))}},unsubscribe:function(){v("onUserTokenChange",void 0),v("onAuthenticatedUserTokenChange",void 0),a.sendEventToInsights=S,c&&o&&(c.overrideStateWithoutTriggeringChangeEvent(Fn(Fn({},c.state),o)),a.scheduleSearch())}}}}function Nn(e){var e=xn((e.version||"").split(".").map(Number),2),t=e[0],e=e[1];return 3<=t||2===t&&6<=e||1===t&&10<=e}function Wn(e){if(e)return"number"==typeof e?e.toString():e}function Cn(e){var e=(0<arguments.length&&void 0!==e?e:{}).$$internal,a=void 0!==e&&e;return function(e){var t=e.instantSearchInstance,r={widgets:[]},n=document.createElement("meta"),i=document.querySelector("head");return n.name="instantsearch:widgets",{$$type:"ais.metadata",$$internal:a,onStateChange:function(){},subscribe:function(){setTimeout(function(){var e=t.client;r.ua=e.transporter&&e.transporter.userAgent?e.transporter.userAgent.value:e._ua,function n(e,i,a){var o=ar(i,i.mainIndex,i._initialUiState);e.forEach(function(e){var t={},r=(e.getWidgetRenderState&&(r=e.getWidgetRenderState(o))&&r.widgetParams&&(t=r.widgetParams),Object.keys(t).filter(function(e){return void 0!==t[e]}));a.widgets.push({type:e.$$type,widgetType:e.$$widgetType,params:r}),"ais.index"===e.$$type&&n(e.getWidgets(),i,a)})}(t.mainIndex.getWidgets(),t,r),t.middleware.forEach(function(e){return r.widgets.push({middleware:!0,type:e.instance.$$type,internal:e.instance.$$internal})}),n.content=JSON.stringify(r),i.appendChild(n)},0)},started:function(){},unsubscribe:function(){n.remove()}}}}function Hn(e,t){for(var r=t&&t.plainObjects?Object.create(null):{},n=0;n<e.length;++n)void 0!==e[n]&&(r[n]=e[n]);return r}function Mn(e,t,r,n,i,a,o,c,s,u,l,f,h,d){var m=e;if("function"==typeof o?m=o(t,m):m instanceof Date?m=u(m):"comma"===r&&zn(m)&&(m=qn.maybeMap(m,function(e){return e instanceof Date?u(e):e})),null===m){if(n)return a&&!h?a(t,w.encoder,d,"key",l):t;m=""}if(Yn(m)||qn.isBuffer(m)){if(a){e=h?t:a(t,w.encoder,d,"key",l);if("comma"===r&&h){for(var p=Xn.call(String(m),","),g="",y=0;y<p.length;++y)g+=(0===y?"":",")+f(a(p[y],w.encoder,d,"value",l));return[f(e)+"="+g]}return[f(e)+"="+f(a(m,w.encoder,d,"value",l))]}return[f(t)+"="+f(String(m))]}var v,b=[];if(void 0!==m){v="comma"===r&&zn(m)?[{value:0<m.length?m.join(",")||null:void 0}]:zn(o)?o:(e=Object.keys(m),c?e.sort(c):e);for(var S=0;S<v.length;++S){var O=v[S],j="object"==typeof O&&void 0!==O.value?O.value:m[O];i&&null===j||(O=zn(m)?"function"==typeof r?r(t,O):t:t+(s?"."+O:"["+O+"]"),Gn(b,Mn(j,O,r,n,i,a,o,c,s,u,l,f,h,d)))}}return b}var $n=String.prototype.replace,Ln=/%20/g,V="RFC3986",Un={default:V,formatters:{RFC1738:function(e){return $n.call(e,Ln,"+")},RFC3986:function(e){return String(e)}},RFC1738:"RFC1738",RFC3986:V},Qn=Object.prototype.hasOwnProperty,Bn=Array.isArray,h=function(){for(var e=[],t=0;t<256;++t)e.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return e}(),qn={arrayToObject:Hn,assign:function(e,r){return Object.keys(r).reduce(function(e,t){return e[t]=r[t],e},e)},combine:function(e,t){return[].concat(e,t)},compact:function(e){for(var t=[{obj:{o:e},prop:"o"}],r=[],n=0;n<t.length;++n)for(var i=t[n],a=i.obj[i.prop],o=Object.keys(a),c=0;c<o.length;++c){var s=o[c],u=a[s];"object"==typeof u&&null!==u&&-1===r.indexOf(u)&&(t.push({obj:a,prop:s}),r.push(u))}for(var l=t;1<l.length;){var f=l.pop(),h=f.obj[f.prop];if(Bn(h)){for(var d=[],m=0;m<h.length;++m)void 0!==h[m]&&d.push(h[m]);f.obj[f.prop]=d}}return e},decode:function(t,e,r){t=t.replace(/\+/g," ");if("iso-8859-1"===r)return t.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(t)}catch(e){return t}},encode:function(e,t,r,n,i){if(0===e.length)return e;var a=e;if("symbol"==typeof e?a=Symbol.prototype.toString.call(e):"string"!=typeof e&&(a=String(e)),"iso-8859-1"===r)return escape(a).replace(/%u[0-9a-f]{4}/gi,function(e){return"%26%23"+parseInt(e.slice(2),16)+"%3B"});for(var o="",c=0;c<a.length;++c){var s=a.charCodeAt(c);45===s||46===s||95===s||126===s||48<=s&&s<=57||65<=s&&s<=90||97<=s&&s<=122||i===Un.RFC1738&&(40===s||41===s)?o+=a.charAt(c):s<128?o+=h[s]:s<2048?o+=h[192|s>>6]+h[128|63&s]:s<55296||57344<=s?o+=h[224|s>>12]+h[128|s>>6&63]+h[128|63&s]:(c+=1,s=65536+((1023&s)<<10|1023&a.charCodeAt(c)),o+=h[240|s>>18]+h[128|s>>12&63]+h[128|s>>6&63]+h[128|63&s])}return o},isBuffer:function(e){return!(!e||"object"!=typeof e||!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e)))},isRegExp:function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},maybeMap:function(e,t){if(Bn(e)){for(var r=[],n=0;n<e.length;n+=1)r.push(t(e[n]));return r}return t(e)},merge:function n(i,a,o){if(!a)return i;if("object"!=typeof a){if(Bn(i))i.push(a);else{if(!i||"object"!=typeof i)return[i,a];(o&&(o.plainObjects||o.allowPrototypes)||!Qn.call(Object.prototype,a))&&(i[a]=!0)}return i}var e;return i&&"object"==typeof i?(Bn(e=i)&&!Bn(a)&&(e=Hn(i,o)),Bn(i)&&Bn(a)?(a.forEach(function(e,t){var r;Qn.call(i,t)?(r=i[t])&&"object"==typeof r&&e&&"object"==typeof e?i[t]=n(r,e,o):i.push(e):i[t]=e}),i):Object.keys(a).reduce(function(e,t){var r=a[t];return Qn.call(e,t)?e[t]=n(e[t],r,o):e[t]=r,e},e)):[i].concat(a)}},Vn=Object.prototype.hasOwnProperty,Jn={brackets:function(e){return e+"[]"},comma:"comma",indices:function(e,t){return e+"["+t+"]"},repeat:function(e){return e}},zn=Array.isArray,Xn=String.prototype.split,Kn=Array.prototype.push,Gn=function(e,t){Kn.apply(e,zn(t)?t:[t])},Zn=Date.prototype.toISOString,K=Un.default,w={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:qn.encode,encodeValuesOnly:!1,format:K,formatter:Un.formatters[K],indices:!1,serializeDate:function(e){return Zn.call(e)},skipNulls:!1,strictNullHandling:!1},Yn=function(e){return"string"==typeof e||"number"==typeof e||"boolean"==typeof e||"symbol"==typeof e||"bigint"==typeof e},ei=Object.prototype.hasOwnProperty,ti=Array.isArray,g={allowDots:!1,allowPrototypes:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:qn.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},ri=function(e){return e.replace(/&#(\d+);/g,function(e,t){return String.fromCharCode(parseInt(t,10))})},ni=function(e,t){return e&&"string"==typeof e&&t.comma&&-1<e.indexOf(",")?e.split(","):e},ii="utf8=%26%2310003%3B",ai="utf8=%E2%9C%93",oi=function(e,t,r,n){for(var i=n?t:ni(t,r),a=e.length-1;0<=a;--a){var o,c,s,u=e[a];"[]"===u&&r.parseArrays?o=[].concat(i):(o=r.plainObjects?Object.create(null):{},c="["===u.charAt(0)&&"]"===u.charAt(u.length-1)?u.slice(1,-1):u,s=parseInt(c,10),r.parseArrays||""!==c?!isNaN(s)&&u!==c&&String(s)===c&&0<=s&&r.parseArrays&&s<=r.arrayLimit?(o=[])[s]=i:"__proto__"!==c&&(o[c]=i):o={0:i}),i=o}return i},ci={formats:Un,parse:function(e,t){var r=function(e){if(!e)return g;if(null!==e.decoder&&void 0!==e.decoder&&"function"!=typeof e.decoder)throw new TypeError("Decoder has to be a function.");if(void 0!==e.charset&&"utf-8"!==e.charset&&"iso-8859-1"!==e.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var t=(void 0===e.charset?g:e).charset;return{allowDots:void 0===e.allowDots?g.allowDots:!!e.allowDots,allowPrototypes:("boolean"==typeof e.allowPrototypes?e:g).allowPrototypes,arrayLimit:("number"==typeof e.arrayLimit?e:g).arrayLimit,charset:t,charsetSentinel:("boolean"==typeof e.charsetSentinel?e:g).charsetSentinel,comma:("boolean"==typeof e.comma?e:g).comma,decoder:("function"==typeof e.decoder?e:g).decoder,delimiter:("string"==typeof e.delimiter||qn.isRegExp(e.delimiter)?e:g).delimiter,depth:"number"==typeof e.depth||!1===e.depth?+e.depth:g.depth,ignoreQueryPrefix:!0===e.ignoreQueryPrefix,interpretNumericEntities:("boolean"==typeof e.interpretNumericEntities?e:g).interpretNumericEntities,parameterLimit:("number"==typeof e.parameterLimit?e:g).parameterLimit,parseArrays:!1!==e.parseArrays,plainObjects:("boolean"==typeof e.plainObjects?e:g).plainObjects,strictNullHandling:("boolean"==typeof e.strictNullHandling?e:g).strictNullHandling}}(t);if(""===e||null==e)return r.plainObjects?Object.create(null):{};for(var n="string"==typeof e?function(e,t){var r,n,i,a,o={},e=t.ignoreQueryPrefix?e.replace(/^\?/,""):e,c=t.parameterLimit===1/0?void 0:t.parameterLimit,s=e.split(t.delimiter,c),u=-1,l=t.charset;if(t.charsetSentinel)for(r=0;r<s.length;++r)0===s[r].indexOf("utf8=")&&(s[r]===ai?l="utf-8":s[r]===ii&&(l="iso-8859-1"),u=r,r=s.length);for(r=0;r<s.length;++r)r!==u&&((a=-1===(a=-1===(a=(n=s[r]).indexOf("]="))?n.indexOf("="):a+1)?(i=t.decoder(n,g.decoder,l,"key"),t.strictNullHandling?null:""):(i=t.decoder(n.slice(0,a),g.decoder,l,"key"),qn.maybeMap(ni(n.slice(a+1),t),function(e){return t.decoder(e,g.decoder,l,"value")})))&&t.interpretNumericEntities&&"iso-8859-1"===l&&(a=ri(a)),-1<n.indexOf("[]=")&&(a=ti(a)?[a]:a),ei.call(o,i)?o[i]=qn.combine(o[i],a):o[i]=a);return o}(e,r):e,i=r.plainObjects?Object.create(null):{},a=Object.keys(n),o=0;o<a.length;++o)var c=a[o],c=function(e,t,r,n){if(e){var i=r.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,a=/(\[[^[\]]*])/g,o=0<r.depth&&/(\[[^[\]]*])/.exec(i),e=o?i.slice(0,o.index):i,c=[];if(e){if(!r.plainObjects&&ei.call(Object.prototype,e)&&!r.allowPrototypes)return;c.push(e)}for(var s=0;0<r.depth&&null!==(o=a.exec(i))&&s<r.depth;){if(s+=1,!r.plainObjects&&ei.call(Object.prototype,o[1].slice(1,-1))&&!r.allowPrototypes)return;c.push(o[1])}return o&&c.push("["+i.slice(o.index)+"]"),oi(c,t,r,n)}}(c,n[c],r,"string"==typeof e),i=qn.merge(i,c,r);return qn.compact(i)},stringify:function(e,t){var r=e,n=function(e){if(!e)return w;if(null!==e.encoder&&void 0!==e.encoder&&"function"!=typeof e.encoder)throw new TypeError("Encoder has to be a function.");var t=e.charset||w.charset;if(void 0!==e.charset&&"utf-8"!==e.charset&&"iso-8859-1"!==e.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var r=Un.default;if(void 0!==e.format){if(!Vn.call(Un.formatters,e.format))throw new TypeError("Unknown format option provided.");r=e.format}var n=Un.formatters[r],i=w.filter;return"function"!=typeof e.filter&&!zn(e.filter)||(i=e.filter),{addQueryPrefix:("boolean"==typeof e.addQueryPrefix?e:w).addQueryPrefix,allowDots:void 0===e.allowDots?w.allowDots:!!e.allowDots,charset:t,charsetSentinel:("boolean"==typeof e.charsetSentinel?e:w).charsetSentinel,delimiter:(void 0===e.delimiter?w:e).delimiter,encode:("boolean"==typeof e.encode?e:w).encode,encoder:("function"==typeof e.encoder?e:w).encoder,encodeValuesOnly:("boolean"==typeof e.encodeValuesOnly?e:w).encodeValuesOnly,filter:i,format:r,formatter:n,serializeDate:("function"==typeof e.serializeDate?e:w).serializeDate,skipNulls:("boolean"==typeof e.skipNulls?e:w).skipNulls,sort:"function"==typeof e.sort?e.sort:null,strictNullHandling:("boolean"==typeof e.strictNullHandling?e:w).strictNullHandling}}(t),i=("function"==typeof n.filter?r=(0,n.filter)("",r):zn(n.filter)&&(o=n.filter),[]);if("object"!=typeof r||null===r)return"";var e=t&&t.arrayFormat in Jn?t.arrayFormat:!(t&&"indices"in t)||t.indices?"indices":"repeat",a=Jn[e],o=o||Object.keys(r);n.sort&&o.sort(n.sort);for(var c=0;c<o.length;++c){var s=o[c];n.skipNulls&&null===r[s]||Gn(i,Mn(r[s],s,a,n.strictNullHandling,n.skipNulls,n.encode?n.encoder:null,n.filter,n.sort,n.allowDots,n.serializeDate,n.format,n.formatter,n.encodeValuesOnly,n.charset))}t=i.join(n.delimiter),e=!0===n.addQueryPrefix?"?":"";return n.charsetSentinel&&("iso-8859-1"===n.charset?e+="utf8=%26%2310003%3B&":e+="utf8=%E2%9C%93&"),0<t.length?e+t:""}};function si(e){return(si="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ui(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,li(n.key),n)}}function P(e,t,r){(t=li(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}function li(e){e=function(e,t){if("object"!==si(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!==si(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"===si(e)?e:String(e)}function fi(e){e&&(window.document.title=e)}var hi=function(){function l(e){var r=this,t=e.windowTitle,n=e.writeDelay,n=void 0===n?400:n,i=e.createURL,a=e.parseURL,o=e.getLocation,c=e.start,s=e.dispose,u=e.push,e=e.cleanUrlOnDispose;if(!(this instanceof l))throw new TypeError("Cannot call a class as a function");P(this,"$$type","ais.browser"),P(this,"windowTitle",void 0),P(this,"writeDelay",void 0),P(this,"_createURL",void 0),P(this,"parseURL",void 0),P(this,"getLocation",void 0),P(this,"writeTimer",void 0),P(this,"_onPopState",void 0),P(this,"inPopState",!1),P(this,"isDisposed",!1),P(this,"latestAcknowledgedHistory",0),P(this,"_start",void 0),P(this,"_dispose",void 0),P(this,"_push",void 0),P(this,"_cleanUrlOnDispose",void 0),this.windowTitle=t,this.writeTimer=void 0,this.writeDelay=n,this._createURL=i,this.parseURL=a,this.getLocation=o,this._start=c,this._dispose=s,this._push=u,this._cleanUrlOnDispose=void 0===e||e,fr(function(e){var e=e.window,t=r.windowTitle&&r.windowTitle(r.read());fi(t),r.latestAcknowledgedHistory=e.history.length})}var e,t,r;return e=l,(t=[{key:"read",value:function(){return this.parseURL({qsModule:ci,location:this.getLocation()})}},{key:"write",value:function(i){var a=this;fr(function(e){var t=e.window,r=a.createURL(i),n=a.windowTitle&&a.windowTitle(i);a.writeTimer&&clearTimeout(a.writeTimer),a.writeTimer=setTimeout(function(){fi(n),a.shouldWrite(r)&&(a._push?a._push(r):t.history.pushState(i,n||"",r),a.latestAcknowledgedHistory=t.history.length),a.inPopState=!1,a.writeTimer=void 0},a.writeDelay)})}},{key:"onUpdate",value:function(e){var t=this;this._start&&this._start(function(){e(t.read())}),this._onPopState=function(){t.writeTimer&&(clearTimeout(t.writeTimer),t.writeTimer=void 0),t.inPopState=!0,e(t.read())},fr(function(e){e.window.addEventListener("popstate",t._onPopState)})}},{key:"createURL",value:function(e){return this._createURL({qsModule:ci,routeState:e,location:this.getLocation()})}},{key:"dispose",value:function(){var t=this;this._dispose&&this._dispose(),this.isDisposed=!0,fr(function(e){e=e.window;t._onPopState&&e.removeEventListener("popstate",t._onPopState)}),this.writeTimer&&clearTimeout(this.writeTimer),this._cleanUrlOnDispose&&this.write({})}},{key:"start",value:function(){this.isDisposed=!1}},{key:"shouldWrite",value:function(r){var n=this;return fr(function(e){var e=e.window,t=!(n.isDisposed&&n.latestAcknowledgedHistory!==e.history.length);return!n.inPopState&&t&&r!==e.location.href})}}])&&ui(e.prototype,t),r&&ui(e,r),Object.defineProperty(e,"prototype",{writable:!1}),l}();function di(e){return(di="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var mi=["configure"];function pi(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function gi(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?pi(Object(r),!0).forEach(function(e){yi(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):pi(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function yi(e,t,r){return(t=function(e){e=function(e,t){if("object"!==di(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!==di(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"===di(e)?e:String(e)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function vi(e,t){if(null==e)return{};var r,n=function(e,t){if(null==e)return{};var r,n,i={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],0<=t.indexOf(r)||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols)for(var i=Object.getOwnPropertySymbols(e),a=0;a<i.length;a++)r=i[a],0<=t.indexOf(r)||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r]);return n}function bi(e){e.configure;return vi(e,mi)}function Si(e){return(Si="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Oi(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function ji(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Oi(Object(r),!0).forEach(function(e){wi(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Oi(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function wi(e,t,r){return(t=function(e){e=function(e,t){if("object"!==Si(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!==Si(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"===Si(e)?e:String(e)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Pi(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=e.router,i=void 0===t?function(e){var e=0<arguments.length&&void 0!==e?e:{},t=e.createURL,r=e.parseURL,n=e.writeDelay,i=e.windowTitle,a=e.getLocation,o=e.start,c=e.dispose,s=e.push,e=e.cleanUrlOnDispose;return new hi({createURL:void 0===t?function(e){var t=e.qsModule,r=e.routeState,e=e.location,n=e.protocol,i=e.hostname,a=e.port,a=void 0===a?"":a,o=e.pathname,e=e.hash,t=t.stringify(r),r=""===a?"":":".concat(a);return(t?"".concat(n,"//").concat(i).concat(r).concat(o,"?").concat(t):"".concat(n,"//").concat(i).concat(r).concat(o)).concat(e)}:t,parseURL:void 0===r?function(e){var t=e.qsModule,e=e.location;return t.parse(e.search.slice(1),{arrayLimit:99})}:r,writeDelay:void 0===n?400:n,windowTitle:i,getLocation:void 0===a?function(){return fr(function(e){return e.window.location},{fallback:function(){throw new Error("You need to provide `getLocation` to the `history` router in environments where `window` does not exist.")}})}:a,start:o,dispose:c,push:s,cleanUrlOnDispose:e})}():t,a=void 0===(t=e.stateMapping)?{$$type:"ais.simple",stateToRoute:function(r){return Object.keys(r).reduce(function(e,t){return gi(gi({},e),{},yi({},t,bi(r[t])))},{})},routeToState:function(){var r=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return Object.keys(r).reduce(function(e,t){return gi(gi({},e),{},yi({},t,bi(r[t])))},{})}}:t,o=void 0!==(t=e.$$internal)&&t;return function(e){var t=e.instantSearchInstance;t._createURL=function(r){var e=0===t.mainIndex.getWidgets().length?t._initialUiState:t.mainIndex.getWidgetUiState({}),e=Object.keys(r).reduce(function(e,t){return ji(ji({},e),{},wi({},t,r[t]))},e),e=a.stateToRoute(e);return i.createURL(e)};var r=void 0,n=t._initialUiState;return{$$type:"ais.router({router:".concat(i.$$type||"__unknown__",", stateMapping:").concat(a.$$type||"__unknown__","})"),$$internal:o,onStateChange:function(e){e=e.uiState,e=a.stateToRoute(e);void 0!==r&&Jt(r,e)||(i.write(e),r=e)},subscribe:function(){t._initialUiState=ji(ji({},n),a.routeToState(i.read())),i.onUpdate(function(e){0<t.mainIndex.getWidgets().length&&t.setUiState(a.routeToState(e))})},started:function(){var e;null!=(e=i.start)&&e.call(i)},unsubscribe:function(){i.dispose()}}}}function Ri(e){return(Ri="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ei(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function Fi(n){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?Ei(Object(i),!0).forEach(function(e){var t,r;t=n,r=i[e=e],(e=function(e){e=function(e,t){if("object"!==Ri(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!==Ri(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"===Ri(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):Ei(Object(i)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(i,e))})}return n}function xi(e){var r=e.numberLocale;return{formatNumber:function(e,t){return Number(t(e)).toLocaleString(r)},highlight:function(e,t){try{var r=JSON.parse(e);return t((n=Fi(Fi({},r),{},{hit:this}),i=n.attribute,a=void 0===(a=n.highlightedTagName)?"mark":a,o=n.hit,n=void 0===(n=n.cssClasses)?{}:n,i=void 0===(o=(Ft(o._highlightResult,i)||{}).value)?"":o,o=gn({descendantName:"highlighted"})+(n.highlighted?" ".concat(n.highlighted):""),i.replace(new RegExp(u.highlightPreTag,"g"),"<".concat(a,' class="').concat(o,'">')).replace(new RegExp(u.highlightPostTag,"g"),"</".concat(a,">"))))}catch(e){throw new Error('\nThe highlight helper expects a JSON object of the format:\n{ "attribute": "name", "highlightedTagName": "mark" }')}var n,i,a,o},reverseHighlight:function(e,t){try{var r=JSON.parse(e);return t((n=Fi(Fi({},r),{},{hit:this}),i=n.attribute,a=void 0===(a=n.highlightedTagName)?"mark":a,o=n.hit,n=void 0===(n=n.cssClasses)?{}:n,i=void 0===(o=(Ft(o._highlightResult,i)||{}).value)?"":o,o=yn({descendantName:"highlighted"})+(n.highlighted?" ".concat(n.highlighted):""),Ye(lr(Pt(i))).replace(new RegExp(u.highlightPreTag,"g"),"<".concat(a,' class="').concat(o,'">')).replace(new RegExp(u.highlightPostTag,"g"),"</".concat(a,">"))))}catch(e){throw new Error('\n  The reverseHighlight helper expects a JSON object of the format:\n  { "attribute": "name", "highlightedTagName": "mark" }')}var n,i,a,o},snippet:function(e,t){try{var r=JSON.parse(e);return t((n=Fi(Fi({},r),{},{hit:this}),i=n.attribute,a=void 0===(a=n.highlightedTagName)?"mark":a,o=n.hit,n=void 0===(n=n.cssClasses)?{}:n,i=void 0===(o=(Ft(o._snippetResult,i)||{}).value)?"":o,o=vn({descendantName:"highlighted"})+(n.highlighted?" ".concat(n.highlighted):""),i.replace(new RegExp(u.highlightPreTag,"g"),"<".concat(a,' class="').concat(o,'">')).replace(new RegExp(u.highlightPostTag,"g"),"</".concat(a,">"))))}catch(e){throw new Error('\nThe snippet helper expects a JSON object of the format:\n{ "attribute": "name", "highlightedTagName": "mark" }')}var n,i,a,o},reverseSnippet:function(e,t){try{var r=JSON.parse(e);return t((n=Fi(Fi({},r),{},{hit:this}),i=n.attribute,a=void 0===(a=n.highlightedTagName)?"mark":a,o=n.hit,n=void 0===(n=n.cssClasses)?{}:n,i=void 0===(o=(Ft(o._snippetResult,i)||{}).value)?"":o,o=bn({descendantName:"highlighted"})+(n.highlighted?" ".concat(n.highlighted):""),Ye(lr(Pt(i))).replace(new RegExp(u.highlightPreTag,"g"),"<".concat(a,' class="').concat(o,'">')).replace(new RegExp(u.highlightPostTag,"g"),"</".concat(a,">"))))}catch(e){throw new Error('\n  The reverseSnippet helper expects a JSON object of the format:\n  { "attribute": "name", "highlightedTagName": "mark" }')}var n,i,a,o},insights:function(e,t){try{var r=JSON.parse(e),n=r.method,i=r.payload;return t(On(n,Fi({objectIDs:[this.objectID]},i)))}catch(e){throw new Error('\nThe insights helper expects a JSON object of the format:\n{ "method": "method-name", "payload": { "eventName": "name of the event" } }')}}}}function Ii(e){return(Ii="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _i(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function Ti(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?_i(Object(r),!0).forEach(function(e){E(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):_i(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function Ai(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Wi(n.key),n)}}function Di(e,t){return(Di=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function ki(r){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=Ni(r),t=(e=n?(e=Ni(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(e&&("object"===Ii(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return R(t)}}function R(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ni(e){return(Ni=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function E(e,t,r){(t=Wi(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}function Wi(e){e=function(e,t){if("object"!==Ii(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!==Ii(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"===Ii(e)?e:String(e)}var Ci=i({name:"instantsearch"});function Hi(){return"#"}var Mi={preserveSharedStateOnUnmount:!1,persistHierarchicalRootCount:!1},$i=function(){var e=m,t=U;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Di(e,t);var r,d=ki(m);function m(e){var r;if(!(this instanceof m))throw new TypeError("Cannot call a class as a function");E(R(r=d.call(this)),"client",void 0),E(R(r),"indexName",void 0),E(R(r),"insightsClient",void 0),E(R(r),"onStateChange",null),E(R(r),"future",void 0),E(R(r),"helper",void 0),E(R(r),"mainHelper",void 0),E(R(r),"mainIndex",void 0),E(R(r),"started",void 0),E(R(r),"templatesConfig",void 0),E(R(r),"renderState",{}),E(R(r),"_stalledSearchDelay",void 0),E(R(r),"_searchStalledTimer",void 0),E(R(r),"_initialUiState",void 0),E(R(r),"_initialResults",void 0),E(R(r),"_createURL",void 0),E(R(r),"_searchFunction",void 0),E(R(r),"_mainHelperSearch",void 0),E(R(r),"_hasSearchWidget",!1),E(R(r),"_hasRecommendWidget",!1),E(R(r),"_insights",void 0),E(R(r),"middleware",[]),E(R(r),"sendEventToInsights",void 0),E(R(r),"status","idle"),E(R(r),"error",void 0),E(R(r),"scheduleSearch",yt(function(){r.started&&r.mainHelper.search()})),E(R(r),"scheduleRender",yt(function(){var e,t=!(0<arguments.length&&void 0!==arguments[0])||arguments[0];null!=(e=r.mainHelper)&&e.hasPendingRequests()||(clearTimeout(r._searchStalledTimer),r._searchStalledTimer=null,t&&(r.status="idle",r.error=void 0)),r.mainIndex.render({instantSearchInstance:R(r)}),r.emit("render")})),E(R(r),"onInternalStateChange",yt(function(){var t=r.mainIndex.getWidgetUiState({});r.middleware.forEach(function(e){e.instance.onStateChange({uiState:t})})})),r.setMaxListeners(100);var t=e.indexName,t=void 0===t?"":t,n=e.numberLocale,i=e.initialUiState,i=void 0===i?{}:i,a=e.routing,a=void 0===a?null:a,o=e.insights,o=void 0===o?void 0:o,c=e.searchFunction,s=e.stalledSearchDelay,s=void 0===s?200:s,u=e.searchClient,u=void 0===u?null:u,l=e.insightsClient,l=void 0===l?null:l,f=e.onStateChange,f=void 0===f?null:f,h=e.future,e=void 0===h?Ti(Ti({},Mi),e.future||{}):h;if(null===u)throw new Error(Ci("The `searchClient` option is required."));if("function"!=typeof u.search)throw new Error("The `searchClient` must implement a `search` method.\n\nSee: https://www.algolia.com/doc/guides/building-search-ui/going-further/backend-search/in-depth/backend-instantsearch/js/");if("function"==typeof u.addAlgoliaAgent&&u.addAlgoliaAgent("instantsearch.js (".concat("4.69.0",")")),l&&"function"!=typeof l)throw new Error(Ci("The `insightsClient` option should be a function."));return r.client=u,r.future=e,r.insightsClient=l,r.indexName=t,r.helper=null,r.mainHelper=null,r.mainIndex=un({indexName:t}),r.onStateChange=f,r.started=!1,r.templatesConfig={helpers:xi({numberLocale:n}),compileOptions:{}},r._stalledSearchDelay=s,r._searchStalledTimer=null,r._createURL=Hi,r._initialUiState=i,r._initialResults=null,r._insights=o,c&&(r._searchFunction=c),r.sendEventToInsights=S,a&&((h="boolean"==typeof a?{}:a).$$internal=!0,r.use(Pi(h))),o&&((u="boolean"==typeof o?{}:o).$$internal=!0,r.use(kn(u))),fr(function(e){return-1<(null==(e=e.window.navigator)||null==(e=e.userAgent)?void 0:e.indexOf("Algolia Crawler"))},{fallback:function(){return!1}})&&r.use(Cn({$$internal:!0})),r}return e=m,(t=[{key:"_isSearchStalled",get:function(){return"stalled"===this.status}},{key:"use",value:function(){for(var r=this,e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=t.map(function(e){var t=Ti({$$type:"__unknown__",$$internal:!1,subscribe:S,started:S,unsubscribe:S,onStateChange:S},e({instantSearchInstance:r}));return r.middleware.push({creator:e,instance:t}),t});return this.started&&i.forEach(function(e){e.subscribe(),e.started()}),this}},{key:"unuse",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.middleware.filter(function(e){return t.includes(e.creator)}).forEach(function(e){return e.instance.unsubscribe()}),this.middleware=this.middleware.filter(function(e){return!t.includes(e.creator)}),this}},{key:"EXPERIMENTAL_use",value:function(){return this.use.apply(this,arguments)}},{key:"addWidget",value:function(e){return this.addWidgets([e])}},{key:"addWidgets",value:function(e){if(!Array.isArray(e))throw new Error(Ci("The `addWidgets` method expects an array of widgets. Please use `addWidget`."));if(e.some(function(e){return"function"!=typeof e.init&&"function"!=typeof e.render}))throw new Error(Ci("The widget definition expects a `render` and/or an `init` method."));return this.mainIndex.addWidgets(e),this}},{key:"removeWidget",value:function(e){return this.removeWidgets([e])}},{key:"removeWidgets",value:function(e){if(!Array.isArray(e))throw new Error(Ci("The `removeWidgets` method expects an array of widgets. Please use `removeWidget`."));if(e.some(function(e){return"function"!=typeof e.dispose}))throw new Error(Ci("The widget definition expects a `dispose` method."));return this.mainIndex.removeWidgets(e),this}},{key:"start",value:function(){var n=this;if(this.started)throw new Error(Ci("The `start` method has already been called once."));var r,e,i=this.mainHelper||y(this.client,this.indexName,void 0,{persistHierarchicalRootCount:this.future.persistHierarchicalRootCount});i.search=function(){return n.status="loading",n.scheduleRender(!1),n._hasSearchWidget&&i.searchOnlyWithDerivedHelpers(),n._hasRecommendWidget&&i.recommend(),i},this._searchFunction&&(r={search:function(){return new Promise(S)}},this._mainHelperSearch=i.search.bind(i),i.search=function(){var t=n.mainIndex.getHelper(),e=y(r,t.state.index,t.state);return e.once("search",function(e){e=e.state;t.overrideStateWithoutTriggeringChangeEvent(e),n._mainHelperSearch()}),e.on("change",function(e){e=e.state;t.setState(e)}),n._searchFunction(e),i}),i.on("error",function(e){var r,e=e.error;e instanceof Error||(r=e,e=Object.keys(r).reduce(function(e,t){return e[t]=r[t],e},new Error(r.message))),e.error=e,n.error=e,n.status="error",n.scheduleRender(!1),n.emit("error",e)}),this.mainHelper=i,this.middleware.forEach(function(e){e.instance.subscribe()}),this.mainIndex.init({instantSearchInstance:this,parent:null,uiState:this._initialUiState}),this._initialResults?(Bt(this.client,this._initialResults),e=this.scheduleSearch,this.scheduleSearch=yt(S),yt(function(){n.scheduleSearch=e})()):0<this.mainIndex.getWidgets().length&&this.scheduleSearch(),this.helper=this.mainIndex.getHelper(),this.started=!0,this.middleware.forEach(function(e){e.instance.started()}),void 0===this._insights&&i.derivedHelpers[0].once("result",function(){n.mainIndex.getScopedResults().some(function(e){e=e.results;return null==e?void 0:e._automaticInsights})&&n.use(kn({$$internal:!0,$$automatic:!0}))})}},{key:"dispose",value:function(){var e;this.scheduleSearch.cancel(),this.scheduleRender.cancel(),clearTimeout(this._searchStalledTimer),this.removeWidgets(this.mainIndex.getWidgets()),this.mainIndex.dispose(),this.started=!1,this.removeAllListeners(),null!=(e=this.mainHelper)&&e.removeAllListeners(),this.mainHelper=null,this.helper=null,this.middleware.forEach(function(e){e.instance.unsubscribe()})}},{key:"scheduleStalledRender",value:function(){var e=this;this._searchStalledTimer||(this._searchStalledTimer=setTimeout(function(){e.status="stalled",e.scheduleRender()},this._stalledSearchDelay))}},{key:"setUiState",value:function(e){var t=this,r=!(1<arguments.length&&void 0!==arguments[1])||arguments[1];if(!this.mainHelper)throw new Error(Ci("The `start` method needs to be called before `setUiState`."));this.mainIndex.refreshUiState();var n="function"==typeof e?e(this.mainIndex.getWidgetUiState({})):e;this.onStateChange&&r?this.onStateChange({uiState:n,setUiState:function(e){pt("function"==typeof e?e(n):e,t.mainIndex),t.scheduleSearch(),t.onInternalStateChange()}}):(pt(n,this.mainIndex),this.scheduleSearch(),this.onInternalStateChange())}},{key:"getUiState",value:function(){return this.started&&this.mainIndex.refreshUiState(),this.mainIndex.getWidgetUiState({})}},{key:"createURL",value:function(){if(this.started)return this._createURL(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{});throw new Error(Ci("The `start` method needs to be called before `createURL`."))}},{key:"refresh",value:function(){if(!this.mainHelper)throw new Error(Ci("The `start` method needs to be called before `refresh`."));this.mainHelper.clearCache().search()}}])&&Ai(e.prototype,t),r&&Ai(e,r),Object.defineProperty(e,"prototype",{writable:!1}),m}();function Li(e,t){return e(t={exports:{}},t.exports),t.exports}var Ui="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},Qi=s.useState,Bi=s.useEffect,qi=s.useLayoutEffect,Vi=s.useDebugValue;function Ji(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!Ui(e,r)}catch(e){return 1}}var X="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var r=t(),n=Qi({inst:{value:r,getSnapshot:t}}),i=n[0].inst,a=n[1];return qi(function(){i.value=r,i.getSnapshot=t,Ji(i)&&a({inst:i})},[e,r,t]),Bi(function(){return Ji(i)&&a({inst:i}),e(function(){Ji(i)&&a({inst:i})})},[e]),Vi(r),r},zi={useSyncExternalStore:void 0!==s.useSyncExternalStore?s.useSyncExternalStore:X},Xi=(Li(function(e,t){}).useSyncExternalStore,Li(function(e){e.exports=zi}).useSyncExternalStore),Ki=["react (".concat(b.version,")"),"react-instantsearch (".concat(W,")"),"react-instantsearch-core (".concat(W,")")],Gi="react-instantsearch-server (".concat(W,")"),Zi=function(e){return e?"next.js (".concat(e,")"):null};function Yi(e){var t,r,n=fn(),i=Ir(),a=dn(),o=kr(),c=null==a?void 0:a.initialResults,s=b.useRef(e),o=i||c||o,u=b.useRef(null),a=(null===(u=a?a.ssrSearchRef:u).current&&((t=new $i(e))._schedule=function(e){t._schedule.queue.push(e),clearTimeout(t._schedule.timer),t._schedule.timer=setTimeout(function(){t._schedule.queue.forEach(function(e){e()}),t._schedule.queue=[]},0)},t._schedule.queue=[],o&&(t._initialResults=c||{}),ea(e.searchClient,[].concat(Ki,[i&&Gi,Zi("undefined"!=typeof window&&(null==(r=window.next)?void 0:r.version)||("undefined"==typeof process||null==(r=process.env)?void 0:r.NEXT_RUNTIME))])),o&&t.start(),i&&i.notifyServer({search:t}),e.routing,u.current=t),u.current),c=s.current,l=(c.indexName!==e.indexName&&(a.helper.setIndex(e.indexName||"").search(),s.current=e),c.searchClient!==e.searchClient&&(ea(e.searchClient,[].concat(Ki,[i&&Gi])),a.mainHelper.setClient(e.searchClient).search(),s.current=e),c.onStateChange!==e.onStateChange&&(a.onStateChange=e.onStateChange,s.current=e),c.searchFunction!==e.searchFunction&&(a._searchFunction=e.searchFunction,s.current=e),c.stalledSearchDelay!==e.stalledSearchDelay&&(a._stalledSearchDelay=null!=(r=e.stalledSearchDelay)?r:200,s.current=e),Sr(c.future,e.future)||(a.future=d(d({},Mi),e.future),s.current=e),b.useRef(null));return Xi(b.useCallback(function(){var e=u.current;return null===l.current?e.started||(e.start(),n()):(clearTimeout(l.current),e._preventWidgetCleanup=!1),function(){clearTimeout(e._schedule.timer),l.current=setTimeout(function(){e.dispose()}),e._preventWidgetCleanup=!0}},[n]),function(){return u.current},function(){return u.current})}function ea(t,e){"function"==typeof t.addAlgoliaAgent&&e.filter(Boolean).forEach(function(e){t.addAlgoliaAgent(e)})}var ta=["children"];var ra=["children"];function na(e){var t=e.children,e=M(e,ra),r=s.useRef(null);return 0===Object.keys(e).length?s.createElement(s.Fragment,null,t):s.createElement(hn.Provider,{value:d(d({},e),{},{ssrSearchRef:r})},t)}function ia(e){return(ia="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function aa(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function F(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?aa(Object(r),!0).forEach(function(e){oa(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):aa(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function oa(e,t,r){return(t=function(e){e=function(e,t){if("object"!==ia(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!==ia(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"===ia(e)?e:String(e)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ca(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,a,o,c=[],s=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);s=!0);}catch(e){u=!0,i=e}finally{try{if(!s&&null!=r.return&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw i}}return c}}(e,t)||function(e,t){var r;if(e)return"string"==typeof e?sa(e,t):"Map"===(r="Object"===(r=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?sa(e,t):void 0}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function sa(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function ua(u){var l=1<arguments.length&&void 0!==arguments[1]?arguments[1]:S,f=(m(u,la()),{});return function(o){var r,e=o||{},n=e.attributes,t=e.separator,i=void 0===t?" > ":t,t=e.rootPath,a=void 0===t?null:t,t=e.transformItems,c=void 0===t?function(e){return e}:t;if(n&&Array.isArray(n)&&0!==n.length)return r=ca(n,1)[0],{$$type:"ais.breadcrumb",init:function(e){u(F(F({},this.getWidgetRenderState(e)),{},{instantSearchInstance:e.instantSearchInstance}),!0)},render:function(e){u(F(F({},this.getWidgetRenderState(e)),{},{instantSearchInstance:e.instantSearchInstance}),!1)},dispose:function(){l()},getRenderState:function(e,t){return F(F({},e),{},{breadcrumb:F(F({},e.breadcrumb),{},oa({},r,this.getWidgetRenderState(t)))})},getWidgetRenderState:function(e){var r=this,n=e.helper,i=e.createURL,t=e.results,e=e.state;var a,e=t&&0!==e.hierarchicalFacets.length?(e=ca(e.hierarchicalFacets,1)[0].name,e=(e=t.getFacetValues(e,{}))&&!Array.isArray(e)&&e.data?e.data:[],c((a=function r(e){return e.reduce(function(e,t){return e=t.isRefined&&(e.push({label:t.name,value:t.escapedValue}),Array.isArray(t.data))?e.concat(r(t.data)):e},[])}(e)).map(function(e,t){return{label:e.label,value:t+1===a.length?null:a[t+1].value}}),{results:t})):[];return f.createURL||(f.createURL=function(t){return i(function(e){return r.getWidgetUiState(e,{searchParameters:s(n.state,t),helper:n})})}),f.refine||(f.refine=function(e){n.setState(s(n.state,e)).search()}),{canRefine:0<e.length,createURL:f.createURL,items:e,refine:f.refine,widgetParams:o}},getWidgetUiState:function(e,t){var t=t.searchParameters.getHierarchicalFacetBreadcrumb(r);return e=F(F({},e),{},{hierarchicalMenu:F(F({},e.hierarchicalMenu),{},oa({},r,t))}),t=r,e.hierarchicalMenu&&(e.hierarchicalMenu[t]&&e.hierarchicalMenu[t].length||delete e.hierarchicalMenu[t],0===Object.keys(e.hierarchicalMenu).length)&&delete e.hierarchicalMenu,e},getWidgetSearchParameters:function(e,t){t=t.uiState,t=t.hierarchicalMenu&&t.hierarchicalMenu[r];if(e.isConjunctiveFacet(r)||e.isDisjunctiveFacet(r))return e;e.isHierarchicalFacet(r)&&e.getHierarchicalFacetByName(r);e=e.removeHierarchicalFacet(r).addHierarchicalFacet({name:r,attributes:n,separator:i,rootPath:a});return t?e.addHierarchicalFacetRefinement(r,t.join(i)):e.setQueryParameters({hierarchicalFacetsRefinements:F(F({},e.hierarchicalFacetsRefinements),{},oa({},r,[]))})}};throw new Error(la("The `attributes` option expects an array of strings."));function s(e,t){return t?e.resetPage().toggleFacetRefinement(r,t):0===(t=e.getHierarchicalFacetBreadcrumb(r)).length?e:e.resetPage().toggleFacetRefinement(r,t[0])}}}var la=i({name:"breadcrumb",connector:!0});function fa(e){return(fa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ha(e){return function(e){if(Array.isArray(e))return da(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){var r;if(e)return"string"==typeof e?da(e,t):"Map"===(r="Object"===(r=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?da(e,t):void 0}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function da(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function ma(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function pa(n){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?ma(Object(i),!0).forEach(function(e){var t,r;t=n,r=i[e=e],(e=function(e){e=function(e,t){if("object"!==fa(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!==fa(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"===fa(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):ma(Object(i)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(i,e))})}return n}function ga(r){var o=1<arguments.length&&void 0!==arguments[1]?arguments[1]:S;return m(r,ya()),function(n){var e=n||{},t=e.includedAttributes,c=void 0===t?[]:t,t=e.excludedAttributes,s=void 0===t?["query"]:t,t=e.transformItems,u=void 0===t?function(e){return e}:t;if(n&&n.includedAttributes&&n.excludedAttributes)throw new Error(ya("The options `includedAttributes` and `excludedAttributes` cannot be used together."));function i(){return l.refine()}function a(){return l.createURL()}var l={refine:S,createURL:function(){return""},attributesToClear:[]};return{$$type:"ais.clearRefinements",init:function(e){var t=e.instantSearchInstance;r(pa(pa({},this.getWidgetRenderState(e)),{},{instantSearchInstance:t}),!0)},render:function(e){var t=e.instantSearchInstance;r(pa(pa({},this.getWidgetRenderState(e)),{},{instantSearchInstance:t}),!1)},dispose:function(){o()},getRenderState:function(e,t){return pa(pa({},e),{},{clearRefinements:this.getWidgetRenderState(t)})},getWidgetRenderState:function(e){var t=e.createURL,r=e.scopedResults,o=e.results,e=(l.attributesToClear=r.reduce(function(e,t){return e.concat((t=(e={scopedResult:t,includedAttributes:c,excludedAttributes:s,transformItems:u,results:o}).scopedResult,r=e.includedAttributes,n=e.excludedAttributes,i=e.transformItems,e=e.results,a=-1!==r.indexOf("query")||-1===n.indexOf("query"),{helper:t.helper,items:i(Xt(It(t.results,t.helper.state,a).map(function(e){return e.attribute}).filter(function(e){return 0===r.length||-1!==r.indexOf(e)}).filter(function(e){return"query"===e&&a||-1===n.indexOf(e)})),{results:e})}));var r,n,i,a},[]),l.refine=function(){l.attributesToClear.forEach(function(e){var t=e.helper,e=e.items;t.setState(We({helper:t,attributesToClear:e})).search()})},l.createURL=function(){return t(tr.apply(void 0,ha(l.attributesToClear.map(function(e){return We({helper:e.helper,attributesToClear:e.items})}))))},l.attributesToClear.some(function(e){return 0<e.items.length}));return{canRefine:e,hasRefinements:e,refine:i,createURL:a,widgetParams:n}}}}}var ya=i({name:"clear-refinements",connector:!0});function va(e){return(va="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ba(e){return function(e){if(Array.isArray(e))return Sa(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){var r;if(e)return"string"==typeof e?Sa(e,t):"Map"===(r="Object"===(r=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Sa(e,t):void 0}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Sa(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Oa(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function ja(n){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?Oa(Object(i),!0).forEach(function(e){var t,r;t=n,r=i[e=e],(e=function(e){e=function(e,t){if("object"!==va(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!==va(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"===va(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):Oa(Object(i)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(i,e))})}return n}function wa(r){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:S;return m(r,Pa()),function(a){if((a||{}).includedAttributes&&(a||{}).excludedAttributes)throw new Error(Pa("The options `includedAttributes` and `excludedAttributes` cannot be used together."));var e=a||{},o=e.includedAttributes,t=e.excludedAttributes,c=void 0===t?["query"]:t,t=e.transformItems,s=void 0===t?function(e){return e}:t;return{$$type:"ais.currentRefinements",init:function(e){var t=e.instantSearchInstance;r(ja(ja({},this.getWidgetRenderState(e)),{},{instantSearchInstance:t}),!0)},render:function(e){var t=e.instantSearchInstance;r(ja(ja({},this.getWidgetRenderState(e)),{},{instantSearchInstance:t}),!1)},dispose:function(){n()},getRenderState:function(e,t){return ja(ja({},e),{},{currentRefinements:this.getWidgetRenderState(t)})},getWidgetRenderState:function(e){var r=e.results,t=e.scopedResults,n=e.createURL,i=e.helper;e=r?t.reduce(function(e,t){return e.concat(s(Ra({results:t.results,helper:t.helper,indexId:t.indexId,includedAttributes:o,excludedAttributes:c}),{results:r}))},[]):s(Ra({results:{},helper:i,indexId:i.state.index,includedAttributes:o,excludedAttributes:c}),{results:r});return{items:e,canRefine:0<e.length,refine:function(e){return Fa(i,e)},createURL:function(e){return n(Ea(i.state,e))},widgetParams:a}}}}}var Pa=i({name:"current-refinements",connector:!0});function Ra(e){var t=e.results,r=e.helper,n=e.indexId,i=e.includedAttributes,a=e.excludedAttributes,e=-1!==(i||[]).indexOf("query")||-1===(a||[]).indexOf("query"),o=i?function(e){return-1!==i.indexOf(e.attribute)}:function(e){return-1===a.indexOf(e.attribute)},c=It(t,r.state,e).map(xa).filter(o);return c.reduce(function(e,t){return[].concat(ba(e.filter(function(e){return e.attribute!==t.attribute})),[{indexName:r.state.index,indexId:n,attribute:t.attribute,label:t.attribute,refinements:c.filter(function(e){return e.attribute===t.attribute}).sort(function(e,t){return"numeric"===e.type?e.value-t.value:0}),refine:function(e){return Fa(r,e)}}])},[])}function Ea(e,t){switch(e=e.resetPage(),t.type){case"facet":return e.removeFacetRefinement(t.attribute,String(t.value));case"disjunctive":return e.removeDisjunctiveFacetRefinement(t.attribute,String(t.value));case"hierarchical":return e.removeHierarchicalFacetRefinement(t.attribute);case"exclude":return e.removeExcludeRefinement(t.attribute,String(t.value));case"numeric":return e.removeNumericRefinement(t.attribute,t.operator,String(t.value));case"tag":return e.removeTagRefinement(String(t.value));case"query":return e.setQueryParameter("query","");default:return e}}function Fa(e,t){e.setState(Ea(e.state,t)).search()}function xa(e){var t=function(e){if("numeric"===e.type)return Number(e.name);if("escapedValue"in e)return e.escapedValue;return e.name}(e),r=e.operator?"".concat(function(e){switch(e){case">=":return"â¥";case"<=":return"â¤";default:return e}}(e.operator)," ").concat(e.name):e.name,t={attribute:e.attribute,type:e.type,value:t,label:r};return void 0!==e.operator&&(t.operator=e.operator),void 0!==e.count&&(t.count=e.count),void 0!==e.exhaustive&&(t.exhaustive=e.exhaustive),t}function Ia(e){return(Ia="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _a(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function Ta(n){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?_a(Object(i),!0).forEach(function(e){var t,r;t=n,r=i[e=e],(e=function(e){e=function(e,t){if("object"!==Ia(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!==Ia(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"===Ia(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):_a(Object(i)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(i,e))})}return n}function Aa(u){var l=1<arguments.length&&void 0!==arguments[1]?arguments[1]:S;return m(u,Da()),function(t){var e=t||{},r=e.escapeHTML,n=void 0===r||r,r=e.transformItems,i=void 0===r?function(e){return e}:r,a=e.objectIDs,o=e.limit,c=e.threshold,s=e.queryParameters;if(a&&0!==a.length)return{dependsOn:"recommend",$$type:"ais.frequentlyBoughtTogether",init:function(e){u(Ta(Ta({},this.getWidgetRenderState(e)),{},{instantSearchInstance:e.instantSearchInstance}),!0)},render:function(e){var t=this.getWidgetRenderState(e);u(Ta(Ta({},t),{},{instantSearchInstance:e.instantSearchInstance}),!1)},getRenderState:function(e){return e},getWidgetRenderState:function(e){e=e.results;return null==e?{items:[],widgetParams:t}:(n&&0<e.hits.length&&(e.hits=Ze(e.hits)),{items:i(e.hits,{results:e}),widgetParams:t})},dispose:function(e){e=e.recommendState;return l(),e.removeParams(this.$$id)},getWidgetParameters:function(e){var r=this;return a.reduce(function(e,t){return e.addFrequentlyBoughtTogether({objectID:t,threshold:c,maxRecommendations:o,queryParameters:Ta(Ta({},s),n?_:{}),$$id:r.$$id})},e.removeParams(this.$$id))}};throw new Error(Da("The `objectIDs` option is required."))}}var Da=i({name:"frequently-bought-together",connector:!0});function ka(e){return(ka="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Na(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function Wa(n){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?Na(Object(i),!0).forEach(function(e){var t,r;t=n,r=i[e=e],(e=function(e){e=function(e,t){if("object"!==ka(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!==ka(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"===ka(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):Na(Object(i)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(i,e))})}return n}var Ca=i({name:"geo-search",connector:!0});function Ha(e){return e.insideBoundingBox||""}function Ma(e,t){return e.setQueryParameter("insideBoundingBox",t)}function $a(g){var r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:S;return m(g,Ca()),function(c){function s(e){if(e.aroundLatLng){var e=e.aroundLatLng,t=e.match(jt);if(t)return{lat:parseFloat(t[1]),lng:parseFloat(t[2])};throw new Error('Invalid value for "aroundLatLng" parameter: "'.concat(e,'"'))}}function u(){return p.internalToggleRefineOnMapMove()}function a(e,t){return function(){p.isRefineOnMapMove=!p.isRefineOnMapMove,t(e)}}function l(){return p.isRefineOnMapMove}function f(){return p.internalSetMapMoveSinceLastRefine()}function o(t,r){return function(){var e=!0!==p.hasMapMoveSinceLastRefine;p.hasMapMoveSinceLastRefine=!0,e&&r(t)}}function h(){return p.hasMapMoveSinceLastRefine}var d,e=c||{},t=e.enableRefineOnMapMove,e=e.transformItems,m=void 0===e?function(e){return e}:e,p={isRefineOnMapMove:void 0===t||t,hasMapMoveSinceLastRefine:!1,lastRefinePosition:"",lastRefineBoundingBox:"",internalToggleRefineOnMapMove:S,internalSetMapMoveSinceLastRefine:S};return{$$type:La,init:function(e){var t=e.instantSearchInstance;p.internalToggleRefineOnMapMove=a(e,S),p.internalSetMapMoveSinceLastRefine=o(e,S),g(Wa(Wa({},this.getWidgetRenderState(e)),{},{instantSearchInstance:t}),!0)},render:function(e){var t=e.helper,r=e.instantSearchInstance,t=t.state,n=Boolean(t.aroundLatLng)&&Boolean(p.lastRefinePosition)&&t.aroundLatLng!==p.lastRefinePosition,i=!t.insideBoundingBox&&Boolean(p.lastRefineBoundingBox)&&t.insideBoundingBox!==p.lastRefineBoundingBox,n=((n||i)&&(p.hasMapMoveSinceLastRefine=!1),p.lastRefinePosition=t.aroundLatLng||"",p.lastRefineBoundingBox=Ha(t),p.internalToggleRefineOnMapMove=a(e,this.render.bind(this)),p.internalSetMapMoveSinceLastRefine=o(e,this.render.bind(this)),this.getWidgetRenderState(e));d("view:internal",n.items),g(Wa(Wa({},n),{},{instantSearchInstance:r}),!1)},getWidgetRenderState:function(e){var t,r,n,i=e.helper,a=e.results,e=e.instantSearchInstance,o=i.state,a=a?m(a.hits.filter(function(e){return e._geoloc}),{results:a}):[];return d=d||dt({instantSearchInstance:e,getIndex:function(){return i.getIndex()},widgetType:La}),{items:a,position:s(o),currentRefinement:(e=o).insideBoundingBox&&wt(e.insideBoundingBox),refine:function(e){var t=e.northEast,e=e.southWest,t=[t.lat,t.lng,e.lat,e.lng].join();n.setState(Ma(n.state,t).resetPage()).search(),p.hasMapMoveSinceLastRefine=!1,p.lastRefineBoundingBox=t},sendEvent:d,clearMapRefinement:(r=n=i,function(){r.setQueryParameter("insideBoundingBox",void 0).search()}),isRefinedWithMap:(t=o,function(){return Boolean(t.insideBoundingBox)}),toggleRefineOnMapMove:u,isRefineOnMapMove:l,setMapMoveSinceLastRefine:f,hasMapMoveSinceLastRefine:h,widgetParams:c}},getRenderState:function(e,t){return Wa(Wa({},e),{},{geoSearch:this.getWidgetRenderState(t)})},dispose:function(e){e=e.state;return r(),e.setQueryParameter("insideBoundingBox",void 0)},getWidgetUiState:function(e,t){t=Ha(t.searchParameters);return!t||e&&e.geoSearch&&e.geoSearch.boundingBox===t?e:Wa(Wa({},e),{},{geoSearch:{boundingBox:t}})},getWidgetSearchParameters:function(e,t){t=t.uiState;return t&&t.geoSearch?Ma(e,t.geoSearch.boundingBox):e.setQueryParameter("insideBoundingBox",void 0)}}}}var La="ais.geoSearch";function Ua(e){return(Ua="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Qa=["name","escapedValue","data","path"];function Ba(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function x(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Ba(Object(r),!0).forEach(function(e){qa(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Ba(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function qa(e,t,r){return(t=function(e){e=function(e,t){if("object"!==Ua(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!==Ua(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"===Ua(e)?e:String(e)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Va(e,t){if(null==e)return{};var r,n=function(e,t){if(null==e)return{};var r,n,i={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],0<=t.indexOf(r)||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols)for(var i=Object.getOwnPropertySymbols(e),a=0;a<i.length;a++)r=i[a],0<=t.indexOf(r)||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r]);return n}function Ja(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,a,o,c=[],s=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);s=!0);}catch(e){u=!0,i=e}finally{try{if(!s&&null!=r.return&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw i}}return c}}(e,t)||function(e,t){var r;if(e)return"string"==typeof e?za(e,t):"Map"===(r="Object"===(r=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?za(e,t):void 0}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function za(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Xa(s){var r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:S;return m(s,Ka()),function(u){var e=u||{},l=e.attributes,t=e.separator,f=void 0===t?" > ":t,t=e.rootPath,n=void 0===t?null:t,t=e.showParentLevel,i=void 0===t||t,t=e.limit,a=void 0===t?10:t,t=e.showMore,h=void 0!==t&&t,t=e.showMoreLimit,o=void 0===t?20:t,t=e.sortBy,d=void 0===t?Ga:t,t=e.transformItems,m=void 0===t?function(e){return e}:t;if(!l||!Array.isArray(l)||0===l.length)throw new Error(Ka("The `attributes` option expects an array of strings."));if(!0===h&&o<=a)throw new Error(Ka("The `showMoreLimit` option must be greater than `limit`."));var p,g,y=Ja(l,1)[0],c=function(){};function v(){c()}var b=!1;function S(){return b?o:a}return{$$type:"ais.hierarchicalMenu",init:function(e){var t=e.instantSearchInstance;s(x(x({},this.getWidgetRenderState(e)),{},{instantSearchInstance:t}),!0)},render:function(e){var t,r,n=e.instantSearchInstance;t=e,c=function(){b=!b,r.render(t)},s(x(x({},(r=this).getWidgetRenderState(e)),{},{instantSearchInstance:n}),!1)},dispose:function(e){e=e.state;return r(),e.removeHierarchicalFacet(y).setQueryParameter("maxValuesPerFacet",void 0)},getRenderState:function(e,t){return x(x({},e),{},{hierarchicalMenu:x(x({},e.hierarchicalMenu),{},qa({},y,this.getWidgetRenderState(t)))})},getWidgetRenderState:function(e){var t,r=this,n=e.results,i=e.state,a=e.createURL,o=e.instantSearchInstance,c=e.helper,e=[],s=!1;return p=p||at({instantSearchInstance:o,helper:c,attribute:function(e){e=e.split(f).length-1;return l[e]},widgetType:this.$$type}),g=g||function(e){p("click:internal",e),c.toggleFacetRefinement(y,e).search()},n&&(o=(o=n.getFacetValues(y,{sortBy:d,facetOrdering:d===Ga}))&&!Array.isArray(o)&&o.data?o.data:[],t=(i.maxValuesPerFacet||0)>S()?o.length<=S():o.length<S(),s=h&&(b||!t),e=m(function i(e){return e.slice(0,S()).map(function(e){var t=e.name,r=e.escapedValue,n=e.data,e=(e.path,x(x({},Va(e,Qa)),{},{value:r,label:t,data:null}));return Array.isArray(n)&&(e.data=i(n)),e})}(o),{results:n})),{items:e,refine:g,canRefine:0<e.length,createURL:function(t){return a(function(e){return r.getWidgetUiState(e,{searchParameters:i.resetPage().toggleFacetRefinement(y,t),helper:c})})},sendEvent:p,widgetParams:u,isShowingMore:b,toggleShowMore:v,canToggleShowMore:s}},getWidgetUiState:function(e,t){var t=t.searchParameters.getHierarchicalFacetBreadcrumb(y);return e=x(x({},e),{},{hierarchicalMenu:x(x({},e.hierarchicalMenu),{},qa({},y,t))}),t=y,e.hierarchicalMenu&&(e.hierarchicalMenu[t]&&0!==e.hierarchicalMenu[t].length||delete e.hierarchicalMenu[t],0===Object.keys(e.hierarchicalMenu).length)&&delete e.hierarchicalMenu,e},getWidgetSearchParameters:function(e,t){t=t.uiState,t=t.hierarchicalMenu&&t.hierarchicalMenu[y];if(e.isConjunctiveFacet(y)||e.isDisjunctiveFacet(y))return e;e.isHierarchicalFacet(y)&&e.getHierarchicalFacetByName(y);var e=e.removeHierarchicalFacet(y).addHierarchicalFacet({name:y,attributes:l,separator:f,rootPath:n,showParentLevel:i}),r=e.maxValuesPerFacet||0,r=Math.max(r,h?o:a),e=e.setQueryParameter("maxValuesPerFacet",r);return t?e.addHierarchicalFacetRefinement(y,t.join(f)):e.setQueryParameters({hierarchicalFacetsRefinements:x(x({},e.hierarchicalFacetsRefinements),{},qa({},y,[]))})}}}}var Ka=i({name:"hierarchical-menu",connector:!0}),Ga=["name:asc"];function Za(e){return(Za="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ya(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function eo(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Ya(Object(r),!0).forEach(function(e){to(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Ya(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function to(e,t,r){return(t=function(e){e=function(e,t){if("object"!==Za(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!==Za(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"===Za(e)?e:String(e)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ro(r){var s=1<arguments.length&&void 0!==arguments[1]?arguments[1]:S;return m(r,no()),function(n){var i,a,e=n||{},t=e.escapeHTML,o=void 0===t||t,t=e.transformItems,c=void 0===t?function(e){return e}:t;return{$$type:"ais.hits",init:function(e){r(eo(eo({},this.getWidgetRenderState(e)),{},{instantSearchInstance:e.instantSearchInstance}),!0)},render:function(e){var t=this.getWidgetRenderState(e);r(eo(eo({},t),{},{instantSearchInstance:e.instantSearchInstance}),!1),t.sendEvent("view:internal",t.hits)},getRenderState:function(e,t){return eo(eo({},e),{},{hits:this.getWidgetRenderState(t)})},getWidgetRenderState:function(e){var t=e.results,r=e.helper,e=e.instantSearchInstance;if(i=i||dt({instantSearchInstance:e,getIndex:function(){return r.getIndex()},widgetType:this.$$type}),a=a||mt({getIndex:function(){return r.getIndex()},widgetType:this.$$type,instantSearchInstance:e}),!t)return{hits:[],results:void 0,banner:void 0,sendEvent:i,bindEvent:a,widgetParams:n};o&&0<t.hits.length&&(t.hits=Ze(t.hits));var e=Ct(Dt(t.hits,t.page,t.hitsPerPage),t.queryID);return{hits:c(e,{results:t}),results:t,banner:null==(e=t.renderingContent)||null==(t=e.widgets)||null==(e=t.banners)?void 0:e[0],sendEvent:i,bindEvent:a,widgetParams:n}},dispose:function(e){e=e.state;return s(),o?e.setQueryParameters(Object.keys(_).reduce(function(e,t){return eo(eo({},e),{},to({},t,void 0))},{})):e},getWidgetSearchParameters:function(e){return o?e.setQueryParameters(_):e}}}}var no=i({name:"hits",connector:!0});function io(e){return(io="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ao(e){return function(e){if(Array.isArray(e))return oo(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){var r;if(e)return"string"==typeof e?oo(e,t):"Map"===(r="Object"===(r=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?oo(e,t):void 0}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function oo(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function co(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function so(n){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?co(Object(i),!0).forEach(function(e){var t,r;t=n,r=i[e=e],(e=function(e){e=function(e,t){if("object"!==io(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!==io(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"===io(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):co(Object(i)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(i,e))})}return n}function uo(n){var i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:S;return m(n,lo()),function(o){var e=o||{},t=e.items,e=e.transformItems,c=void 0===e?function(e){return e}:e;if(!Array.isArray(t))throw new Error(lo("The `items` option expects an array of objects."));var s=t,e=s.filter(function(e){return!0===e.default});if(0===e.length)throw new Error(lo("A default value must be specified in `items`."));if(1<e.length)throw new Error(lo("More than one default value is specified in `items`."));var r=e[0],u=function(t){return function(e){return(e||0===e?t.setQueryParameter("hitsPerPage",e):t.setQueryParameter("hitsPerPage",void 0)).search()}},l=function(e){var r=e.state,n=e.createURL,i=e.getWidgetUiState,a=e.helper;return function(t){return n(function(e){return i(e,{searchParameters:r.resetPage().setQueryParameter("hitsPerPage",t||0===t?t:void 0),helper:a})})}};return{$$type:"ais.hitsPerPage",init:function(e){var t=e.state,r=e.instantSearchInstance;s.some(function(e){return Number(t.hitsPerPage)===Number(e.value)})||(s=[{value:"",label:""}].concat(ao(s))),n(so(so({},this.getWidgetRenderState(e)),{},{instantSearchInstance:r}),!0)},render:function(e){var t=e.instantSearchInstance;n(so(so({},this.getWidgetRenderState(e)),{},{instantSearchInstance:t}),!1)},dispose:function(e){e=e.state;return i(),e.setQueryParameter("hitsPerPage",void 0)},getRenderState:function(e,t){return so(so({},e),{},{hitsPerPage:this.getWidgetRenderState(t)})},getWidgetRenderState:function(e){var t,r=e.state,n=e.results,i=e.createURL,e=e.helper,a=!!n&&0<n.nbHits;return{items:c((t=r.hitsPerPage,s.map(function(e){return so(so({},e),{},{isRefined:Number(e.value)===Number(t)})})),{results:n}),refine:u(e),createURL:l({state:r,createURL:i,getWidgetUiState:this.getWidgetUiState,helper:e}),hasNoResults:!a,canRefine:a,widgetParams:o}},getWidgetUiState:function(e,t){t=t.searchParameters.hitsPerPage;return void 0===t||t===r.value?e:so(so({},e),{},{hitsPerPage:t})},getWidgetSearchParameters:function(e,t){t=t.uiState;return e.setQueryParameters({hitsPerPage:t.hitsPerPage||r.value})}}}}var lo=i({name:"hits-per-page",connector:!0});function fo(e){return(fo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var ho=["page"],mo=["clickAnalytics","userToken"];function po(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function I(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?po(Object(r),!0).forEach(function(e){go(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):po(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function go(e,t,r){return(t=function(e){e=function(e,t){if("object"!==fo(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!==fo(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"===fo(e)?e:String(e)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function yo(e){return function(e){if(Array.isArray(e))return vo(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){var r;if(e)return"string"==typeof e?vo(e,t):"Map"===(r="Object"===(r=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?vo(e,t):void 0}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function vo(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function bo(e,t){if(null==e)return{};var r,n=function(e,t){if(null==e)return{};var r,n,i={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],0<=t.indexOf(r)||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols)for(var i=Object.getOwnPropertySymbols(e),a=0;a<i.length;a++)r=i[a],0<=t.indexOf(r)||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r]);return n}var So=i({name:"infinite-hits",connector:!0});function Oo(e){e=e||{};e.page;return bo(e,ho)}function jo(e){e=e||{};e.clickAnalytics,e.userToken;return bo(e,mo)}function wo(i){var a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:S;return m(i,So()),function(d){var r,n,m,p,g,y,e=d||{},t=e.escapeHTML,v=void 0===t||t,t=e.transformItems,b=void 0===t?function(e){return e}:t,t=e.cache,S=void 0===t?(n=r=null,{read:function(e){e=e.state;return Jt(n,Oo(e))?r:null},write:function(e){var t=e.state,e=e.hits;n=Oo(t),r=e}}):t,O=function(e,t){e=e.page,e=void 0===e?0:e,t=Object.keys(t).map(Number);return 0===t.length?e:Math.min.apply(Math,[e].concat(yo(t)))},j=function(e,t){e=e.page,e=void 0===e?0:e,t=Object.keys(t).map(Number);return 0===t.length?e:Math.max.apply(Math,[e].concat(yo(t)))};return{$$type:"ais.infiniteHits",init:function(e){i(I(I({},this.getWidgetRenderState(e)),{},{instantSearchInstance:e.instantSearchInstance}),!0)},render:function(e){var t=e.instantSearchInstance,e=this.getWidgetRenderState(e);i(I(I({},e),{},{instantSearchInstance:t}),!1),g("view:internal",e.currentPageHits)},getRenderState:function(e,t){return I(I({},e),{},{infiniteHits:this.getWidgetRenderState(t)})},getWidgetRenderState:function(e){var t,r,n,i,a=e.results,o=e.helper,c=e.parent,s=e.state,e=e.instantSearchInstance,u=[],c=c.getPreviousState()||s,s=S.read({state:jo(c)})||{},l=a?(f=void 0===(f=c.page)?0:f,v&&0<a.hits.length&&(a.hits=Ze(a.hits)),h=Ct(Dt(a.hits,a.page,a.hitsPerPage),a.queryID),h=b(h,{results:a}),t=!1,zt(e.mainIndex,function(e){!t&&e.getWidgets().some(function(e){return"ais.dynamicWidgets"===e.$$type})&&(t=!0)}),l=!(null!=(l=c.disjunctiveFacets)&&l.length||(c.facets||[]).filter(function(e){return"*"!==e}).length||null!=(l=c.hierarchicalFacets)&&l.length),void 0!==s[f]||a.__isArtificial||"idle"!==e.status||t&&l||(s[f]=h,S.write({state:jo(c),hits:s})),u=h,0===O(c,s)):(m=function(){n.overrideStateWithoutTriggeringChangeEvent(I(I({},n.state),{},{page:O(n.state,S.read({state:jo(n.state)})||{})-1})).searchWithoutTriggeringOnStateChange()},r=n=o,p=function(){r.setPage(j(r.state,S.read({state:jo(r.state)})||{})+1).search()},g=dt({instantSearchInstance:e,getIndex:function(){return o.getIndex()},widgetType:this.$$type}),y=mt({getIndex:function(){return o.getIndex()},widgetType:this.$$type,instantSearchInstance:e}),void 0===c.page||0===O(c,s)),f=(i=s,Object.keys(i).map(Number).sort(function(e,t){return e-t}).reduce(function(e,t){return e.concat(i[t])},[])),h=!a||a.nbPages<=j(c,s)+1;return{hits:f,currentPageHits:u,sendEvent:g,bindEvent:y,results:a,showPrevious:m,showMore:p,isFirstPage:l,isLastPage:h,widgetParams:d}},dispose:function(e){e=e.state,a(),e=e.setQueryParameter("page",void 0);return v?e.setQueryParameters(Object.keys(_).reduce(function(e,t){return I(I({},e),{},go({},t,void 0))},{})):e},getWidgetUiState:function(e,t){t=t.searchParameters.page||0;return t?I(I({},e),{},{page:t+1}):e},getWidgetSearchParameters:function(e,t){var t=t.uiState,r=e,e=(v&&(r=e.setQueryParameters(_)),t.page?t.page-1:0);return r.setQueryParameter("page",e)}}}}var Po=["name","escapedValue","path"];function Ro(e){return(Ro="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Eo(e,t){if(null==e)return{};var r,n=function(e,t){if(null==e)return{};var r,n,i={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],0<=t.indexOf(r)||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols)for(var i=Object.getOwnPropertySymbols(e),a=0;a<i.length;a++)r=i[a],0<=t.indexOf(r)||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r]);return n}function Fo(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,a,o,c=[],s=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);s=!0);}catch(e){u=!0,i=e}finally{try{if(!s&&null!=r.return&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw i}}return c}}(e,t)||function(e,t){var r;if(e)return"string"==typeof e?xo(e,t):"Map"===(r="Object"===(r=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?xo(e,t):void 0}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function xo(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Io(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function T(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Io(Object(r),!0).forEach(function(e){_o(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Io(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function _o(e,t,r){return(t=function(e){e=function(e,t){if("object"!==Ro(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!==Ro(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"===Ro(e)?e:String(e)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function To(r){var a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:S;return m(r,Ao()),function(l){var f,h,d,e=l||{},m=e.attribute,t=e.limit,n=void 0===t?10:t,t=e.showMore,p=void 0!==t&&t,t=e.showMoreLimit,i=void 0===t?20:t,t=e.sortBy,g=void 0===t?Do:t,t=e.transformItems,y=void 0===t?function(e){return e}:t;if(!m)throw new Error(Ao("The `attribute` option is required."));if(!0===p&&i<=n)throw new Error(Ao("The `showMoreLimit` option must be greater than `limit`."));var v=!1,b=function(){};function S(){b()}function O(){return v?i:n}return{$$type:"ais.menu",init:function(e){var t=e.instantSearchInstance;r(T(T({},this.getWidgetRenderState(e)),{},{instantSearchInstance:t}),!0)},render:function(e){var t=e.instantSearchInstance;r(T(T({},this.getWidgetRenderState(e)),{},{instantSearchInstance:t}),!1)},dispose:function(e){e=e.state;return a(),e.removeHierarchicalFacet(m).setQueryParameter("maxValuesPerFacet",void 0)},getRenderState:function(e,t){return T(T({},e),{},{menu:T(T({},e.menu),{},_o({},m,this.getWidgetRenderState(t)))})},getWidgetRenderState:function(e){var t,r,n=this,i=e.results,a=e.createURL,o=e.instantSearchInstance,c=e.helper,s=[],u=!1;return f=f||at({instantSearchInstance:o,helper:c,attribute:m,widgetType:this.$$type}),h=h||function(t){return a(function(e){return n.getWidgetUiState(e,{searchParameters:c.state.resetPage().toggleFacetRefinement(m,t),helper:c})})},d=d||function(e){var t=Fo(c.getHierarchicalFacetBreadcrumb(m),1)[0];f("click:internal",e||t),c.toggleFacetRefinement(m,e||t).search()},e.results&&(t=e,r=this,b=function(){v=!v,r.render(t)}),i&&(e=(o=i.getFacetValues(m,{sortBy:g,facetOrdering:g===Do}))&&!Array.isArray(o)&&o.data?o.data:[],u=p&&(v||e.length>O()),s=y(e.slice(0,O()).map(function(e){var t=e.name,r=e.escapedValue;e.path;return T(T({},Eo(e,Po)),{},{label:t,value:r})}),{results:i})),{items:s,createURL:h,refine:d,sendEvent:f,canRefine:0<s.length,widgetParams:l,isShowingMore:v,toggleShowMore:S,canToggleShowMore:u}},getWidgetUiState:function(e,t){var t=Fo(t.searchParameters.getHierarchicalFacetBreadcrumb(m),1)[0];return e=T(T({},e),{},{menu:T(T({},e.menu),{},_o({},m,t))}),t=m,e.menu&&(void 0===e.menu[t]&&delete e.menu[t],0===Object.keys(e.menu).length)&&delete e.menu,e},getWidgetSearchParameters:function(e,t){var r,t=t.uiState,t=t.menu&&t.menu[m];return e.isConjunctiveFacet(m)||e.isDisjunctiveFacet(m)?e:(r=(e=e.removeHierarchicalFacet(m).addHierarchicalFacet({name:m,attributes:[m]})).maxValuesPerFacet||0,r=Math.max(r,p?i:n),e=e.setQueryParameter("maxValuesPerFacet",r),t?e.addHierarchicalFacetRefinement(m,t):e.setQueryParameters({hierarchicalFacetsRefinements:T(T({},e.hierarchicalFacetsRefinements),{},_o({},m,[]))}))}}}}var Ao=i({name:"menu",connector:!0}),Do=["isRefined","name:asc"];function ko(e){return(ko="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function No(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,a,o,c=[],s=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);s=!0);}catch(e){u=!0,i=e}finally{try{if(!s&&null!=r.return&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw i}}return c}}(e,t)||Wo(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Wo(e,t){var r;if(e)return"string"==typeof e?Co(e,t):"Map"===(r="Object"===(r=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Co(e,t):void 0}function Co(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Ho(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function A(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Ho(Object(r),!0).forEach(function(e){Mo(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Ho(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function Mo(e,t,r){return(t=function(e){e=function(e,t){if("object"!==ko(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!==ko(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"===ko(e)?e:String(e)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $o(r){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:S;return m(r,Lo()),function(h){var d,e=h||{},t=e.attribute,m=void 0===t?"":t,t=e.items,p=void 0===t?[]:t,t=e.transformItems,g=void 0===t?function(e){return e}:t;if(""===m)throw new Error(Lo("The `attribute` option is required."));if(p&&0!==p.length)return d={},{$$type:Uo,init:function(e){var t=e.instantSearchInstance;r(A(A({},this.getWidgetRenderState(e)),{},{instantSearchInstance:t}),!0)},render:function(e){var t=e.instantSearchInstance;r(A(A({},this.getWidgetRenderState(e)),{},{instantSearchInstance:t}),!1)},dispose:function(e){e=e.state;return n(),e.removeNumericRefinement(m)},getWidgetUiState:function(e,t){var t=t.searchParameters.getNumericRefinements(m),r=t["="]&&t["="][0];return r||0===r?A(A({},e),{},{numericMenu:A(A({},e.numericMenu),{},Mo({},m,"".concat(t["="])))}):(r=t[">="]&&t[">="][0]||"",t=t["<="]&&t["<="][0]||"",e=A(A({},e),{},{numericMenu:A(A({},e.numericMenu),{},Mo({},m,"".concat(r,":").concat(t)))}),r=m,e.numericMenu&&(":"===e.numericMenu[r]&&delete e.numericMenu[r],0===Object.keys(e.numericMenu).length)&&delete e.numericMenu,e)},getWidgetSearchParameters:function(e,t){var r,t=t.uiState,t=t.numericMenu&&t.numericMenu[m],e=e.setQueryParameters({numericRefinements:A(A({},e.numericRefinements),{},Mo({},m,{}))});return t?-1===t.indexOf(":")?e.addNumericRefinement(m,"=",Number(t)):(r=(t=No(t.split(":").map(parseFloat),2))[0],t=t[1],r=v(r)?e.addNumericRefinement(m,">=",r):e,v(t)?r.addNumericRefinement(m,"<=",t):r):e},getRenderState:function(e,t){return A(A({},e),{},{numericMenu:A(A({},e.numericMenu),{},Mo({},m,this.getWidgetRenderState(t)))})},getWidgetRenderState:function(e){var n,t,i=this,r=e.results,a=e.state,o=e.instantSearchInstance,c=e.helper,s=e.createURL,e=(d.refine||(d.refine=function(e){var t=qo(c.state,m,e);d.sendEvent("click:internal",e),c.setState(t).search()}),d.createURL||(d.createURL=function(r){return function(t){return s(function(e){return i.getWidgetUiState(e,{searchParameters:qo(r,m,t),helper:c})})}}),d.sendEvent||(d.sendEvent=Qo({instantSearchInstance:o})),!r||0===r.nbHits),o=(n=a,p.map(function(e){var t=e.start,r=e.end,e=e.label;return{label:e,value:encodeURI(JSON.stringify({start:t,end:r})),isRefined:Bo(n,m,{start:t,end:r,label:e})}})),u=!0,l=function(e,t){var r,n,i,a,o="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(o)return n=!(r=!0),{s:function(){o=o.call(e)},n:function(){var e=o.next();return r=e.done,e},e:function(e){n=!0,i=e},f:function(){try{r||null==o.return||o.return()}finally{if(n)throw i}}};if(Array.isArray(e)||(o=Wo(e))||t&&e&&"number"==typeof e.length)return o&&(e=o),a=0,{s:t=function(){},n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:t};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(o);try{for(l.s();!(t=l.n()).done;){var f=t.value;if(f.isRefined&&"{}"!==decodeURI(f.value)){u=!1;break}}}catch(e){l.e(e)}finally{l.f()}return{createURL:d.createURL(a),items:g(o,{results:r}),hasNoResults:e,canRefine:!(e&&u),refine:d.refine,sendEvent:d.sendEvent,widgetParams:h}}};throw new Error(Lo("The `items` option expects an array of objects."))}}var Lo=i({name:"numeric-menu",connector:!0}),Uo="ais.numericMenu",Qo=function(e){var t=e.instantSearchInstance;return function(){1===arguments.length&&t.sendEventToInsights(arguments.length<=0?void 0:arguments[0])}};function Bo(e,t,r){var n=e.getNumericRefinements(t);return void 0!==r.start&&void 0!==r.end?r.start===r.end?Vo(n,"=",r.start):Vo(n,">=",r.start)&&Vo(n,"<=",r.end):void 0!==r.start?Vo(n,">=",r.start):void 0!==r.end?Vo(n,"<=",r.end):void 0===r.start&&void 0===r.end&&Object.keys(n).every(function(e){return 0===(n[e]||[]).length})}function qo(e,t,r){var r=JSON.parse(decodeURI(r)),n=e.getNumericRefinements(t);if(void 0===r.start&&void 0===r.end)return e.removeNumericRefinement(t);if(Bo(e,t,r)||(e=e.removeNumericRefinement(t)),void 0!==r.start&&void 0!==r.end){if(r.start>r.end)throw new Error("option.start should be > to option.end");if(r.start===r.end)return e=Vo(n,"=",r.start)?e.removeNumericRefinement(t,"=",r.start):e.addNumericRefinement(t,"=",r.start)}return void 0!==r.start&&(e=(e=Vo(n,">=",r.start)?e.removeNumericRefinement(t,">=",r.start):e).addNumericRefinement(t,">=",r.start)),"number"==typeof(e=void 0!==r.end?(e=Vo(n,"<=",r.end)?e.removeNumericRefinement(t,"<=",r.end):e).addNumericRefinement(t,"<=",r.end):e).page&&(e.page=0),e}function Vo(e,t,r){return void 0!==e[t]&&e[t].includes(r)}function Jo(e){return(Jo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function zo(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Ko(n.key),n)}}function Xo(e,t,r){(t=Ko(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}function Ko(e){e=function(e,t){if("object"!==Jo(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!==Jo(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"===Jo(e)?e:String(e)}var Go=function(){function t(e){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");Xo(this,"currentPage",void 0),Xo(this,"total",void 0),Xo(this,"padding",void 0),this.currentPage=e.currentPage,this.total=e.total,this.padding=e.padding}var e,r,n;return e=t,(r=[{key:"pages",value:function(){var e,t=this.total,r=this.currentPage,n=this.padding;return 0===t?[0]:ir((e=this.nbPagesDisplayed(n,t))===t?{end:t}:{start:r-(n=this.calculatePaddingLeft(r,n,t,e)),end:r+(e-n)})}},{key:"nbPagesDisplayed",value:function(e,t){return Math.min(2*e+1,t)}},{key:"calculatePaddingLeft",value:function(e,t,r,n){return e<=t?e:r-t<=e?n-(r-e):t}},{key:"isLastPage",value:function(){return this.currentPage===this.total-1||0===this.total}},{key:"isFirstPage",value:function(){return 0===this.currentPage}}])&&zo(e.prototype,r),n&&zo(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Zo(e){return(Zo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Yo(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function ec(n){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?Yo(Object(i),!0).forEach(function(e){var t,r;t=n,r=i[e=e],(e=function(e){e=function(e,t){if("object"!==Zo(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!==Zo(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"===Zo(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):Yo(Object(i)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(i,e))})}return n}function tc(r){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:S;return m(r,rc()),function(a){var e=a||{},o=e.totalPages,e=e.padding,c=new Go({currentPage:0,total:0,padding:void 0===e?3:e}),s={};return{$$type:"ais.pagination",init:function(e){var t=e.instantSearchInstance;r(ec(ec({},this.getWidgetRenderState(e)),{},{instantSearchInstance:t}),!0)},render:function(e){var t=e.instantSearchInstance;r(ec(ec({},this.getWidgetRenderState(e)),{},{instantSearchInstance:t}),!1)},dispose:function(e){e=e.state;return t(),e.setQueryParameter("page",void 0)},getWidgetUiState:function(e,t){t=t.searchParameters.page||0;return t?ec(ec({},e),{},{page:t+1}):e},getWidgetSearchParameters:function(e,t){t=t.uiState,t=t.page?t.page-1:0;return e.setQueryParameter("page",t)},getWidgetRenderState:function(e){var t=e.results,r=e.helper,n=e.state,i=e.createURL,e=(s.refine||(s.refine=function(e){r.setPage(e),r.search()}),s.createURL||(s.createURL=function(t){return i(function(e){return ec(ec({},e),{},{page:t+1})})}),n.page||0),n=(n=(n=t||{nbPages:0}).nbPages,void 0!==o?Math.min(o,n):n);return c.currentPage=e,c.total=n,{createURL:s.createURL,refine:s.refine,canRefine:1<n,currentRefinement:e,nbHits:(null==t?void 0:t.nbHits)||0,nbPages:n,pages:t?c.pages():[],isFirstPage:c.isFirstPage(),isLastPage:c.isLastPage(),widgetParams:a}},getRenderState:function(e,t){return ec(ec({},e),{},{pagination:this.getWidgetRenderState(t)})}}}}var rc=i({name:"pagination",connector:!0});function nc(e){return(nc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ic(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function ac(n){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?ic(Object(i),!0).forEach(function(e){var t,r;t=n,r=i[e=e],(e=function(e){e=function(e,t){if("object"!==nc(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!==nc(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"===nc(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):ic(Object(i)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(i,e))})}return n}function oc(e){return function(e){if(Array.isArray(e))return cc(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){var r;if(e)return"string"==typeof e?cc(e,t):"Map"===(r="Object"===(r=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?cc(e,t):void 0}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function cc(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var sc=i({name:"query-rules",connector:!0});function uc(e){var i,a,o,t=this.helper,r=this.initialRuleContexts,n=this.trackedFilters,c=this.transformRuleContexts,e=e.state,s=e.ruleContexts||[],n=(i=(n={helper:t,sharedHelperState:e,trackedFilters:n}).helper,a=n.sharedHelperState,o=n.trackedFilters,Object.keys(o).reduce(function(e,t){var r=It(i.lastResults||{},a,!0).filter(function(e){return e.attribute===t}).map(function(e){return e.numericValue||e.name}),n=(0,o[t])(r);return[].concat(oc(e),oc(r.filter(function(e){return n.includes(e)}).map(function(e){return"ais-".concat(t,"-").concat(e).replace(/[^a-z0-9-_]+/gi,"_")})))},[])),c=c([].concat(oc(r),oc(n))).slice(0,10);Jt(s,c)||t.overrideStateWithoutTriggeringChangeEvent(ac(ac({},e),{},{ruleContexts:c}))}function lc(l){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:S;return m(l,sc()),function(i){var a,e=i||{},t=e.trackedFilters,o=void 0===t?{}:t,t=e.transformRuleContexts,c=void 0===t?function(e){return e}:t,t=e.transformItems,r=void 0===t?function(e){return e}:t,s=(Object.keys(o).forEach(function(e){if("function"!=typeof o[e])throw new Error(sc("'The \"".concat(e,'" filter value in the `trackedFilters` option expects a function.')))}),0<Object.keys(o).length),u=[];return{$$type:"ais.queryRules",init:function(e){var t=e.helper,r=e.state,n=e.instantSearchInstance;u=r.ruleContexts||[],a=uc.bind({helper:t,initialRuleContexts:u,trackedFilters:o,transformRuleContexts:c}),s&&(([r.disjunctiveFacetsRefinements,r.facetsRefinements,r.hierarchicalFacetsRefinements,r.numericRefinements].some(function(e){return Boolean(e&&0<Object.keys(e).length)})||Boolean(i.transformRuleContexts))&&a({state:r}),t.on("change",a)),l(ac(ac({},this.getWidgetRenderState(e)),{},{instantSearchInstance:n}),!0)},render:function(e){var t=e.instantSearchInstance;l(ac(ac({},this.getWidgetRenderState(e)),{},{instantSearchInstance:t}),!1)},getWidgetRenderState:function(e){var e=e.results,t=(e||{}).userData;return{items:r(void 0===t?[]:t,{results:e}),widgetParams:i}},getRenderState:function(e,t){return ac(ac({},e),{},{queryRules:this.getWidgetRenderState(t)})},dispose:function(e){var t=e.helper,e=e.state;return n(),s?(t.removeListener("change",a),e.setQueryParameter("ruleContexts",u)):e}}}}function fc(e){return(fc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function hc(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function D(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?hc(Object(r),!0).forEach(function(e){dc(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):hc(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function dc(e,t,r){return(t=function(e){e=function(e,t){if("object"!==fc(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!==fc(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"===fc(e)?e:String(e)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function mc(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,a,o,c=[],s=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);s=!0);}catch(e){u=!0,i=e}finally{try{if(!s&&null!=r.return&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw i}}return c}}(e,t)||function(e,t){var r;if(e)return"string"==typeof e?pc(e,t):"Map"===(r="Object"===(r=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?pc(e,t):void 0}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function pc(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var gc=i({name:"range-input",connector:!0},{name:"range-slider",connector:!0}),yc="ais.range";function vc(e){var t=e.min,r=e.max,e=e.precision,e=Math.pow(10,e);return{min:t&&Math.floor(t*e)/e,max:r&&Math.ceil(r*e)/e}}function bc(r){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:S;return m(r,gc()),function(c){var e=c||{},t=e.attribute,u=void 0===t?"":t,l=e.min,f=e.max,t=e.precision,h=void 0===t?0:t;if(!u)throw new Error(gc("The `attribute` option is required."));if(v(l)&&v(f)&&f<l)throw new Error(gc("The `max` option can't be lower than `min`."));var s={from:function(e){return e.toLocaleString()},to:function(e){return Number(Number(e).toFixed(h)).toLocaleString()}},i=function(e,t,r,n){var e=e.state,i=t.min,t=t.max,a=mc(e.getNumericRefinement(u,">=")||[],1)[0],o=mc(e.getNumericRefinement(u,"<=")||[],1)[0],c=void 0===r||""===r,s=void 0===n||""===n,r=vc({min:c?void 0:parseFloat(r),max:s?void 0:parseFloat(n),precision:h}),n=r.min,r=r.max,c=v(l)||i!==n?v(l)&&c?l:n:void 0,n=v(f)||t!==r?v(f)&&s?f:r:void 0,s=void 0===c,r=v(i)&&i<=c,s=s||v(c)&&(!v(i)||r),i=void 0===n,r=v(n)&&n<=t,i=i||v(n)&&(!v(t)||r);return(a!==c||o!==n)&&s&&i?(e=e.removeNumericRefinement(u),v(c)&&(e=e.addNumericRefinement(u,">=",c)),(e=v(n)?e.addNumericRefinement(u,"<=",n):e).resetPage()):null};function d(r,n){return function(){var e=mc(0<arguments.length&&void 0!==arguments[0]?arguments[0]:[void 0,void 0],2),t=e[0],e=e[1],t=i(r,n,t,e);t&&r.setState(t).search()}}return{$$type:yc,init:function(e){r(D(D({},this.getWidgetRenderState(e)),{},{instantSearchInstance:e.instantSearchInstance}),!0)},render:function(e){r(D(D({},this.getWidgetRenderState(e)),{},{instantSearchInstance:e.instantSearchInstance}),!1)},getRenderState:function(e,t){return D(D({},e),{},{range:D(D({},e.range),{},dc({},u,this.getWidgetRenderState(t)))})},getWidgetRenderState:function(e){var t,r=e.results,n=e.helper,e=e.instantSearchInstance,i=bt(r&&r.disjunctiveFacets||[],function(e){return e.name===u}),i=i&&i.stats||{min:void 0,max:void 0},a=(i=i,a=v(l)?l:v(i.min)?i.min:0,i=v(f)?f:v(i.max)?i.max:0,vc({min:a,max:i,precision:h})),o=(o=mc((i=n).getNumericRefinement(u,">=")||[],1)[0],i=mc(i.getNumericRefinement(u,"<=")||[],1)[0],[v(o)?o:-1/0,v(i)?i:1/0]),i=d(n,r?a:{min:void 0,max:void 0});return{refine:i,canRefine:a.min!==a.max,format:s,range:a,sendEvent:(t=e,function(){1===arguments.length&&t.sendEventToInsights(arguments.length<=0?void 0:arguments[0])}),widgetParams:D(D({},c),{},{precision:h}),start:o}},dispose:function(e){e=e.state;return n(),e.removeDisjunctiveFacet(u).removeNumericRefinement(u)},getWidgetUiState:function(e,t){var t=t.searchParameters.getNumericRefinements(u),r=t[">="],r=void 0===r?[]:r,t=t["<="],t=void 0===t?[]:t;return 0===r.length&&0===t.length?e:D(D({},e),{},{range:D(D({},e.range),{},dc({},u,"".concat(r,":").concat(t)))})},getWidgetSearchParameters:function(e,t){var r,t=t.uiState,e=e.addDisjunctiveFacet(u).setQueryParameters({numericRefinements:D(D({},e.numericRefinements),{},dc({},u,{}))}),t=(v(l)&&(e=e.addNumericRefinement(u,">=",l)),v(f)&&(e=e.addNumericRefinement(u,"<=",f)),t.range&&t.range[u]);return e=t&&-1!==t.indexOf(":")&&(r=(t=mc(t.split(":").map(parseFloat),2))[0],t=t[1],v(r)&&(!v(l)||l<r)&&(e=(e=e.removeNumericRefinement(u,">=")).addNumericRefinement(u,">=",r)),v(t))&&(!v(f)||t<f)?(e=e.removeNumericRefinement(u,"<=")).addNumericRefinement(u,"<=",t):e}}}}function Sc(e){return(Sc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Oc=["name","escapedValue"],jc=["escapedValue","value"];function wc(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function k(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?wc(Object(r),!0).forEach(function(e){Pc(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):wc(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function Pc(e,t,r){return(t=function(e){e=function(e,t){if("object"!==Sc(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!==Sc(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"===Sc(e)?e:String(e)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Rc(e,t){if(null==e)return{};var r,n=function(e,t){if(null==e)return{};var r,n,i={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],0<=t.indexOf(r)||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols)for(var i=Object.getOwnPropertySymbols(e),a=0;a<i.length;a++)r=i[a],0<=t.indexOf(r)||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r]);return n}function Ec(s){var r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:S;return m(s,Fc()),function(h){var e=h||{},d=e.attribute,t=e.operator,i=void 0===t?"or":t,t=e.limit,m=void 0===t?10:t,t=e.showMore,p=void 0!==t&&t,t=e.showMoreLimit,a=void 0===t?20:t,t=e.sortBy,g=void 0===t?xc:t,t=e.escapeFacetValues,c=void 0===t||t,t=e.transformItems,y=void 0===t?function(e){return e}:t;if(!d)throw new Error(Fc("The `attribute` option is required."));if(!/^(and|or)$/.test(i))throw new Error(Fc('The `operator` must one of: `"and"`, `"or"` (got "'.concat(i,'").')));if(!0===p&&a<=m)throw new Error(Fc("`showMoreLimit` should be greater than `limit`."));function v(e){var t=e.name,r=e.escapedValue;return k(k({},Rc(e,Oc)),{},{value:r,label:t,highlighted:t})}var b,S,O,j=[],w=!0,P=!1,R=function(){};function E(){R()}function F(){return P?a:m}function x(a,o){return function(i){return function(e){var t,r=i.instantSearchInstance,n=i.results;""===e&&j?s(k(k({},o.getWidgetRenderState(k(k({},i),{},{results:b}))),{},{instantSearchInstance:r}),!1):(t={highlightPreTag:(c?_:u).highlightPreTag,highlightPostTag:(c?_:u).highlightPostTag},a.searchForFacetValues(d,e,Math.min(F(),100),t).then(function(e){e=c?e.facetHits.map(function(e){return ze(ze({},e),{},{highlighted:Ke(e.highlighted)})}):e.facetHits,e=y(e.map(function(e){var t=e.escapedValue,r=e.value;return k(k({},Rc(e,jc)),{},{value:t,label:r})}),{results:n});s(k(k({},o.getWidgetRenderState(k(k({},i),{},{results:b}))),{},{items:e,canToggleShowMore:!1,canRefine:!0,isFromSearch:!0,instantSearchInstance:r}),!1)}))}}}var I=function(){return function(){}};return{$$type:"ais.refinementList",init:function(e){s(k(k({},this.getWidgetRenderState(e)),{},{instantSearchInstance:e.instantSearchInstance}),!0)},render:function(e){s(k(k({},this.getWidgetRenderState(e)),{},{instantSearchInstance:e.instantSearchInstance}),!1)},getRenderState:function(e,t){return k(k({},e),{},{refinementList:k(k({},e.refinementList),{},Pc({},d,this.getWidgetRenderState(t)))})},getWidgetRenderState:function(e){var t,r,n=this,i=e.results,a=e.state,o=e.createURL,c=e.instantSearchInstance,s=e.helper,u=[],l=[],c=(O&&S&&I||(O=at({instantSearchInstance:c,helper:s,attribute:d,widgetType:this.$$type}),S=function(e){O("click:internal",e),s.toggleFacetRefinement(d,e).search()},I=x(s,this)),i&&(l=(c=i.getFacetValues(d,{sortBy:g,facetOrdering:g===xc}))&&Array.isArray(c)?c:[],u=y(l.slice(0,F()).map(v),{results:i}),c=a.maxValuesPerFacet,f=F(),w=f<c?l.length<=f:l.length<f,b=i,j=u,e.results)&&(t=e,r=this,R=function(){P=!P,r.render(t)}),I&&I(e)),l=P&&j.length>m,f=p&&!w;return{createURL:function(t){return o(function(e){return n.getWidgetUiState(e,{searchParameters:a.resetPage().toggleFacetRefinement(d,t),helper:s})})},items:u,refine:S,searchForItems:c,isFromSearch:!1,canRefine:0<u.length,widgetParams:h,isShowingMore:P,canToggleShowMore:l||f,toggleShowMore:E,sendEvent:O,hasExhaustiveItems:w}},dispose:function(e){e=e.state,r(),e=e.setQueryParameter("maxValuesPerFacet",void 0);return"and"===i?e.removeFacet(d):e.removeDisjunctiveFacet(d)},getWidgetUiState:function(e,t){var t=t.searchParameters,t="or"===i?t.getDisjunctiveRefinements(d):t.getConjunctiveRefinements(d);return e=k(k({},e),{},{refinementList:k(k({},e.refinementList),{},Pc({},d,t))}),t=d,e.refinementList&&(e.refinementList[t]&&0!==e.refinementList[t].length||delete e.refinementList[t],0===Object.keys(e.refinementList).length)&&delete e.refinementList,e},getWidgetSearchParameters:function(e,t){var r,t=t.uiState,n="or"===i;return e.isHierarchicalFacet(d)||n&&e.isConjunctiveFacet(d)||!n&&e.isDisjunctiveFacet(d)?e:(t=t.refinementList&&t.refinementList[d],r=(e=n?e.addDisjunctiveFacet(d).removeDisjunctiveFacetRefinement(d):e.addFacet(d).removeFacetRefinement(d)).maxValuesPerFacet||0,r=Math.max(r,p?a:m),e=e.setQueryParameter("maxValuesPerFacet",r),t?t.reduce(function(e,t){return n?e.addDisjunctiveFacetRefinement(d,t):e.addFacetRefinement(d,t)},e):e.setQueryParameters(Pc({},r=n?"disjunctiveFacetsRefinements":"facetsRefinements",k(k({},e[r]),{},Pc({},d,[])))))}}}}var Fc=i({name:"refinement-list",connector:!0}),xc=["isRefined","count:desc","name:asc"];function Ic(e){return(Ic="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _c(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function Tc(n){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?_c(Object(i),!0).forEach(function(e){var t,r;t=n,r=i[e=e],(e=function(e){e=function(e,t){if("object"!==Ic(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!==Ic(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"===Ic(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):_c(Object(i)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(i,e))})}return n}function Ac(l){var f=1<arguments.length&&void 0!==arguments[1]?arguments[1]:S;return m(l,Dc()),function(t){var e=t||{},r=e.escapeHTML,n=void 0===r||r,i=e.objectIDs,a=e.limit,o=e.threshold,c=e.fallbackParameters,s=e.queryParameters,r=e.transformItems,u=void 0===r?function(e){return e}:r;if(i&&0!==i.length)return{dependsOn:"recommend",$$type:"ais.relatedProducts",init:function(e){l(Tc(Tc({},this.getWidgetRenderState(e)),{},{instantSearchInstance:e.instantSearchInstance}),!0)},render:function(e){var t=this.getWidgetRenderState(e);l(Tc(Tc({},t),{},{instantSearchInstance:e.instantSearchInstance}),!1)},getRenderState:function(e){return e},getWidgetRenderState:function(e){e=e.results;return null==e?{items:[],widgetParams:t}:(n&&0<e.hits.length&&(e.hits=Ze(e.hits)),{items:u(e.hits,{results:e}),widgetParams:t})},dispose:function(e){e=e.recommendState;return f(),e.removeParams(this.$$id)},getWidgetParameters:function(e){var r=this;return i.reduce(function(e,t){return e.addRelatedProducts({objectID:t,maxRecommendations:a,threshold:o,fallbackParameters:Tc(Tc({},c),n?_:{}),queryParameters:Tc(Tc({},s),n?_:{}),$$id:r.$$id})},e.removeParams(this.$$id))}};throw new Error(Dc("The `objectIDs` option is required."))}}var Dc=i({name:"related-products",connector:!0});function kc(e){return(kc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Nc(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function Wc(n){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?Nc(Object(i),!0).forEach(function(e){var t,r;t=n,r=i[e=e],(e=function(e){e=function(e,t){if("object"!==kc(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!==kc(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"===kc(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):Nc(Object(i)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(i,e))})}return n}function Cc(r){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:S;return m(r,Hc()),function(n){var i,a,e=(n||{}).queryHook,o=void 0===e?Mc:e;return{$$type:"ais.searchBox",init:function(e){var t=e.instantSearchInstance;r(Wc(Wc({},this.getWidgetRenderState(e)),{},{instantSearchInstance:t}),!0)},render:function(e){var t=e.instantSearchInstance;r(Wc(Wc({},this.getWidgetRenderState(e)),{},{instantSearchInstance:t}),!1)},dispose:function(e){e=e.state;return t(),e.setQueryParameter("query",void 0)},getRenderState:function(e,t){return Wc(Wc({},e),{},{searchBox:this.getWidgetRenderState(t)})},getWidgetRenderState:function(e){var t=e.helper,r=e.instantSearchInstance,e=e.state;return i||(i=function(e){o(e,function(e){return t.setQuery(e).search()})},a=function(){t.setQuery("").search()}),{query:e.query||"",refine:i,clear:a,widgetParams:n,isSearchStalled:"stalled"===r.status}},getWidgetUiState:function(e,t){t=t.searchParameters.query||"";return""===t||e&&e.query===t?e:Wc(Wc({},e),{},{query:t})},getWidgetSearchParameters:function(e,t){t=t.uiState;return e.setQueryParameter("query",t.query||"")}}}}var Hc=i({name:"search-box",connector:!0}),Mc=function(e,t){return t(e)};function $c(e){return($c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Lc(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function Uc(n){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?Lc(Object(i),!0).forEach(function(e){var t,r;t=n,r=i[e=e],(e=function(e){e=function(e,t){if("object"!==$c(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!==$c(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"===$c(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):Lc(Object(i)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(i,e))})}return n}function Qc(n){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:S,c=(m(n,Bc()),{});return function(i){var e=i||{},a=e.items,e=e.transformItems,o=void 0===e?function(e){return e}:e;if(Array.isArray(a))return{$$type:"ais.sortBy",init:function(e){var t=e.instantSearchInstance,e=this.getWidgetRenderState(e),r=e.currentRefinement;bt(a,function(e){return e.value===r});n(Uc(Uc({},e),{},{instantSearchInstance:t}),!0)},render:function(e){var t=e.instantSearchInstance;n(Uc(Uc({},this.getWidgetRenderState(e)),{},{instantSearchInstance:t}),!1)},dispose:function(e){e=e.state;return t(),c.initialIndex?e.setIndex(c.initialIndex):e},getRenderState:function(e,t){return Uc(Uc({},e),{},{sortBy:this.getWidgetRenderState(t)})},getWidgetRenderState:function(e){var t=e.results,r=e.helper,n=e.state,e=e.parent,e=(!c.initialIndex&&e&&(c.initialIndex=e.getIndexName()),c.setIndex||(c.setIndex=function(e){r.setIndex(e).search()}),!t||0===t.nbHits);return{currentRefinement:n.index,options:o(a,{results:t}),refine:c.setIndex,hasNoResults:e,canRefine:!e&&0<a.length,widgetParams:i}},getWidgetUiState:function(e,t){t=t.searchParameters.index;return Uc(Uc({},e),{},{sortBy:t!==c.initialIndex?t:void 0})},getWidgetSearchParameters:function(e,t){t=t.uiState;return e.setQueryParameter("index",t.sortBy||c.initialIndex||e.index)}};throw new Error(Bc("The `items` option expects an array of objects."))}}var Bc=i({name:"sort-by",connector:!0});function qc(e){return(qc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Vc(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function Jc(n){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?Vc(Object(i),!0).forEach(function(e){var t,r;t=n,r=i[e=e],(e=function(e){e=function(e,t){if("object"!==qc(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!==qc(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"===qc(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):Vc(Object(i)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(i,e))})}return n}function zc(n){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:S;return m(n,Xc()),function(r){return{$$type:"ais.stats",init:function(e){var t=e.instantSearchInstance;n(Jc(Jc({},this.getWidgetRenderState(e)),{},{instantSearchInstance:t}),!0)},render:function(e){var t=e.instantSearchInstance;n(Jc(Jc({},this.getWidgetRenderState(e)),{},{instantSearchInstance:t}),!1)},dispose:function(){e()},getRenderState:function(e,t){return Jc(Jc({},e),{},{stats:this.getWidgetRenderState(t)})},getWidgetRenderState:function(e){var t=e.results,e=e.state;return t?{hitsPerPage:t.hitsPerPage,nbHits:t.nbHits,nbSortedHits:t.nbSortedHits,areHitsSorted:void 0!==t.appliedRelevancyStrictness&&0<t.appliedRelevancyStrictness&&t.nbSortedHits!==t.nbHits,nbPages:t.nbPages,page:t.page,processingTimeMS:t.processingTimeMS,query:t.query,widgetParams:r}:{hitsPerPage:e.hitsPerPage,nbHits:0,nbSortedHits:void 0,areHitsSorted:!1,nbPages:0,page:e.page||0,processingTimeMS:-1,query:e.query||"",widgetParams:r}}}}}var Xc=i({name:"stats",connector:!0});function Kc(e){return(Kc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Gc(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function N(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Gc(Object(r),!0).forEach(function(e){Zc(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Gc(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function Zc(e,t,r){return(t=function(e){e=function(e,t){if("object"!==Kc(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!==Kc(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"===Kc(e)?e:String(e)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Yc(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,a,o,c=[],s=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);s=!0);}catch(e){u=!0,i=e}finally{try{if(!s&&null!=r.return&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw i}}return c}}(e,t)||function(e,t){var r;if(e)return"string"==typeof e?es(e,t):"Map"===(r="Object"===(r=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?es(e,t):void 0}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function es(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function ts(r){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:S;return m(r,rs()),function(h){var d,m,p,g,y,e=h||{},v=e.attribute,t=e.on,e=e.off;if(v)return d=void 0!==e,m=hr(void 0===t||t).map(vt),p=d?hr(e).map(vt):void 0,y=function(t,e){var r=e.state,n=e.createURL,i=e.getWidgetUiState,a=e.helper;return function(){r=r.resetPage();var e=t?m:p,e=(e&&e.forEach(function(e){r=r.removeDisjunctiveFacetRefinement(v,e)}),t?p:m);return e&&e.forEach(function(e){r=r.addDisjunctiveFacetRefinement(v,e)}),n(function(e){return i(e,{searchParameters:r,helper:a})})}},{$$type:ns,init:function(e){var t=e.instantSearchInstance;r(N(N({},this.getWidgetRenderState(e)),{},{instantSearchInstance:t}),!0)},render:function(e){var t=e.instantSearchInstance;r(N(N({},this.getWidgetRenderState(e)),{},{instantSearchInstance:t}),!1)},dispose:function(e){e=e.state;return n(),e.removeDisjunctiveFacet(v)},getRenderState:function(e,t){return N(N({},e),{},{toggleRefinement:N(N({},e.toggleRefinement),{},Zc({},v,this.getWidgetRenderState(t)))})},getWidgetRenderState:function(e){var r,t,n,i=e.state,a=e.helper,o=e.results,c=e.createURL,e=e.instantSearchInstance,s=o?m.every(function(e){return i.isDisjunctiveFacetRefined(v,e)}):m.every(function(e){return i.isDisjunctiveFacetRefined(v,e)}),u={isRefined:s,count:0},l={isRefined:d&&!s,count:0},f=(o&&(t=hr(p||!1),r=o.getFacetValues(v,{})||[],f=m.map(function(t){return bt(r,function(e){return e.escapedValue===vt(String(t))})}).filter(function(e){return void 0!==e}),t=d?t.map(function(t){return bt(r,function(e){return e.escapedValue===vt(String(t))})}).filter(function(e){return void 0!==e}):[],u={isRefined:!!f.length&&f.every(function(e){return e.isRefined}),count:f.reduce(function(e,t){return e+t.count},0)||null},l={isRefined:!!t.length&&t.every(function(e){return e.isRefined}),count:t.reduce(function(e,t){return e+t.count},0)||r.reduce(function(e,t){return e+t.count},0)}),g=g||is({instantSearchInstance:e,attribute:v,on:m,helper:a}),s?l:u);return{value:{name:v,isRefined:s,count:o?f.count:null,onFacetValue:u,offFacetValue:l},createURL:y(s,{state:i,createURL:c,helper:a,getWidgetUiState:this.getWidgetUiState}),sendEvent:g,canRefine:Boolean(o?f.count:null),refine:(n=a,function(){var e=(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{isRefined:!1}).isRefined;e?(m.forEach(function(e){return n.removeDisjunctiveFacetRefinement(v,e)}),d&&p.forEach(function(e){return n.addDisjunctiveFacetRefinement(v,e)})):(g("click:internal",e),d&&p.forEach(function(e){return n.removeDisjunctiveFacetRefinement(v,e)}),m.forEach(function(e){return n.addDisjunctiveFacetRefinement(v,e)})),n.search()}),widgetParams:h}},getWidgetUiState:function(e,t){var r=t.searchParameters,t=m&&m.every(function(e){return r.isDisjunctiveFacetRefined(v,e)});return t?N(N({},e),{},{toggle:N(N({},e.toggle),{},Zc({},v,t))}):(null!=(t=e.toggle)&&delete t[v],e)},getWidgetSearchParameters:function(e,t){var r,t=t.uiState;return e.isHierarchicalFacet(v)||e.isConjunctiveFacet(v)?e:(r=e.addDisjunctiveFacet(v).removeDisjunctiveFacetRefinement(v),Boolean(t.toggle&&t.toggle[v])?(m&&m.forEach(function(e){r=r.addDisjunctiveFacetRefinement(v,e)}),r):d?(p&&p.forEach(function(e){r=r.addDisjunctiveFacetRefinement(v,e)}),r):r.setQueryParameters({disjunctiveFacetsRefinements:N(N({},e.disjunctiveFacetsRefinements),{},Zc({},v,[]))}))}};throw new Error(rs("The `attribute` option is required."))}}var rs=i({name:"toggle-refinement",connector:!0}),ns="ais.toggleRefinement",is=function(e){var c=e.instantSearchInstance,s=e.helper,u=e.attribute,l=e.on;return function(){for(var e,t,r,n,i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];1===a.length?c.sendEventToInsights(a[0]):(e=a[1],t=void 0===(t=a[2])?"Filter Applied":t,r=(n=Yc(a[0].split(":"),2))[0],n=n[1],"click"!==r||void 0===l||e||c.sendEventToInsights({insightsMethod:"clickedFilters",widgetType:ns,eventType:r,eventModifier:n,payload:{eventName:t,index:s.getIndex(),filters:l.map(function(e){return"".concat(u,":").concat(e)})},attribute:u}))}};function as(e){return(as="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function os(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function cs(n){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?os(Object(i),!0).forEach(function(e){var t,r;t=n,r=i[e=e],(e=function(e){e=function(e,t){if("object"!==as(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!==as(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"===as(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):os(Object(i)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(i,e))})}return n}function ss(f){var h=1<arguments.length&&void 0!==arguments[1]?arguments[1]:S;return m(f,us()),function(t){var e=t||{},r=e.facetName,n=e.facetValue,i=e.limit,a=e.threshold,o=e.fallbackParameters,c=e.queryParameters,s=e.escapeHTML,u=void 0===s||s,s=e.transformItems,l=void 0===s?function(e){return e}:s;return{dependsOn:"recommend",$$type:"ais.trendingItems",init:function(e){f(cs(cs({},this.getWidgetRenderState(e)),{},{instantSearchInstance:e.instantSearchInstance}),!0)},render:function(e){var t=this.getWidgetRenderState(e);f(cs(cs({},t),{},{instantSearchInstance:e.instantSearchInstance}),!1)},getRenderState:function(e){return e},getWidgetRenderState:function(e){e=e.results;return null==e?{items:[],widgetParams:t}:(u&&0<e.hits.length&&(e.hits=Ze(e.hits)),{items:l(e.hits,{results:e}),widgetParams:t})},dispose:function(e){e=e.recommendState;return h(),e.removeParams(this.$$id)},getWidgetParameters:function(e){return e.removeParams(this.$$id).addTrendingItems({facetName:r,facetValue:n,maxRecommendations:i,threshold:a,fallbackParameters:cs(cs({},o),u?_:{}),queryParameters:cs(cs({},c),u?_:{}),$$id:this.$$id})}}}}var us=i({name:"trending-items",connector:!0});function ls(e){return(ls="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function fs(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function hs(n){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?fs(Object(i),!0).forEach(function(e){var t,r;t=n,r=i[e=e],(e=function(e){e=function(e,t){if("object"!==ls(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!==ls(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"===ls(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):fs(Object(i)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(i,e))})}return n}function ds(l){var f=1<arguments.length&&void 0!==arguments[1]?arguments[1]:S;return m(l,ms()),function(t){var e=t||{},r=e.escapeHTML,n=void 0===r||r,i=e.objectIDs,a=e.limit,o=e.threshold,c=e.fallbackParameters,s=e.queryParameters,r=e.transformItems,u=void 0===r?function(e){return e}:r;if(i&&0!==i.length)return{dependsOn:"recommend",$$type:"ais.lookingSimilar",init:function(e){l(hs(hs({},this.getWidgetRenderState(e)),{},{instantSearchInstance:e.instantSearchInstance}),!0)},render:function(e){var t=this.getWidgetRenderState(e);l(hs(hs({},t),{},{instantSearchInstance:e.instantSearchInstance}),!1)},getRenderState:function(e){return e},getWidgetRenderState:function(e){e=e.results;return null==e?{items:[],widgetParams:t}:(n&&0<e.hits.length&&(e.hits=Ze(e.hits)),{items:u(e.hits,{results:e}),widgetParams:t})},dispose:function(e){e=e.recommendState;return f(),e.removeParams(this.$$id)},getWidgetParameters:function(e){var r=this;return i.reduce(function(e,t){return e.addLookingSimilar({objectID:t,maxRecommendations:a,threshold:o,fallbackParameters:hs(hs({},c),n?_:{}),queryParameters:hs(hs({},s),n?_:{}),$$id:r.$$id})},e.removeParams(this.$$id))}};throw new Error(ms("The `objectIDs` option is required."))}}var ms=i({name:"looking-similar",connector:!0});function ps(e){return(ps="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function gs(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function ys(n){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?gs(Object(i),!0).forEach(function(e){var t,r;t=n,r=i[e=e],(e=function(e){e=function(e,t){if("object"!==ps(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!==ps(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"===ps(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):gs(Object(i)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(i,e))})}return n}function vs(e){var t=e.children,r=e.renderToString,n=e.notifyServer,a=e.searchRef;return Promise.resolve().then(function(){r(s.createElement(xr.Provider,{value:{notifyServer:n}},t))}).then(function(){return new Promise(function(e){return setTimeout(e,0)})}).then(function(){if(a.current)return r=a.current,i=r.mainHelper,t=i.getClient(),i.setClient({search:function(e){return n=e.map(function(e){return e.params}),t.search(e)}}),i.searchOnlyWithDerivedHelpers(),new Promise(function(e,t){i.derivedHelpers[0].on("result",function(){e(n)}),i.on("error",function(e){t(e)}),r.on("error",function(e){t(e)}),i.derivedHelpers.forEach(function(e){return e.on("error",function(e){t(e)})})});throw new Error("Unable to retrieve InstantSearch's server state in `getServerState()`. Did you mount the <InstantSearch> component?");var r,n,i,t}).then(function(e){return{initialResults:function(e,n){var i={},a=0;if(zt(e,function(e){var t,r=e.getResults();r&&(t=null==n?void 0:n[a++],i[e.getIndexId()]=ys({state:ys({},r._state),results:r._rawResults},t&&{requestParams:t}))}),0===Object.keys(i).length)throw new Error("The root index does not have any results. Make sure you have at least one widget that provides results.");return i}(a.current.mainIndex,e)}})}e.Configure=function(e){return Hr(d({},e),{$$widgetType:"ais.configure"}),null},e.DynamicWidgets=function(e){var t=e.children,r=void 0===(r=e.fallbackComponent)?Vr:r,e=M(e,qr),n=s.useRef(r),r=Br(e,{$$widgetType:"ais.dynamicWidgets"}).attributesToRender,i=new Map;return s.Children.forEach(t,function(e){var t=function e(t){if(!Jr(t))return;if(t.props.attribute)return t.props.attribute;if(Array.isArray(t.props.attributes))return t.props.attributes[0];if(t.props.children)return wr(1===s.Children.count(t.props.children)),e(s.Children.only(t.props.children));return}(e);wr(void 0!==t),i.set(t,e)}),s.createElement(s.Fragment,null,r.map(function(e){return s.createElement(b.Fragment,{key:e},i.get(e)||s.createElement(n.current,{attribute:e}))}))},e.Index=function(e){var t,r,n,i,a,o=e.children,c=(e=e=M(e,mn),t=Ir(),r=null==(r=dn())?void 0:r.initialResults,n=Rr(),i=_r(e),c=(e=b.useMemo(function(){return un(i)},[i])).getHelper(),a=fn(),Ar(function(){a()},[c,a]),Nr({widget:e,parentIndex:n,props:i,shouldSsr:Boolean(t||r)}),e);return null===c.getHelper()?null:s.createElement(Pr.Provider,{value:c},o)},e.InstantSearch=function(e){var t=e.children;return(e=Yi(M(e,ta))).started?s.createElement(Er.Provider,{value:e},s.createElement(Pr.Provider,{value:e.mainIndex},t)):null},e.InstantSearchRSCContext=Dr,e.InstantSearchSSRProvider=na,e.InstantSearchServerContext=xr,e.getServerState=function(r,e){function n(){var t=!1;return function(e){e=e.search;if(t)throw new Error("getServerState should be called with a single InstantSearchSSRProvider and a single InstantSearch component.");t=!0,a.current=e}}var i=e.renderToString,a={current:void 0};return vs({children:r,renderToString:i,searchRef:a,notifyServer:n()}).then(function(e){var t=!1;return zt(a.current.mainIndex,function(e){t=t||e.getWidgets().some(function(e){return"ais.dynamicWidgets"===e.$$type})}),t?vs({children:s.createElement(na,e,r),renderToString:i,searchRef:a,notifyServer:n()}):e})},e.useBreadcrumb=function(e,t){return f(ua,e,t)},e.useClearRefinements=function(e,t){return f(ga,e,t)},e.useConfigure=Hr,e.useConnector=f,e.useCurrentRefinements=function(e,t){return f(wa,e,t)},e.useDynamicWidgets=Br,e.useFrequentlyBoughtTogether=function(e,t){return f(Aa,e,t)},e.useGeoSearch=function(e,t){return f($a,e,t)},e.useHierarchicalMenu=function(e,t){return f(Xa,e,t)},e.useHits=function(e,t){return f(ro,e,t)},e.useHitsPerPage=function(e,t){return f(uo,e,t)},e.useInfiniteHits=function(e,t){return f(wo,e,t)},e.useInstantSearch=function(){var t,r,n,i,a,o,c,s=(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{}).catchError,u=Fr();t=Fr(),r=Rr(),e=r.getIndexId(),m=(l=$(b.useState(function(){return t.getUiState()}),2))[0],n=l[1],l=m[e],h=(d=$(b.useState(function(){return t.renderState}),2))[0],i=d[1],d=h[e]||{},e=b.useCallback(function(e){t.setUiState(e)},[t]),f=b.useCallback(function(e){r.setIndexUiState(e)},[r]),b.useEffect(function(){function e(){n(t.getUiState()),i(t.renderState)}return t.addListener("render",e),function(){t.removeListener("render",e)}},[t]);var e=(m={uiState:m,setUiState:e,indexUiState:l,setIndexUiState:f,renderState:h,indexRenderState:d}).uiState,l=m.setUiState,f=m.indexUiState,h=m.setIndexUiState,d=m.renderState,m=m.indexRenderState;a=Fr(),o=Rr(),g=$(b.useState(function(){return jr(o)}),2),p=g[0],c=g[1],b.useEffect(function(){function e(){var e=o.getResults();null!==e?c({results:e,scopedResults:o.getScopedResults()}):0===a.mainIndex.getIndexName().length&&(e=a.mainIndex.getWidgets().find(O))&&c({results:jr(o).results,scopedResults:e.getScopedResults()})}return a.addListener("render",e),function(){a.removeListener("render",e)}},[a,o]);var p=(g=p).results,g=g.scopedResults,y=b.useCallback(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return u.use.apply(u,t),function(){u.unuse.apply(u,t)}},[u]),v=b.useCallback(function(){u.refresh()},[u]);return Ar(function(){var e;return s?(u.addListener("error",e=function(){}),function(){return u.removeListener("error",e)}):function(){}},[u,s]),{results:p,scopedResults:g,uiState:e,setUiState:l,indexUiState:f,setIndexUiState:h,renderState:d,indexRenderState:m,addMiddlewares:y,refresh:v,status:u.status,error:u.error}},e.useInstantSearchContext=Fr,e.useLookingSimilar=function(e,t){return f(ds,e,t)},e.useMenu=function(e,t){return f(To,e,t)},e.useNumericMenu=function(e,t){return f($o,e,t)},e.usePagination=function(e,t){return f(tc,e,t)},e.usePoweredBy=function(){var e=fr(function(e){return(null==(e=e.window.location)?void 0:e.hostname)||""},{fallback:function(){return""}});return{url:"https://www.algolia.com/?utm_source=react-instantsearch&utm_medium=website&utm_content=".concat(e,"&utm_campaign=poweredby")}},e.useQueryRules=function(e,t){return f(lc,e,t)},e.useRSCContext=kr,e.useRange=function(e,t){return f(bc,e,t)},e.useRefinementList=function(e,t){return f(Ec,e,t)},e.useRelatedProducts=function(e,t){return f(Ac,e,t)},e.useSearchBox=function(e,t){return f(Cc,e,t)},e.useSortBy=function(e,t){return f(Qc,e,t)},e.useStats=function(e,t){return f(zc,e,t)},e.useToggleRefinement=function(e,t){return f(ts,e,t)},e.useTrendingItems=function(e,t){return f(ss,e,t)},e.version=W,e.wrapPromiseWithState=function(e){var r;return"status"in e||((r=e).status="pending",r.then(function(e){var t;"pending"===r.status&&((t=r).status="fulfilled",t.value=e)},function(e){var t;"pending"===r.status&&((t=r).status="rejected",t.reason=e)})),e},Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=ReactInstantSearchCore.min.js.map
